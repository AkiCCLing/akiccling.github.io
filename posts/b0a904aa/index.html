<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Unity 基础 | Secret Garden</title><meta name="author" content="Aki_CCLing"><meta name="copyright" content="Aki_CCLing"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Unity 基础目前状态在学习过 Unity 入门后，你已经掌握的内容  Unity 引擎的工作原理 能够熟练使用 Unity 引擎提供的各个重要组件 能够熟练使用 Unity 引擎提供的 API  主要学习内容知识点  Unity 中必备的 3D 数学知识 Unity 中的核心系统和组件以及 APl 实践小项目 窥探如何制作商业游戏———配置文件  主要学习方式理论+习题+实践 理论：语法操作相">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity 基础">
<meta property="og:url" content="https://clearacg.com/posts/b0a904aa/index.html">
<meta property="og:site_name" content="Secret Garden">
<meta property="og:description" content="Unity 基础目前状态在学习过 Unity 入门后，你已经掌握的内容  Unity 引擎的工作原理 能够熟练使用 Unity 引擎提供的各个重要组件 能够熟练使用 Unity 引擎提供的 API  主要学习内容知识点  Unity 中必备的 3D 数学知识 Unity 中的核心系统和组件以及 APl 实践小项目 窥探如何制作商业游戏———配置文件  主要学习方式理论+习题+实践 理论：语法操作相">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/UNITY.jpg">
<meta property="article:published_time" content="2024-02-22T14:24:41.000Z">
<meta property="article:modified_time" content="2024-02-22T14:24:41.000Z">
<meta property="article:author" content="Aki_CCLing">
<meta property="article:tag" content="Technology">
<meta property="article:tag" content="Code">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/UNITY.jpg"><link rel="shortcut icon" href="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/202402221339492.webp"><link rel="canonical" href="https://clearacg.com/posts/b0a904aa/index.html"><link rel="preconnect" href="https://cdn.staticfile.org"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/5.0.33/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?6ec84f1c930ef67ebd0716b3d42538a0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;8c2bdf8651d54d3a82a47995bcb6e5cc&quot;}"></script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "mvz06k2itn");</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.staticfile.org/egjs-infinitegrid/4.11.1/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Unity 基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-22 14:24:41'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/style.css?1"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pic.imgdb.cn/item/65b2a3e9871b83018a2fa6bd.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-music"></i><span> 追番</span></a></li><li><a class="site-page child" href="/game/"><i class="fa-fw fas fa-video"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa-solid fa-comments"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/UNITY.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Secret Garden"><span class="site-name">Secret Garden</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-music"></i><span> 追番</span></a></li><li><a class="site-page child" href="/game/"><i class="fa-fw fas fa-video"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa-solid fa-comments"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Unity 基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-02-22T14:24:41.000Z" title="发表于 2024-02-22 14:24:41">2024-02-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-22T14:24:41.000Z" title="更新于 2024-02-22 14:24:41">2024-02-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Technology/">Technology</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Technology/Unity/">Unity</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Technology/Unity/Unity%E5%9F%BA%E7%A1%80%E5%86%85%E5%AE%B9/">Unity基础内容</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Unity 基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Unity-基础"><a href="#Unity-基础" class="headerlink" title="Unity 基础"></a>Unity 基础</h1><h2 id="目前状态"><a href="#目前状态" class="headerlink" title="目前状态"></a>目前状态</h2><p>在学习过 Unity 入门后，你已经掌握的内容</p>
<ol>
<li>Unity 引擎的工作原理</li>
<li>能够熟练使用 Unity 引擎提供的各个重要组件</li>
<li>能够熟练使用 Unity 引擎提供的 API</li>
</ol>
<h2 id="主要学习内容"><a href="#主要学习内容" class="headerlink" title="主要学习内容"></a>主要学习内容</h2><p>知识点</p>
<ol>
<li>Unity 中必备的 3D 数学知识</li>
<li>Unity 中的核心系统和组件以及 APl</li>
<li>实践小项目</li>
<li>窥探如何制作商业游戏———配置文件</li>
</ol>
<h2 id="主要学习方式"><a href="#主要学习方式" class="headerlink" title="主要学习方式"></a>主要学习方式</h2><p>理论+习题+实践</p>
<p>理论：语法操作相关知识</p>
<p>习题：基于知识点的针对性习题</p>
<p>实践：基于知识点的小项目实践</p>
<h2 id="学习建议"><a href="#学习建议" class="headerlink" title="学习建议"></a>学习建议</h2><p>重视基础知识点</p>
<p>多思考多练习</p>
<p>&#x3D;&#x3D;切忌浮躁&#x3D;&#x3D;</p>
<p>Unity 基础当中都是实用又重要的基础知识，必须都要掌握</p>
<h1 id="3D-数学基础"><a href="#3D-数学基础" class="headerlink" title="3D 数学基础"></a>3D 数学基础</h1><h1 id="任务-2：Mathf-知识点"><a href="#任务-2：Mathf-知识点" class="headerlink" title="任务 2：Mathf 知识点"></a>任务 2：Mathf 知识点</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Mathf.html">UnityEngine.Mathf - Unity 脚本 API</a></p>
</blockquote>
<h2 id="知识点一-Mathf-和-Math"><a href="#知识点一-Mathf-和-Math" class="headerlink" title="知识点一 Mathf 和 Math"></a>知识点一 Mathf 和 Math</h2><p>Math 是 C#中封装好的用于数学计算的工具类 —— 位于 System 命名空间中</p>
<p>Mathf 是 Unity 中封装好的用于数学计算的工具结构体 —— 位于 UnityEngine 命名空间中</p>
<p>他们都是提供来用于进行数学相关计算的</p>
<h2 id="知识点二-他们的区别"><a href="#知识点二-他们的区别" class="headerlink" title="知识点二 他们的区别"></a>知识点二 他们的区别</h2><p>Mathf 和 Math 中的相关方法几乎一样</p>
<p>Math 是 C#自带的工具类，主要就提供一些数学相关计算方法</p>
<p>Mathf 是 Unity 专门封装的，不仅包含 Math 中的方法，还多了一些适用于游戏开发的方法</p>
<p>所以我们在进行 Unity 游戏开发时，使用 Mathf 中的方法用于数学计算即可。</p>
<h2 id="知识点三-Mathf-中的常用方法——一般计算一次"><a href="#知识点三-Mathf-中的常用方法——一般计算一次" class="headerlink" title="知识点三 Mathf 中的常用方法——一般计算一次"></a>知识点三 Mathf 中的常用方法——一般计算一次</h2><h3 id="1-π-PI"><a href="#1-π-PI" class="headerlink" title="1.π - PI"></a>1.π - PI</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//     The well-known 3.14159265358979... value (Read Only).</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">const</span> <span class="built_in">float</span> PI = (<span class="built_in">float</span>)Math.PI;</span><br></pre></td></tr></table></figure>

<h3 id="2-取绝对值-Abs"><a href="#2-取绝对值-Abs" class="headerlink" title="2.取绝对值 - Abs"></a>2.取绝对值 - Abs</h3><p>有不同重载，支持多种数值类型</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Abs</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> Math.Abs(<span class="keyword">value</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-向上取整-Ceil，CeilToInt"><a href="#3-向上取整-Ceil，CeilToInt" class="headerlink" title="3.向上取整 - Ceil，CeilToInt"></a>3.向上取整 - Ceil，CeilToInt</h3><p>注意返回值</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Ceil(<span class="number">1.3f</span>));        <span class="comment">//2</span></span><br><span class="line">print(Mathf.CeilToInt(<span class="number">1.3f</span>));   <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Ceil</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Ceiling(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">CeilToInt</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">int</span>)Math.Ceiling(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-向下取整-Floor，FloorToInt"><a href="#4-向下取整-Floor，FloorToInt" class="headerlink" title="4.向下取整 - Floor，FloorToInt"></a>4.向下取整 - Floor，FloorToInt</h3><p>注意返回值</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Floor(<span class="number">1.6f</span>));       <span class="comment">//1</span></span><br><span class="line">print(Mathf.FloorToInt(<span class="number">1.6f</span>));  <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Floor</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Floor(f);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">FloorToInt</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">int</span>)Math.Floor(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-钳制函数-Clamp，Clamp01"><a href="#5-钳制函数-Clamp，Clamp01" class="headerlink" title="5.钳制函数 - Clamp，Clamp01"></a>5.钳制函数 - Clamp，Clamp01</h3><p>传递一个值，和一个区间；如果这个值不在这个区间，返回边界值，否则返回本身。</p>
<p>对于 int 和 float 有两个重载。</p>
<p>Clamp01：只传递一个值，边界值为 0 和 1。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Clamp(<span class="number">10</span>, <span class="number">11</span>, <span class="number">20</span>)); <span class="comment">//11</span></span><br><span class="line">print(Mathf.Clamp(<span class="number">13</span>, <span class="number">11</span>, <span class="number">20</span>)); <span class="comment">//13</span></span><br><span class="line">print(Mathf.Clamp(<span class="number">20</span>, <span class="number">11</span>, <span class="number">20</span>)); <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line">print(Mathf.Clamp01(<span class="number">-1</span>)); <span class="comment">//0</span></span><br><span class="line">print(Mathf.Clamp01(<span class="number">0.2f</span>)); <span class="comment">//0.2</span></span><br><span class="line">print(Mathf.Clamp01(<span class="number">2</span>)); <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Clamp</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span>, <span class="built_in">int</span> min, <span class="built_in">int</span> max</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">value</span> &lt; min)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">value</span> = min;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">value</span> &gt; max)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">value</span> = max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Clamp01</span>(<span class="params"><span class="built_in">float</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">value</span> &lt; <span class="number">0f</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0f</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">value</span> &gt; <span class="number">1f</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1f</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-获取最大值-Max"><a href="#6-获取最大值-Max" class="headerlink" title="6.获取最大值 - Max"></a>6.获取最大值 - Max</h3><p>多个数值是使用变长参数实现的。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Max(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>));   <span class="comment">//4</span></span><br><span class="line">print(Mathf.Max(<span class="number">1</span>, <span class="number">2</span>));         <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Max</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (a &gt; b) ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Max</span>(<span class="params"><span class="keyword">params</span> <span class="built_in">int</span>[] values</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> num = values.Length;</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> num2 = values[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (values[i] &gt; num2)</span><br><span class="line">        &#123;</span><br><span class="line">            num2 = values[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-获取最小值-Min"><a href="#7-获取最小值-Min" class="headerlink" title="7.获取最小值 - Min"></a>7.获取最小值 - Min</h3><p>多个数值是使用变长参数实现的。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Min(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">545</span>, <span class="number">6</span>, <span class="number">1123</span>, <span class="number">123</span>));    <span class="comment">//1</span></span><br><span class="line">print(Mathf.Min(<span class="number">1.1f</span>, <span class="number">0.4f</span>));   <span class="comment">//0.4f</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Min</span>(<span class="params"><span class="built_in">int</span> a, <span class="built_in">int</span> b</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (a &lt; b) ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Min</span>(<span class="params"><span class="keyword">params</span> <span class="built_in">int</span>[] values</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> num = values.Length;</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> num2 = values[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (values[i] &lt; num2)</span><br><span class="line">        &#123;</span><br><span class="line">            num2 = values[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-一个数的-n-次幂-Pow"><a href="#8-一个数的-n-次幂-Pow" class="headerlink" title="8.一个数的 n 次幂 - Pow"></a>8.一个数的 n 次幂 - Pow</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Pow(<span class="number">4</span>, <span class="number">2</span>)); <span class="comment">//16</span></span><br><span class="line">print(Mathf.Pow(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//8</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Pow</span>(<span class="params"><span class="built_in">float</span> f, <span class="built_in">float</span> p</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Pow(f, p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-四舍五入-Round，RoundToInt"><a href="#9-四舍五入-Round，RoundToInt" class="headerlink" title="9.四舍五入 - Round，RoundToInt"></a>9.四舍五入 - Round，RoundToInt</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.RoundToInt(<span class="number">1.2f</span>));  <span class="comment">//1</span></span><br><span class="line">print(Mathf.Round(<span class="number">1.5f</span>));   <span class="comment">//2f</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Round</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Round(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">RoundToInt</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">int</span>)Math.Round(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-返回一个数的平方根-Sqrt"><a href="#10-返回一个数的平方根-Sqrt" class="headerlink" title="10.返回一个数的平方根 - Sqrt"></a>10.返回一个数的平方根 - Sqrt</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Sqrt(<span class="number">2f</span>));  <span class="comment">//1.414214</span></span><br><span class="line">print(Mathf.Sqrt(<span class="number">3f</span>));  <span class="comment">//1.732051</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Sqrt</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Sqrt(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-判断一个数是否是-2-的-n-次方-IsPowerOfTwo"><a href="#11-判断一个数是否是-2-的-n-次方-IsPowerOfTwo" class="headerlink" title="11.判断一个数是否是 2 的 n 次方 - IsPowerOfTwo"></a>11.判断一个数是否是 2 的 n 次方 - IsPowerOfTwo</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.IsPowerOfTwo(<span class="number">8</span>));   <span class="comment">//True</span></span><br><span class="line">print(Mathf.IsPowerOfTwo(<span class="number">1</span>));   <span class="comment">//True</span></span><br><span class="line">print(Mathf.IsPowerOfTwo(<span class="number">3</span>));   <span class="comment">//False</span></span><br><span class="line">print(Mathf.IsPowerOfTwo(<span class="number">2</span>));   <span class="comment">//True</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="built_in">bool</span> <span class="title">IsPowerOfTwo</span>(<span class="params"><span class="built_in">int</span> <span class="keyword">value</span></span>)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="12-判断正负数，返回它的符号-Sign"><a href="#12-判断正负数，返回它的符号-Sign" class="headerlink" title="12.判断正负数，返回它的符号 - Sign"></a>12.判断正负数，返回它的符号 - Sign</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(Mathf.Sign(<span class="number">-1</span>));  <span class="comment">//-1</span></span><br><span class="line">print(Mathf.Sign(<span class="number">2</span>));   <span class="comment">//1</span></span><br><span class="line">print(Mathf.Sign(<span class="number">0</span>));   <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Sign</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (f &gt;= <span class="number">0f</span>) ? <span class="number">1f</span> : (<span class="number">-1f</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="知识点四-Mathf-中的常用方法-Lerp，一般使用其不停计算"><a href="#知识点四-Mathf-中的常用方法-Lerp，一般使用其不停计算" class="headerlink" title="知识点四 Mathf 中的常用方法 Lerp，一般使用其不停计算"></a>知识点四 Mathf 中的常用方法 Lerp，一般使用其不停计算</h2><h3 id="插值运算-Lerp"><a href="#插值运算-Lerp" class="headerlink" title="插值运算 - Lerp"></a>插值运算 - Lerp</h3><p>Lerp 函数公式：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = start + (end - start) * t</span><br><span class="line">result = Mathf.Lerp(start, end, t);</span><br></pre></td></tr></table></figure>

<p>t 为插值系数，取值范围为 0~1</p>
<h4 id="插值运算用法一"><a href="#插值运算用法一" class="headerlink" title="插值运算用法一"></a>插值运算用法一</h4><p>每帧改变 start 的值——变化速度先快后慢，位置无限接近，但是不会得到 end 位置。</p>
<p>因为 start 一直在变大，end - start 的值一直在变小。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start = Mathf.Lerp(start, <span class="number">10</span>, Time.dletatime);</span><br></pre></td></tr></table></figure>

<h4 id="插值运算用法二"><a href="#插值运算用法二" class="headerlink" title="插值运算用法二"></a>插值运算用法二</h4><p>每帧改变 t 的值——变化速度匀速，位置每帧接近，当 t &gt;&#x3D; 1 时，得到结果。</p>
<p>因为 start 不变，end - start 的值由 time 决定，当 time 为 1 时，到达 end。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time += Time.deltaTime;</span><br><span class="line">result = Mathf.Lerp(start, <span class="number">10</span>, time);</span><br></pre></td></tr></table></figure>

<h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><p>使用线性插值实现一个方块跟随另一个方块移动</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson1_p</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform targetObj;</span><br><span class="line">    <span class="keyword">public</span> Transform followObj;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    Vector3 tempPos;</span><br><span class="line">    <span class="built_in">float</span> time = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        tempPos = followObj.position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//第一种使用方法，先快后慢接近，但是最后永远不会重合</span></span><br><span class="line">        Vector3 newPos = followObj.position;</span><br><span class="line">        newPos.x = Mathf.Lerp(followObj.position.x, targetObj.position.x, Time.deltaTime);</span><br><span class="line">        newPos.y = Mathf.Lerp(followObj.position.y, targetObj.position.y, Time.deltaTime);</span><br><span class="line">        newPos.z = Mathf.Lerp(followObj.position.z, targetObj.position.z, Time.deltaTime);</span><br><span class="line">        followObj.position = newPos;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//第二种使用方法，匀速移动，最后重合</span></span><br><span class="line">        <span class="comment">//Vector3 newPos = followObj.position;</span></span><br><span class="line">        <span class="comment">//time += Time.deltaTime;</span></span><br><span class="line">        <span class="comment">//newPos.x = Mathf.Lerp(tempPos.x, targetObj.position.x, time);</span></span><br><span class="line">        <span class="comment">//newPos.y = Mathf.Lerp(tempPos.y, targetObj.position.y, time);</span></span><br><span class="line">        <span class="comment">//newPos.z = Mathf.Lerp(tempPos.z, targetObj.position.z, time);</span></span><br><span class="line">        <span class="comment">//followObj.position = newPos;</span></span><br><span class="line"></span><br><span class="line">        targetObj.Translate(Vector3.forward * Time.deltaTime * moveSpeed);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="任务-4：三角函数-知识点"><a href="#任务-4：三角函数-知识点" class="headerlink" title="任务 4：三角函数 知识点"></a>任务 4：三角函数 知识点</h1><h2 id="知识点一-弧度、角度相互转化"><a href="#知识点一-弧度、角度相互转化" class="headerlink" title="知识点一 弧度、角度相互转化"></a>知识点一 弧度、角度相互转化</h2><h3 id="角度和弧度都是度量角的单位"><a href="#角度和弧度都是度量角的单位" class="headerlink" title="角度和弧度都是度量角的单位"></a>角度和弧度都是度量角的单位</h3><p>角度：1°</p>
<p>弧度：1 radian</p>
<p>圆一周的角度：360°</p>
<p>圆一周的弧度：2 派（Π） radian</p>
<h3 id="角度和弧度的转换关系"><a href="#角度和弧度的转换关系" class="headerlink" title="角度和弧度的转换关系"></a>角度和弧度的转换关系</h3><p>1 rad &#x3D; 180°</p>
<p>1 rad &#x3D; (180 &#x2F; 派)° &#x3D;&gt; 1 rad &#x3D; 180&#x2F; 3.14 ≈ 57.3°</p>
<p>1°&#x3D; (派 &#x2F; 180) rad &#x3D;&gt; 1°&#x3D; 3.14 &#x2F; 180 ≈ 0.01745 rad</p>
<p>由此可以得出<br>弧度 * 57.3 &#x3D; 对应角度</p>
<p>角度 * 0.01745 &#x3D; 对应弧度</p>
<h3 id="Unity-当中的角度弧度转换"><a href="#Unity-当中的角度弧度转换" class="headerlink" title="Unity 当中的角度弧度转换"></a>Unity 当中的角度弧度转换</h3><p>使用 Mathf.Deg2Rad 和 Mathf.Rad2Deg</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//弧度转角度</span></span><br><span class="line"><span class="built_in">float</span> rad = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">float</span> anger = rad * Mathf.Rad2Deg;</span><br><span class="line">print(anger);   <span class="comment">//57.29578</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//角度转弧度</span></span><br><span class="line">anger = <span class="number">1</span>;</span><br><span class="line">rad = anger * Mathf.Deg2Rad;</span><br><span class="line">print(rad);     <span class="comment">//0.01745329</span></span><br></pre></td></tr></table></figure>

<h2 id="知识点二-三角函数"><a href="#知识点二-三角函数" class="headerlink" title="知识点二 三角函数"></a>知识点二 三角函数</h2><p>正弦函数 Sin：对边比斜边，A &#x2F; C</p>
<p>余弦函数 Cos：邻边比斜边，B &#x2F; C</p>
<p>正切函数 Tan：对边比邻边，A &#x2F; B</p>
<p>常用特殊度数正弦余弦值</p>
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>30</th>
<th>45</th>
<th>60</th>
<th>90</th>
<th>180</th>
<th>270</th>
<th>360</th>
</tr>
</thead>
<tbody><tr>
<td>Sin</td>
<td>0</td>
<td>1 &#x2F; 2</td>
<td>根号 2 &#x2F; 2</td>
<td>根号 3 &#x2F; 2</td>
<td>1</td>
<td>0</td>
<td>-1</td>
<td>0</td>
</tr>
<tr>
<td>Cos</td>
<td>1</td>
<td>根号 3 &#x2F; 2</td>
<td>根号 2 &#x2F; 2</td>
<td>1 &#x2F; 2</td>
<td>0</td>
<td>-1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>Tan</td>
<td>0</td>
<td>根号 3 &#x2F; 3</td>
<td>1</td>
<td>根号 3</td>
<td></td>
<td>0</td>
<td></td>
<td>0</td>
</tr>
</tbody></table>
<h3 id="Unity-当中的三角函数"><a href="#Unity-当中的三角函数" class="headerlink" title="Unity 当中的三角函数"></a>Unity 当中的三角函数</h3><p>传入一个弧度，返回对应的函数值。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Sin</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Sin(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Cos</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Cos(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Tan</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Tan(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print(Mathf.Sin(<span class="number">30</span> * Mathf.Deg2Rad));       <span class="comment">//0.5</span></span><br><span class="line">print(Mathf.Cos(<span class="number">30</span> * Mathf.Deg2Rad) * <span class="number">2</span>);   <span class="comment">//1.732051</span></span><br><span class="line">print(Mathf.Tan(<span class="number">30</span> * Mathf.Deg2Rad) * <span class="number">3</span>);   <span class="comment">//1.732051</span></span><br></pre></td></tr></table></figure>

<h2 id="知识点三-反三角函数"><a href="#知识点三-反三角函数" class="headerlink" title="知识点三 反三角函数"></a>知识点三 反三角函数</h2><h3 id="反三角函数"><a href="#反三角函数" class="headerlink" title="反三角函数"></a>反三角函数</h3><ol>
<li>反三角函数是初等函数之一</li>
<li>包括反正弦函数、反余弦函数等</li>
</ol>
<p>作用：通过反三角函数计算正弦值或余弦值对应的&#x3D;&#x3D;弧度值&#x3D;&#x3D;</p>
<h3 id="Unity-当中的反三角函数"><a href="#Unity-当中的反三角函数" class="headerlink" title="Unity 当中的反三角函数"></a>Unity 当中的反三角函数</h3><p>使用 Asin，Acos，Atan，传入一个正、余弦值，正切值，返回对应的弧度</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Asin</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Asin(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Acos</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Acos(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Atan</span>(<span class="params"><span class="built_in">float</span> f</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Atan(f);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print(Mathf.Asin(<span class="number">0.5f</span>) * Mathf.Rad2Deg);        <span class="comment">//30</span></span><br><span class="line">print(Mathf.Acos(<span class="number">0.8660254f</span>) * Mathf.Rad2Deg);  <span class="comment">//30</span></span><br><span class="line">print(Mathf.Atan(<span class="number">0.5773503f</span>) * Mathf.Rad2Deg);  <span class="comment">//30</span></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>三角函数———Mathf.Sin(弧度)、Mathf.Cos(弧度)</li>
<li>角度和弧度———Mathf.Rad2Deg、Mathf.Deg2Rad</li>
<li>三角函数曲线——Sin 和 Cos 函数曲线对于我们的意义</li>
<li>反三角函数———Mathf.Asin(正弦值)、Mathf.Acos(余弦值)</li>
</ol>
<h2 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h2><p>实现一个物体按曲线移动(正弦或者余弦曲线)</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson2_p</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform runObj;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeedDeg;</span><br><span class="line"></span><br><span class="line">    Vector3 newPos;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        newPos = runObj.position;</span><br><span class="line">        moveSpeedDeg = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        newPos.x += moveSpeedDeg * Mathf.Deg2Rad;</span><br><span class="line">        newPos.y = Mathf.Sin(newPos.x);</span><br><span class="line">        runObj.position = newPos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="任务-6：坐标系-知识点"><a href="#任务-6：坐标系-知识点" class="headerlink" title="任务 6：坐标系 知识点"></a>任务 6：坐标系 知识点</h1><h2 id="知识点一-世界坐标系"><a href="#知识点一-世界坐标系" class="headerlink" title="知识点一 世界坐标系"></a>知识点一 世界坐标系</h2><p>原点：世界的中心点</p>
<p>轴向：世界坐标系的三个轴向是固定的</p>
<h3 id="Unity-当中获取世界坐标相关"><a href="#Unity-当中获取世界坐标相关" class="headerlink" title="Unity 当中获取世界坐标相关"></a>Unity 当中获取世界坐标相关</h3><p>目前学习的和世界坐标系相关的，修改他们 会是相对世界坐标系的变化。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.position;</span><br><span class="line"><span class="keyword">this</span>.transform.rotation;</span><br><span class="line"><span class="keyword">this</span>.transform.eulerAngles;</span><br><span class="line"><span class="keyword">this</span>.transform.lossyScale;</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-物体坐标系"><a href="#知识点二-物体坐标系" class="headerlink" title="知识点二 物体坐标系"></a>知识点二 物体坐标系</h2><p>原点：物体的中心点（建模时决定)</p>
<p>轴向：</p>
<ul>
<li>物体右方为 x 轴正方向</li>
<li>物体上方为 y 轴正方向</li>
<li>物体前方为 z 轴正方向</li>
</ul>
<h3 id="Unity-当中获取本地坐标"><a href="#Unity-当中获取本地坐标" class="headerlink" title="Unity 当中获取本地坐标"></a>Unity 当中获取本地坐标</h3><p>相对父对象的物体坐标系的位置的本地坐标，相对坐标。</p>
<p>修改他们，会是相对父对象物体坐标系的变化。</p>
<blockquote>
<p>加了 local 的就是本地坐标</p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.localPosition;</span><br><span class="line"><span class="keyword">this</span>.transform.localEulerAngles;</span><br><span class="line"><span class="keyword">this</span>.transform.localRotation;</span><br><span class="line"><span class="keyword">this</span>.transform.localScale;</span><br></pre></td></tr></table></figure>

<h2 id="知识点三-屏幕坐标系"><a href="#知识点三-屏幕坐标系" class="headerlink" title="知识点三 屏幕坐标系"></a>知识点三 屏幕坐标系</h2><p>原点：屏幕左下角</p>
<p>轴向：</p>
<ul>
<li>向右为 x 轴正方向</li>
<li>向上为 y 轴正方向</li>
</ul>
<p>最大宽高:</p>
<ul>
<li>Screen.width</li>
<li>Screen.height</li>
</ul>
<h3 id="Unity-当中获取屏幕坐标"><a href="#Unity-当中获取屏幕坐标" class="headerlink" title="Unity 当中获取屏幕坐标"></a>Unity 当中获取屏幕坐标</h3><p>通过鼠标位置获取屏幕坐标</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input.mousePosition;</span><br><span class="line">Screen.width;</span><br><span class="line">Screen.height;</span><br></pre></td></tr></table></figure>

<h2 id="知识点四-视口坐标系"><a href="#知识点四-视口坐标系" class="headerlink" title="知识点四 视口坐标系"></a>知识点四 视口坐标系</h2><p>原点：屏幕左下角</p>
<p>轴向:</p>
<ul>
<li>向右为 x 轴正方向</li>
<li>向上为 y 轴正方向</li>
</ul>
<p>特点:</p>
<ul>
<li>左下角为(0,0)</li>
<li>右上角为(1,1)</li>
</ul>
<p>和屏幕坐标类似，只不过是将坐标单位化，变成了比例。</p>
<h3 id="Unity-当中的视口坐标"><a href="#Unity-当中的视口坐标" class="headerlink" title="Unity 当中的视口坐标"></a>Unity 当中的视口坐标</h3><p>就是摄像机上的 ViewPort Rect；</p>
<p>x，y，width，height 都是 0~1。</p>
<h2 id="坐标转换相关"><a href="#坐标转换相关" class="headerlink" title="坐标转换相关"></a>坐标转换相关</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Camera.html">UnityEngine.Camera - Unity 脚本 API</a></p>
</blockquote>
<p>世界转本地</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.InverseTransformDirection</span><br><span class="line"><span class="keyword">this</span>.transform.InverseTransformPoint</span><br><span class="line"><span class="keyword">this</span>.transform.InverseTransformVector</span><br></pre></td></tr></table></figure>

<p>本地转世界</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.TransformDirection</span><br><span class="line"><span class="keyword">this</span>.transform.TransformPoint</span><br><span class="line"><span class="keyword">this</span>.transform.TransformVector</span><br></pre></td></tr></table></figure>

<p>世界转屏幕</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Camera.main.WorldToScreenPoint</span><br></pre></td></tr></table></figure>

<p>屏幕转世界</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Camera.main.ScreenToWorldPoint</span><br></pre></td></tr></table></figure>

<p>世界转视口</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Camera.main.WorldToViewportPoint</span><br></pre></td></tr></table></figure>

<p>视口转世界</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Camera.main.ViewportToWorldPoint</span><br></pre></td></tr></table></figure>

<p>视口转屏幕</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Camera.main.ViewportToScreenPoint</span><br></pre></td></tr></table></figure>

<p>屏幕转视口</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Camera.main.ScreenToViewportPoint</span><br></pre></td></tr></table></figure>

<h1 id="任务-7：向量模长和单位向量-知识点"><a href="#任务-7：向量模长和单位向量-知识点" class="headerlink" title="任务 7：向量模长和单位向量 知识点"></a>任务 7：向量模长和单位向量 知识点</h1><h2 id="知识点一-向量"><a href="#知识点一-向量" class="headerlink" title="知识点一 向量"></a>知识点一 向量</h2><p>标量：有数值大小，没有方向</p>
<p>向量：有数值大小，有方向的矢量（一维、二维、三维）</p>
<p>注意：向量在空间中有无数条可以随意移动</p>
<h3 id="Unity-当中的向量"><a href="#Unity-当中的向量" class="headerlink" title="Unity 当中的向量"></a>Unity 当中的向量</h3><p>Unity 当中，使用三维、二维向量，即 Vector3 和 Vector2</p>
<p>Vector2、Vector3 即可以代表一个点，也可以代表一个方向。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="keyword">this</span>.transform.position);	<span class="comment">//表示坐标</span></span><br><span class="line">print(<span class="keyword">this</span>.transform.forward);	<span class="comment">//表示这个物体的面朝向的方向</span></span><br></pre></td></tr></table></figure>

<h2 id="知识点二-两点决定一向量"><a href="#知识点二-两点决定一向量" class="headerlink" title="知识点二 两点决定一向量"></a>知识点二 两点决定一向量</h2><p>A（点）向量：（x1，y1）</p>
<p>B（点）向量：（x2，y2）</p>
<p>则向量 AB 为 B-A，即（x2 - x1，y2 - y1）；</p>
<p>向量 BA 为 A - B，即（x1 - x2，y1 - y2）。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vector3 A = <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 B = <span class="keyword">new</span> Vector3(<span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">Vector3 AB = B - A;</span><br><span class="line">Vector3 BA = A - B;</span><br><span class="line"></span><br><span class="line">print(A);   <span class="comment">//1,0,0</span></span><br><span class="line">print(B);   <span class="comment">//2,0,0</span></span><br><span class="line">print(AB);  <span class="comment">//1,0,0</span></span><br><span class="line">print(BA);  <span class="comment">//-1,0,0</span></span><br></pre></td></tr></table></figure>

<p>对于我们的意义：要求 B 物体在 A 物体什么方向，我们就可以使用 B 物体的 position - A 物体的 position，得到一个 AB 向量，即一个方向。</p>
<h2 id="知识点三-零向量和负向量"><a href="#知识点三-零向量和负向量" class="headerlink" title="知识点三 零向量和负向量"></a>知识点三 零向量和负向量</h2><p>零向量(0,0,0)</p>
<p>零向量是唯一一个大小为 0 的向量</p>
<p>负向量</p>
<p>(x,y,z)的负向量为(-x,-y,-z)</p>
<p>负向量和原向量大小相等</p>
<p>负向量和原向量方向相反</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(Vector3.zero);</span><br><span class="line">print(Vector3.forward);</span><br><span class="line">print(-Vector3.forward);</span><br></pre></td></tr></table></figure>

<h2 id="知识点四-向量的模长"><a href="#知识点四-向量的模长" class="headerlink" title="知识点四 向量的模长"></a>知识点四 向量的模长</h2><p>向量的模长就是向量的长度</p>
<p>向量是由两个点算出，所以向量的模长就是两个点的距离</p>
<p>模长公式：A 向量（x，y，z），则模长 &#x3D; 根号（x^2 + y ^ 2 + z ^ 2）。</p>
<p>Vector3 中提供了获取向量模长的成员属性：magnitude</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(AB.magnitude);</span><br><span class="line">Vector3 C = <span class="keyword">new</span> Vector3(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>);</span><br><span class="line">print(C.magnitude);</span><br><span class="line"></span><br><span class="line">print(Vector3.Distance(A, B));</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">float</span> magnitude =&gt; (<span class="built_in">float</span>)Math.Sqrt(x * x + y * y + z * z);</span><br></pre></td></tr></table></figure>

<h2 id="知识点五-单位向量"><a href="#知识点五-单位向量" class="headerlink" title="知识点五 单位向量"></a>知识点五 单位向量</h2><p>模长为 1 的向量为单位向量</p>
<p>任意一个向量经过归 ─ 化就是单位向量</p>
<p>只需要方向，不想让模长影响计算结果时使用单位向量</p>
<p>归一化公式：</p>
<p>A 向量(x,y,z)，模长 &#x3D; 根号（x^2 + y ^ 2 + z ^ 2）</p>
<p>单位向量 &#x3D; ( x &#x2F; 模长，y &#x2F; 模长，z &#x2F; 模长)</p>
<p>Vector3 中提供了获取单位向量的成员属性：normalized</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(AB.normalized);</span><br><span class="line">print(AB / AB.magnitude);</span><br></pre></td></tr></table></figure>

<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><ol>
<li>Vector3 这边变量，可以表示一个点，也可以表示一个向量，具体表示什么，是根据我们的具体需求和逻辑决定。</li>
<li>如何在 Unity 里面，终点减起点就可以得到向量，点 C 也可以代表向量，代表的就是 OC 向量，O 是坐标系原点。</li>
<li>得到了向量，就可以利用 Vector3 中提供的成员属性得到模长和单位向量。</li>
<li>模长相当于可以得到两点之间的距离 ，单位向量主要是用来进行移动计算的，它不会影响我们想要的移动效果。</li>
</ol>
<h2 id="练习题-2"><a href="#练习题-2" class="headerlink" title="练习题"></a>练习题</h2><ol>
<li><p>Unity 中判断两点之间举例有几种方式?</p>
<ol>
<li>使用 Vector3.Distance(Vector3, Vector3)方法</li>
<li>计算 AB 向量或者 BA 向量的模</li>
</ol>
</li>
<li><p>计算向量(3,4,5）的模长（手写）</p>
<p>根号(3 ^ 2 + 4 ^ 2 + 5 ^ 2) &#x3D; 根号(9 + 16 + 25) &#x3D; 根号 50。</p>
</li>
<li><p>计算向量(3,-4)的单位向量（手写）</p>
<p>模长 &#x3D; 根号(3 ^ 2 + (-4) ^ 2) &#x3D; 5</p>
<p>单位向量：（3 &#x2F; 5, -4 &#x2F; 5)</p>
</li>
</ol>
<h1 id="任务-9：向量加减乘除-知识点"><a href="#任务-9：向量加减乘除-知识点" class="headerlink" title="任务 9：向量加减乘除 知识点"></a>任务 9：向量加减乘除 知识点</h1><h2 id="知识点一-向量加法"><a href="#知识点一-向量加法" class="headerlink" title="知识点一 向量加法"></a>知识点一 向量加法</h2><p>向量 A（x1，y1，z1），向量 B（x2，y2，z2）</p>
<p>A + B &#x3D; （x1 + x2， y1 + y2， z1 + z2）</p>
<p>几何意义：</p>
<ul>
<li>位置 + 位置：两个位置相加，一般没有任何意义。</li>
<li>向量 + 向量：两个向量相加得到一个新的向量<ul>
<li>向量相加，首尾相连</li>
</ul>
</li>
<li>位置 + 向量：位置加向量，得到一个新的位置<ul>
<li>位置和向量相加 &#x3D; 平移位置。</li>
</ul>
</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.position += <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">this</span>.transform.Translate(Vector3.forward * <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Translate</span>(<span class="params">Vector3 translation, [DefaultValue(<span class="string">&quot;Space.Self&quot;</span></span>)] Space relativeTo)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (relativeTo == Space.World)</span><br><span class="line">    &#123;</span><br><span class="line">        position += translation;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        position += TransformDirection(translation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-向量减法"><a href="#知识点二-向量减法" class="headerlink" title="知识点二 向量减法"></a>知识点二 向量减法</h2><p>向量 A（x1，y1，z1），向量 B（x2，y2，z2）</p>
<p>A + B &#x3D; （x1 - x2， y1 - y2， z1 - z2）</p>
<p>几何意义：</p>
<ul>
<li>位置 - 位置：两个位置相减，得到一个新的向量<ul>
<li>两点决定一个向量，终点 - 起点</li>
</ul>
</li>
<li>向量 - 向量：两个向量相减得到一个新的向量<ul>
<li>向量相减，头连头，尾指尾</li>
<li>A - B &#x3D; B 头指 A 头</li>
</ul>
</li>
<li>位置 - 向量：位置减向量，得到一个新的位置<ul>
<li>位置和向量相加 &#x3D; 平移位置。</li>
</ul>
</li>
<li>向量 - 位置：一般情况下，没啥意义</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.position -= <span class="keyword">new</span> Vector3(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">this</span>.transform.Translate(-Vector3.forward * <span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<h2 id="知识点三-向量乘除标量"><a href="#知识点三-向量乘除标量" class="headerlink" title="知识点三 向量乘除标量"></a>知识点三 向量乘除标量</h2><p>向量只会和标量进行乘除法运算</p>
<p>向量 A(x,y,z)</p>
<p>标量 a</p>
<p>A * a &#x3D; （x * a， y * a， z * a）</p>
<p>A &#x2F; a &#x3D; （x &#x2F; a， y &#x2F; a，z &#x2F; a）</p>
<p>几何意义：</p>
<ul>
<li>向量 * or &#x2F; 标量 &#x3D; 向量</li>
<li>向量 * or &#x2F; 正数，方向不变，放大缩小模长</li>
<li>向量 * or &#x2F; 负数，方向相反，放大缩小模长</li>
<li>向量 * 0，得到零向量</li>
</ul>
<p>注意：全局缩放<code>lossyScale</code>不可修改，需要修改缩放，只能修改 localScale</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.localScale *= <span class="number">2</span>;</span><br><span class="line"><span class="keyword">this</span>.transform.localScale /= <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><ol>
<li>向量加法——主要用于位置平移和向量计算</li>
<li>向量减法——主要用于位置平移和向量计算</li>
<li>向量乘除法——主要用于模长放大缩小</li>
</ol>
<h2 id="练习题-3"><a href="#练习题-3" class="headerlink" title="练习题"></a>练习题</h2><p>用向量相关知识，实现摄像机跟随(摄像机不设置为对象子物体)</p>
<p>摄像机一直在物体的后方 4 米，向上偏 7 米的位置</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson5</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform targetTransfrom;</span><br><span class="line">    <span class="keyword">private</span> Vector3 lastPos;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Vector3 pos = targetTransfrom.position - targetTransfrom.forward * <span class="number">4</span> + targetTransfrom.up * <span class="number">7</span>;</span><br><span class="line">        Camera.main.transform.position = pos;</span><br><span class="line">        Camera.main.transform.LookAt(targetTransfrom);</span><br><span class="line"></span><br><span class="line">        lastPos = targetTransfrom.position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LateUpdate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (lastPos != targetTransfrom.position)</span><br><span class="line">        &#123;</span><br><span class="line">            Vector3 pos = targetTransfrom.position - targetTransfrom.forward * <span class="number">4</span> + targetTransfrom.up * <span class="number">7</span>;</span><br><span class="line">            Camera.main.transform.position = pos;</span><br><span class="line">            Camera.main.transform.LookAt(targetTransfrom);</span><br><span class="line">            lastPos = targetTransfrom.position;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-11：向量点乘-知识点"><a href="#任务-11：向量点乘-知识点" class="headerlink" title="任务 11：向量点乘 知识点"></a>任务 11：向量点乘 知识点</h1><h2 id="点乘计算公式"><a href="#点乘计算公式" class="headerlink" title="点乘计算公式"></a>点乘计算公式</h2><p>向量 A (Xa,Ya,Za)</p>
<p>向量 B(Xb,Yb,Zb)</p>
<p>A <strong>·</strong> B &#x3D; Xa * Xb + Ya * Yb + Za * Zb</p>
<p>向量 <strong>·</strong> 向量 &#x3D; 标量</p>
<h2 id="点乘几何意义"><a href="#点乘几何意义" class="headerlink" title="点乘几何意义"></a>点乘几何意义</h2><p>点乘可以得到：一个向量在自己向量上投影的长度。</p>
<p>点乘结果 &gt; 0 两个向量夹角为<code>锐角</code>；</p>
<p>点乘结果 &#x3D; 0 两个向量夹角为<code>直角</code>；</p>
<p>点乘结果 &lt; 0 两个向量夹角为<code>钝角</code>；</p>
<p>我们可以用这个规律判断敌方的大致方位。</p>
<h2 id="补充知识-调试画线"><a href="#补充知识-调试画线" class="headerlink" title="补充知识 调试画线"></a>补充知识 调试画线</h2><p>使用 Debug.DrawLine 和 Debug.DrawDRay，可以画出辅助线和辅助射线。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawLine</span>(<span class="params">Vector3 start, Vector3 end, Color color</span>)</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawLine</span>(<span class="params">Vector3 start, Vector3 end, Color color, <span class="built_in">float</span> duration</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawRay</span>(<span class="params">Vector3 start, Vector3 dir, Color color</span>)</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DrawRay</span>(<span class="params">Vector3 start, Vector3 dir, Color color, <span class="built_in">float</span> duration</span>)</span>;</span><br></pre></td></tr></table></figure>

<h2 id="知识点一-通过点乘判断对象方位"><a href="#知识点一-通过点乘判断对象方位" class="headerlink" title="知识点一 通过点乘判断对象方位"></a>知识点一 通过点乘判断对象方位</h2><p>首先，获取自己的向量即 this.transform.position，对方的向量 targetTransform.position。</p>
<p>求得 AB 向量，使用<code>Vector3.Dot</code>，计算当前的正朝向即 this.transform.forward 和 AB 向量的点乘结果。</p>
<p>如果大于 0，为锐角，即在前方；小于 0，为钝角，即在后方。</p>
<blockquote>
<p>注意，这里求方向需要使用的是当前的面朝向向量，和 AB 向量</p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Debug.DrawRay(<span class="keyword">this</span>.transform.position, <span class="keyword">this</span>.transform.forward, Color.red);</span><br><span class="line">Debug.DrawRay(<span class="keyword">this</span>.transform.position, targetTransform.position - transform.position, Color.red);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用this.transform.forward和AB向量</span></span><br><span class="line"><span class="built_in">float</span> dotRet = Vector3.Dot(transform.forward, targetTransform.position - transform.position);</span><br><span class="line"><span class="keyword">if</span> (dotRet &gt;= <span class="number">0f</span>)</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;target 在我前面&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;target 在我后面&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Dot</span>(<span class="params">Vector3 lhs, Vector3 rhs</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> lhs.x * rhs.x + lhs.y * rhs.y + lhs.z * rhs.z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-通过点乘推导公式算出夹角"><a href="#知识点二-通过点乘推导公式算出夹角" class="headerlink" title="知识点二 通过点乘推导公式算出夹角"></a>知识点二 通过点乘推导公式算出夹角</h2><h3 id="公式推导"><a href="#公式推导" class="headerlink" title="公式推导"></a>公式推导</h3><ol>
<li><p>Cosβ &#x3D; 直角边 &#x2F; 单位向量模长</p>
<p>直角边 &#x3D; Cosβ * 单位向量模长</p>
</li>
<li><p>直角边 &#x3D; 单位向量 A <strong>·</strong> 单位向量 B</p>
<p>Cosβ * 单位向量 B 模长 &#x3D; 单位向量 A <strong>·</strong> 单位向量 B</p>
<p>Cosβ &#x3D; 单位向量 A <strong>·</strong> 单位向量 B</p>
</li>
</ol>
<p>推出结果：β &#x3D; ArcCos（单位向量 A <strong>·</strong> 单位向量 B）。</p>
<img src="【唐老狮】Unity四部曲.assets/image-20230308155552604.png" alt="image-20230308155552604" style="zoom:50%;" />

<h3 id="Unity-当中使用公式算出夹角"><a href="#Unity-当中使用公式算出夹角" class="headerlink" title="Unity 当中使用公式算出夹角"></a>Unity 当中使用公式算出夹角</h3><p>我们可以使用上述公式计算出夹角，也可以直接使用<code>Vector3.Angle</code>直接求出两向量的夹角。</p>
<p>两者的结果是一致的。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算</span></span><br><span class="line">dotRet = Vector3.Dot(transform.forward, (targetTransform.position - transform.position).normalized);</span><br><span class="line">print(<span class="string">&quot;计算角度为：&quot;</span> + Mathf.Acos(dotRet) * Mathf.Rad2Deg);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用API</span></span><br><span class="line">print(<span class="string">&quot;api计算角度为：&quot;</span> + Vector3.Angle(transform.forward, targetTransform.position - transform.position));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">float</span> <span class="title">Angle</span>(<span class="params">Vector3 <span class="keyword">from</span>, Vector3 to</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">float</span> num = (<span class="built_in">float</span>)Math.Sqrt(<span class="keyword">from</span>.sqrMagnitude * to.sqrMagnitude);</span><br><span class="line">    <span class="keyword">if</span> (num &lt; <span class="number">1E-15</span>f)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0f</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//公式</span></span><br><span class="line">    <span class="built_in">float</span> num2 = Mathf.Clamp(Dot(<span class="keyword">from</span>, to) / num, <span class="number">-1f</span>, <span class="number">1f</span>);</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">float</span>)Math.Acos(num2) * <span class="number">57.29578f</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h2><p>向量点乘对于我们的意义</p>
<ol>
<li>判断对象的大致方位</li>
<li>计算两个向量之间的夹角</li>
</ol>
<h2 id="练习题-4"><a href="#练习题-4" class="headerlink" title="练习题"></a>练习题</h2><p>当一个物体 B 在物体 A 前方 45 度角范围内，并且离 A 只有 5 米距离时，在控制台打印“发现入侵者”</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson6_p</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform targetTransform;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> DrawRay</span></span><br><span class="line">        Debug.DrawRay(<span class="keyword">this</span>.transform.position, <span class="keyword">this</span>.transform.forward, Color.red);</span><br><span class="line">        Debug.DrawRay(<span class="keyword">this</span>.transform.position, targetTransform.position - <span class="keyword">this</span>.transform.position, Color.red);</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> 使用公式一步步算</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用公式计算</span></span><br><span class="line">        <span class="comment">//计算AB向量</span></span><br><span class="line">        Vector3 AB = targetTransform.position - <span class="keyword">this</span>.transform.position;</span><br><span class="line">        <span class="built_in">float</span> distance = Mathf.Sqrt(AB.x * AB.x + AB.y * AB.y + AB.z * AB.z);</span><br><span class="line">        <span class="comment">//计算AB向量模长</span></span><br><span class="line">        <span class="built_in">float</span> abModLen = Mathf.Sqrt(AB.x * AB.x + AB.y * AB.y + AB.z * AB.z);</span><br><span class="line">        <span class="comment">//求AB向量的单位向量</span></span><br><span class="line">        AB = <span class="keyword">new</span> Vector3(AB.x / abModLen, AB.y / abModLen, AB.z / abModLen);</span><br><span class="line">        <span class="comment">//求两个单位向量点乘结果，即Cosβ</span></span><br><span class="line">        <span class="built_in">float</span> dotRet = <span class="keyword">this</span>.transform.forward.x * AB.x + <span class="keyword">this</span>.transform.forward.y * AB.y + <span class="keyword">this</span>.transform.forward.z * AB.z;</span><br><span class="line">        <span class="comment">//根据Cosβ，使用Acos求得弧度，再乘转换值得到角度</span></span><br><span class="line">        <span class="built_in">float</span> angle = Mathf.Acos(dotRet) * Mathf.Rad2Deg;</span><br><span class="line">        <span class="keyword">if</span> (distance &lt; <span class="number">5</span> &amp;&amp; angle &gt;= <span class="number">0f</span> &amp;&amp; angle &lt;= <span class="number">45f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">$&quot;计算方式1--发现入侵者，距离：<span class="subst">&#123;distance&#125;</span>，角度：<span class="subst">&#123;angle&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> 使用API计算Cosβ</span></span><br><span class="line">        <span class="comment">//使用API计算Cosβ</span></span><br><span class="line">        dotRet = Vector3.Dot(<span class="keyword">this</span>.transform.forward, (targetTransform.position - <span class="keyword">this</span>.transform.position).normalized);</span><br><span class="line">        angle = Mathf.Acos(dotRet) * Mathf.Rad2Deg;</span><br><span class="line">        <span class="keyword">if</span> (distance &lt; <span class="number">5</span> &amp;&amp; angle &gt;= <span class="number">0f</span> &amp;&amp; angle &lt;= <span class="number">45f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">$&quot;计算方式2--发现入侵者，距离：<span class="subst">&#123;distance&#125;</span>，角度：<span class="subst">&#123;angle&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> 使用API直接计算夹角</span></span><br><span class="line">        <span class="comment">//使用API直接计算夹角</span></span><br><span class="line">        angle = Vector3.Angle(<span class="keyword">this</span>.transform.forward, (targetTransform.position - <span class="keyword">this</span>.transform.position));</span><br><span class="line">        <span class="keyword">if</span> (distance &lt; <span class="number">5</span> &amp;&amp; angle &gt;= <span class="number">0f</span> &amp;&amp; angle &lt;= <span class="number">45f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">$&quot;计算方式3--发现入侵者，距离：<span class="subst">&#123;distance&#125;</span>，角度：<span class="subst">&#123;angle&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-13：向量叉乘-知识点"><a href="#任务-13：向量叉乘-知识点" class="headerlink" title="任务 13：向量叉乘 知识点"></a>任务 13：向量叉乘 知识点</h1><h2 id="知识点一-叉乘计算"><a href="#知识点一-叉乘计算" class="headerlink" title="知识点一 叉乘计算"></a>知识点一 叉乘计算</h2><p>向量 x 向量 &#x3D; 向量</p>
<p>向量 A (Xa,Ya,Za)</p>
<p>向量 B(Xb,Yb,Zb)</p>
<p>Ax B &#x3D;(X,Y,Z)</p>
<p>X &#x3D; Ya * Zb - Za * Yb</p>
<p>Y &#x3D; Za * Xb - Xa * Zb</p>
<p>Z &#x3D; Xa * Yb - Ya * Xb</p>
<h3 id="Unity-当中向量叉乘计算"><a href="#Unity-当中向量叉乘计算" class="headerlink" title="Unity 当中向量叉乘计算"></a>Unity 当中向量叉乘计算</h3><p>使用 API<code>Vector3.Cross</code></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Vector3.Cross(a.position, b.position));</span><br></pre></td></tr></table></figure>

<h2 id="叉乘的几何意义"><a href="#叉乘的几何意义" class="headerlink" title="叉乘的几何意义"></a>叉乘的几何意义</h2><p>A x B 得到的向量，叫做<code>法向量</code></p>
<p>同时垂直 A 和 B</p>
<p>A x B 向量垂直于 A 和 B 组成的平面</p>
<p>A x B &#x3D; -(B x A)</p>
<p>假设向量 A 和 B 都在 XZ 平面上</p>
<p>向量 A 叉乘 向量 B</p>
<p>y 大于 0 证明 B 在 A 右侧</p>
<p>y 小于 0 证明 B 在 A 左侧</p>
<h2 id="总结-4"><a href="#总结-4" class="headerlink" title="总结"></a>总结</h2><p>向量叉乘对于我们的意义</p>
<ol>
<li>得到一个平面的法向量</li>
<li>得到两个向量之间的左右位置关系</li>
</ol>
<h2 id="练习题-5"><a href="#练习题-5" class="headerlink" title="练习题"></a>练习题</h2><ol>
<li>判断一个物体 B 位置再另一个物体 A 的位置的左上，左下，右上，右下哪个方位。</li>
<li>当一个物体 B 在物体 A 左前方 20 度角或右前方 30 度范围内，并且离 A 只有 5 米距离时，在控制台打印”发现入侵者”</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson7_p</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform a;</span><br><span class="line">    <span class="keyword">public</span> Transform b;</span><br><span class="line">    <span class="keyword">private</span> Vector3 c;</span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        c = Vector3.Cross(a.position, b.position);</span><br><span class="line">        <span class="built_in">float</span> angle = Vector3.Angle(a.forward, b.position - a.position);</span><br><span class="line">        <span class="keyword">if</span> (c.y &lt;= <span class="number">0</span> &amp;&amp; angle &gt;= <span class="number">0f</span> &amp;&amp; angle &lt; <span class="number">90f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">&quot;b 在 a的左上，角度：&quot;</span> + angle);</span><br><span class="line">            <span class="keyword">if</span> (angle &lt; <span class="number">20f</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                print(<span class="string">&quot;发现入侵者&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c.y &lt;= <span class="number">0</span> &amp;&amp; angle &gt;= <span class="number">90f</span> &amp;&amp; angle &lt;= <span class="number">180f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">&quot;b 在 a的左下，角度：&quot;</span> + angle);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (c.y &gt; <span class="number">0</span> &amp;&amp; angle &gt;= <span class="number">0f</span> &amp;&amp; angle &lt; <span class="number">90f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">&quot;b 在 a的右上，角度：&quot;</span> + angle);</span><br><span class="line">            <span class="keyword">if</span> (angle &lt; <span class="number">30f</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                print(<span class="string">&quot;发现入侵者&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (c.y &gt; <span class="number">0</span> &amp;&amp; angle &gt;= <span class="number">90f</span> &amp;&amp; angle &lt;= <span class="number">180f</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">&quot;b 在 a的右下，角度：&quot;</span> + angle);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="唐老狮答案"><a href="#唐老狮答案" class="headerlink" title="唐老狮答案"></a>唐老狮答案</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FindEnemy2</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform A;</span><br><span class="line">    <span class="keyword">public</span> Transform B;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> dotResult;</span><br><span class="line">    <span class="keyword">private</span> Vector3 crossResult;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//第一题</span></span><br><span class="line">        dotResult = Vector3.Dot(A.forward, B.position - A.position);</span><br><span class="line">        crossResult = Vector3.Cross(A.forward, B.position - A.position);</span><br><span class="line">        <span class="comment">//判断前后</span></span><br><span class="line">        <span class="keyword">if</span> (dotResult &gt;= <span class="number">0</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//右侧</span></span><br><span class="line">            <span class="keyword">if</span>(crossResult.y &gt;= <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                print(<span class="string">&quot;右前&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//左侧</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                print(<span class="string">&quot;左前&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//右侧</span></span><br><span class="line">            <span class="keyword">if</span> (crossResult.y &gt;= <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                print(<span class="string">&quot;右后&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//左侧</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                print(<span class="string">&quot;左后&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//第二题</span></span><br><span class="line">        <span class="keyword">if</span>( Vector3.Distance(A.position, B.position) &lt;= <span class="number">5</span> )</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>( crossResult.y &gt;= <span class="number">0</span> &amp;&amp; Vector3.Angle(A.forward, B.position - A.position) &lt;= <span class="number">30</span> ||</span><br><span class="line">                crossResult.y &lt; <span class="number">0</span> &amp;&amp; Vector3.Angle(A.forward, B.position - A.position) &lt;= <span class="number">20</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                print(<span class="string">&quot;发现入侵者&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-15：向量插值运算-知识点"><a href="#任务-15：向量插值运算-知识点" class="headerlink" title="任务 15：向量插值运算 知识点"></a>任务 15：向量插值运算 知识点</h1><h2 id="知识点一-线性插值"><a href="#知识点一-线性插值" class="headerlink" title="知识点一 线性插值"></a>知识点一 线性插值</h2><p>对两个点进行插值运算</p>
<p>公式：<code>result = start + (end - start) * t</code></p>
<h3 id="1-先快后慢-每帧改变-start-位置-位置无限接近-但不会得到-end-位置"><a href="#1-先快后慢-每帧改变-start-位置-位置无限接近-但不会得到-end-位置" class="headerlink" title="1.先快后慢 每帧改变 start 位置 位置无限接近 但不会得到 end 位置"></a>1.先快后慢 每帧改变 start 位置 位置无限接近 但不会得到 end 位置</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.position = Vector3.Lerp(a.position, target.position, Time.deltaTime);</span><br></pre></td></tr></table></figure>

<h3 id="2-匀速-每帧改变时间-当-t-1-时-得到结果"><a href="#2-匀速-每帧改变时间-当-t-1-时-得到结果" class="headerlink" title="2.匀速 每帧改变时间 当 t&gt;&#x3D;1 时 得到结果"></a>2.匀速 每帧改变时间 当 t&gt;&#x3D;1 时 得到结果</h3><p>注意：如果目标物体位置改变了，则需要重置参数。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">b.position = Vector3.Lerp(startPos, nowTarget, time);</span><br><span class="line">time += Time.deltaTime;</span><br><span class="line"><span class="comment">//如果目标位置改变了，需要重置参数</span></span><br><span class="line"><span class="keyword">if</span> (target.position != nowTarget)</span><br><span class="line">&#123;</span><br><span class="line">    nowTarget = target.position;</span><br><span class="line">    startPos = b.position;</span><br><span class="line">    time = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-球性插值"><a href="#知识点二-球性插值" class="headerlink" title="知识点二 球性插值"></a>知识点二 球性插值</h2><h3 id="线性和球形插值的区别"><a href="#线性和球形插值的区别" class="headerlink" title="线性和球形插值的区别"></a>线性和球形插值的区别</h3><p>线性：直接平移，直线轨迹</p>
<p>球性：旋转并移动，弧形轨迹</p>
<p>在 Unity 当中，使用<code>Vector3.Slerp</code>，进行球性插值计算。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.position = Vector3.Slerp(c.position, target.position, Time.deltaTime);</span><br></pre></td></tr></table></figure>

<h2 id="总结-5"><a href="#总结-5" class="headerlink" title="总结"></a>总结</h2><ol>
<li>线性插值——用于跟随移动，摄像机跟随。</li>
<li>球形插值——用于曲线运动，模拟太阳运动弧线。</li>
</ol>
<h2 id="练习题-6"><a href="#练习题-6" class="headerlink" title="练习题"></a>练习题</h2><h3 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a>第一题</h3><p>用线性插值相关知识，实现摄像机跟随（摄像机不设置为对象子物体）</p>
<p>摄像机一直在物体的后方 4 米，向上偏 7 米的位置。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson8_P</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> time;</span><br><span class="line">    <span class="keyword">private</span> Vector3 nowTargetPos;</span><br><span class="line">    <span class="keyword">private</span> Vector3 startPos;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        nowTargetPos = target.position - target.forward * <span class="number">4</span> + target.up * <span class="number">7</span>;</span><br><span class="line">        startPos = Camera.main.transform.position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LateUpdate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//第一种，先快后慢</span></span><br><span class="line">        <span class="comment">//Camera.main.transform.position = Vector3.Lerp(Camera.main.transform.position, nowTargetPos, Time.deltaTime);</span></span><br><span class="line">        Camera.main.transform.LookAt(target);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//第二种，匀速移动</span></span><br><span class="line">        Camera.main.transform.position = Vector3.Lerp(startPos, nowTargetPos, time);</span><br><span class="line">        time += Time.deltaTime;</span><br><span class="line">        <span class="keyword">if</span> (nowTargetPos != (target.position - target.forward * <span class="number">4</span> + target.up * <span class="number">7</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            time = <span class="number">0</span>;</span><br><span class="line">            startPos = Camera.main.transform.position;</span><br><span class="line">            nowTargetPos = target.position - target.forward * <span class="number">4</span> + target.up * <span class="number">7</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h3><p>通过球性插值模拟太阳的升降变化</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SunRiseAndDown</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform leftPos;</span><br><span class="line">    <span class="keyword">public</span> Transform rightPos;</span><br><span class="line">    <span class="keyword">public</span> Transform sun;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> moveLeft;</span><br><span class="line">    <span class="keyword">private</span> Vector3 startPos;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> time;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        moveLeft = <span class="literal">true</span>;</span><br><span class="line">        startPos = sun.position;</span><br><span class="line">        time = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">float</span> leftDistance = Vector3.Distance(sun.position, leftPos.position) - <span class="number">1E-1</span>f;</span><br><span class="line">        <span class="built_in">float</span> rightDistance = Vector3.Distance(sun.position, rightPos.position) - <span class="number">1E-1</span>f;</span><br><span class="line">        <span class="keyword">if</span> (leftDistance &lt; <span class="number">1E-1</span>f || rightDistance &lt; <span class="number">1E-1</span>f)</span><br><span class="line">        &#123;</span><br><span class="line">            moveLeft = !moveLeft;</span><br><span class="line">            startPos = sun.position;</span><br><span class="line">            time = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        time += Time.deltaTime / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (moveLeft)</span><br><span class="line">        &#123;</span><br><span class="line">            sun.position = Vector3.Slerp(startPos, leftPos.position + Vector3.up * <span class="number">0.1f</span>, time * <span class="number">0.3f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            sun.position = Vector3.Slerp(startPos, rightPos.position + Vector3.up * <span class="number">0.1f</span>, time * <span class="number">0.3f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="任务-17：为何使用四元数-知识点"><a href="#任务-17：为何使用四元数-知识点" class="headerlink" title="任务 17：为何使用四元数 知识点"></a>任务 17：为何使用四元数 知识点</h1><h2 id="欧拉角"><a href="#欧拉角" class="headerlink" title="欧拉角"></a>欧拉角</h2><p>由三个角度(x,y,z)组成</p>
<p>在特定坐标系下用于描述物体的旋转量</p>
<p>空间中的任意旋转都可以分解成绕</p>
<p>三个互相垂直轴的三个旋转角组成的序列</p>
<h3 id="欧拉角旋转约定"><a href="#欧拉角旋转约定" class="headerlink" title="欧拉角旋转约定"></a>欧拉角旋转约定</h3><p>heading-pitch-bank：是一种最常用的旋转序列约定</p>
<p>Y-X-Z 约定</p>
<p>heading：物体绕自身的对象坐标系的 Y 轴，旋转的角度</p>
<p>pitch：物体绕自身的对象坐标系的 X 轴，旋转的角度</p>
<p>bank：物体绕自身的对象坐标系的 Z 轴，旋转的角度</p>
<h3 id="Unity-中的欧拉角"><a href="#Unity-中的欧拉角" class="headerlink" title="Unity 中的欧拉角"></a>Unity 中的欧拉角</h3><p>lnspector 窗口中调节的 Rotation 就是欧拉角；</p>
<p><code>this.transform.eulerAngles</code>得到的就是欧拉角角度。</p>
<h3 id="欧拉角的优缺点"><a href="#欧拉角的优缺点" class="headerlink" title="欧拉角的优缺点"></a>欧拉角的优缺点</h3><p>优点：</p>
<ul>
<li>直观、易理解；存储空间小(三个数表示)；</li>
<li>可以进行从一个方向到另一个方向旋转大于 180 度的角度</li>
</ul>
<p>缺点：</p>
<ul>
<li><p>同一旋转的表示不唯一</p>
<p>就是 x 轴转 90 度，等于 x 轴转 450 度</p>
</li>
<li><p>万向节死锁</p>
<p>简单理解就是，当两个旋转轴重合时，继续旋转时，发生了维度的丢失，导致旋转的错误旋转。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/344050856">欧拉角万向节死锁 - 知乎 (zhihu.com)</a></p>
</blockquote>
</li>
</ul>
<h3 id="万向节死锁"><a href="#万向节死锁" class="headerlink" title="万向节死锁"></a>万向节死锁</h3><p>当某个特定轴达到某个特殊值时，绕一个轴旋转可能会覆盖住另一个轴的旋转，从而失去一维自由度。</p>
<p>Unity 中 X 轴达到 90 度时，会产生万向节死锁，此时旋转 y 轴和 z 轴，都只会绕着 z 轴旋转。</p>
<h2 id="总结-6"><a href="#总结-6" class="headerlink" title="总结"></a>总结</h2><p>因为欧拉角存在一些缺点</p>
<ol>
<li>同一旋转的表示不唯一</li>
<li>万向节死锁</li>
</ol>
<p>而四元数旋转不存在万向节死锁问题，因此在计算机中我们往往使用四元数来表示三维空间中的旋转信息。</p>
<h1 id="任务-18：四元数是什么-知识点"><a href="#任务-18：四元数是什么-知识点" class="headerlink" title="任务 18：四元数是什么 知识点"></a>任务 18：四元数是什么 知识点</h1><h2 id="四元数的概念"><a href="#四元数的概念" class="headerlink" title="四元数的概念"></a>四元数的概念</h2><p>四元数是简单的超复数，由实数加上三个虚数单位组成，主要用于在三维空间中表示旋转。</p>
<p>四元数原理包含大量数学相关知识，较为复杂比如 ∶ 复数、四维空间等等；</p>
<p>因此此处我们只对其基本构成和基本公式进行讲解，如想深入了解数学原理请从数学层面去查找资料了解它。</p>
<h2 id="四元数构成"><a href="#四元数构成" class="headerlink" title="四元数构成"></a>四元数构成</h2><p>一个四元数包含一个标量和一个 3D 向量</p>
<p>[w,v]，w 为标量，v 为 3D 向量</p>
<p>[w,(x,y,z)]</p>
<p>对于给定的任意一个四元数：表示 3D 空间中的一个旋转量</p>
<h3 id="轴-角对"><a href="#轴-角对" class="headerlink" title="轴-角对"></a>轴-角对</h3><p>在 3D 空间中，任意旋转都可以表示绕着某个轴旋转一个旋转角得到</p>
<p>注意：该轴并不是空间中的 x,y,z 轴而是任意一个轴</p>
<p>对于给定旋转，假设为绕着 n 轴，旋转 β 度，n 轴为(x，y，z)</p>
<p>那么可以构成四元数为</p>
<p>四元数 Q&#x3D;[cos(β&#x2F;2)，sin(β &#x2F; 2) n]</p>
<p>四元数 Q&#x3D; [cos(β &#x2F; 2)，sin(β &#x2F; 2) x，sin(β &#x2F; 2) y，sin( p &#x2F; 2) z]</p>
<p>四元数 Q 则表示绕着轴 n，旋转 β 度的旋转量</p>
<h2 id="Unity-当中的四元数"><a href="#Unity-当中的四元数" class="headerlink" title="Unity 当中的四元数"></a>Unity 当中的四元数</h2><p><code>Quaternion</code>是 Unity 中表示四元数的结构体</p>
<h3 id="Unity-中的四元数初始化方法"><a href="#Unity-中的四元数初始化方法" class="headerlink" title="Unity 中的四元数初始化方法"></a>Unity 中的四元数初始化方法</h3><p>轴角对公式初始化</p>
<p>四元数 Q&#x3D; [cos(β &#x2F; 2)，sin(β &#x2F; 2) x，sin(β &#x2F; 2) y，sin( p &#x2F; 2) z]</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Quaternion q = <span class="keyword">new</span> Quaternion(sin(β/<span class="number">2</span>)x, sin(β/<span class="number">2</span>)y, sin(β/<span class="number">2</span>)z,cos(β/<span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<p>轴角对方法初始化</p>
<p>四元数 Q &#x3D; Quaternion.AngleAxis(角度,轴);</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Quaternion q = Quaternion.AngleAxis(<span class="number">60</span>, Vector3.right);</span><br></pre></td></tr></table></figure>

<h2 id="知识点一-四元数-Quaternion"><a href="#知识点一-四元数-Quaternion" class="headerlink" title="知识点一 四元数 Quaternion"></a>知识点一 四元数 Quaternion</h2><p>初始化了一个四元数，表示绕 x 轴旋转 60 度。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//四元数Q = [cos(β/2),  sin(β/2)x, sin(β/2)y, sin(β/2)z]</span></span><br><span class="line">Quaternion q = <span class="keyword">new</span> Quaternion(Mathf.Sin(<span class="number">30</span> * Mathf.Deg2Rad) * <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, Mathf.Cos(<span class="number">30</span> * Mathf.Deg2Rad));</span><br><span class="line">GameObject obj = GameObject.CreatePrimitive(PrimitiveType.Cube);</span><br><span class="line">obj.transform.rotation = q;</span><br></pre></td></tr></table></figure>

<p>轴角对初始化方法</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Quaternion.AngleAxis.html">Quaternion-AngleAxis - Unity 脚本 API</a></p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Quaternion q2 = Quaternion.AngleAxis(<span class="number">60</span>, Vector3.right);</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-四元数和欧拉角转换"><a href="#知识点二-四元数和欧拉角转换" class="headerlink" title="知识点二 四元数和欧拉角转换"></a>知识点二 四元数和欧拉角转换</h2><p>四元数和欧拉角转换</p>
<p>欧拉角转四元数</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Quaternion.Euler(x,y,z)</span><br></pre></td></tr></table></figure>

<p>四元数转欧拉角</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Quaternion q;</span><br><span class="line">q.eulerAngles</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(Quaternion.Euler(q.eulerAngles));</span><br><span class="line">print(q.eulerAngles);</span><br><span class="line"><span class="comment">//(0.5, 0.0, 0.0, 0.9)</span></span><br><span class="line"><span class="comment">//(60.0, 0.0, 0.0)</span></span><br></pre></td></tr></table></figure>

<h2 id="知识点三-四元数弥补的欧拉角缺点"><a href="#知识点三-四元数弥补的欧拉角缺点" class="headerlink" title="知识点三 四元数弥补的欧拉角缺点"></a>知识点三 四元数弥补的欧拉角缺点</h2><p>欧拉角缺点：</p>
<ol>
<li>同一旋转的表示不唯一</li>
<li>万向节死锁</li>
</ol>
<p>必备知识点：四元数相乘代表旋转四元数</p>
<h3 id="同一旋转的表示不唯一"><a href="#同一旋转的表示不唯一" class="headerlink" title="同一旋转的表示不唯一"></a>同一旋转的表示不唯一</h3><p>由于欧拉角的性质，90 度的旋转和 450 的旋转时一致的，表示不唯一。</p>
<p>而四元数的旋转，只会在[0，180]，[0，-180]之间</p>
<h3 id="万向节死锁-1"><a href="#万向节死锁-1" class="headerlink" title="万向节死锁"></a>万向节死锁</h3><p>我们想让物体绕 y 轴转，但是由于万向节死锁，物体会绕着 z 轴转。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//start</span></span><br><span class="line"><span class="keyword">this</span>.transform.eulerAngles = Vector3.right * <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//update</span></span><br><span class="line">Vector3 e = <span class="keyword">this</span>.transform.eulerAngles;</span><br><span class="line">e += Vector3.up;</span><br><span class="line"><span class="keyword">this</span>.transform.rotation = Quaternion.Euler(e);</span><br></pre></td></tr></table></figure>

<p>使用四元数解决</p>
<blockquote>
<p>四元数相乘，表示一个旋转。</p>
<p>注意：这里的旋转是相对于本地坐标系的</p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.transform.rotation *= Quaternion.AngleAxis(<span class="number">1</span>, Vector3.up);</span><br></pre></td></tr></table></figure>

<h2 id="总结-7"><a href="#总结-7" class="headerlink" title="总结"></a>总结</h2><ol>
<li>四元数构成——[cos(β &#x2F; 2)，sin(β &#x2F; 2) x，sin(β &#x2F; 2) y，sin( p &#x2F; 2) z]</li>
<li>Unity 中的四元数——Quaternion</li>
<li>四元数弥补了欧拉角的缺点—同一旋转的表示不唯一、万向节死锁</li>
</ol>
<p>注意：我们一般不会直接通过四元数的 w，x，y，z 进行修改</p>
<h1 id="任务-19：四元数常用方法-知识点"><a href="#任务-19：四元数常用方法-知识点" class="headerlink" title="任务 19：四元数常用方法 知识点"></a>任务 19：四元数常用方法 知识点</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Quaternion.html">UnityEngine.Quaternion - Unity 脚本 API</a></p>
</blockquote>
<h2 id="知识点一-单位四元数"><a href="#知识点一-单位四元数" class="headerlink" title="知识点一 单位四元数"></a>知识点一 单位四元数</h2><p>单位四元数表示没有旋转量（角位移）</p>
<p>当角度为 0 或者 360 度时</p>
<p>对于给定轴都会得到<code>单位四元数</code></p>
<p>按给定公式理解，Q &#x3D; [cos(β &#x2F; 2), sin(β &#x2F; 2), sin(β &#x2F; 2), sin(β &#x2F; 2)]</p>
<p>[1,(0,0,0)] 和 [-1,(0,0,0)] 都是单位四元数表示没有旋转量。</p>
<p>Unity 当中，使用<code>Quaternion.identity</code></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(Quaternion.identity); <span class="comment">//(0.0, 0.0, 0.0, 1.0)</span></span><br><span class="line">testObj.rotation = Quaternion.identity;</span><br></pre></td></tr></table></figure>

<p>何时使用：初始化对象时，可以使用单位四元数</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Instantiate(testObj, Vector3.zero, Quaternion.identity);</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-插值运算"><a href="#知识点二-插值运算" class="headerlink" title="知识点二 插值运算"></a>知识点二 插值运算</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Quaternion.Lerp.html">Quaternion-Lerp - Unity 脚本 API</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Quaternion.Slerp.html">Quaternion-Slerp - Unity 脚本 API</a></p>
</blockquote>
<p>四元数中同样提供如同 Vector3 的插值运算</p>
<p>Lerp 和 Slerp</p>
<p>在四元数中 Lerp 和 Slerp 只有一些细微差别</p>
<p>由于算法不同</p>
<p>Slerp 的效果会好一些</p>
<p>Lerp 的效果相比 Slerp 更快，但是如果旋转范围较大效果较差。</p>
<p>所以建议使用 Slerp 进行插值运算</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a.rotation = Quaternion.Slerp(a.rotation, targetTransform.rotation, Time.deltaTime);</span><br><span class="line"></span><br><span class="line">time += Time.deltaTime;</span><br><span class="line">b.rotation = Quaternion.Slerp(start, targetTransform.rotation, time);</span><br></pre></td></tr></table></figure>

<h2 id="知识点三-LookRotation，向量指向转四元数"><a href="#知识点三-LookRotation，向量指向转四元数" class="headerlink" title="知识点三 LookRotation，向量指向转四元数"></a>知识点三 LookRotation，向量指向转四元数</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Quaternino.LookRotation(面朝向量);</span><br></pre></td></tr></table></figure>

<p>LookRoataion 方法可以将传入的面朝向量转换为对应的四元数角度信息</p>
<p>举例：当人物面朝向想要改变时，只需要把目标面朝向传入该函数，便可以得到目标四元数角度信息。</p>
<p>之后将人物四元数角度信息改为得到的信息即可达到转向</p>
<h2 id="练习题-7"><a href="#练习题-7" class="headerlink" title="练习题"></a>练习题</h2><h3 id="第一题-1"><a href="#第一题-1" class="headerlink" title="第一题"></a>第一题</h3><p>利用四元数的 LookRotation 方法，实现 LookAt 的效果</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a.rotation = Quaternion.LookRotation(b.position - a.position);</span><br></pre></td></tr></table></figure>

<h3 id="第二题-1"><a href="#第二题-1" class="headerlink" title="第二题"></a>第二题</h3><p>将之前摄像机移动的练习题中的 LookAt 换成 LookRotation 实现并且通过 Slerp 来缓慢看向玩家</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Quaternion tempQuat = Quaternion.LookRotation(player.position - Camera.main.transform.position);</span><br><span class="line"></span><br><span class="line">Camera.main.transform.rotation = Quaternion.Slerp(Camera.main.transform.rotation, tempQuat, Time.deltaTime);</span><br></pre></td></tr></table></figure>

<h1 id="任务-21：四元数计算-知识点"><a href="#任务-21：四元数计算-知识点" class="headerlink" title="任务 21：四元数计算 知识点"></a>任务 21：四元数计算 知识点</h1><h2 id="知识点一-四元数相乘"><a href="#知识点一-四元数相乘" class="headerlink" title="知识点一 四元数相乘"></a>知识点一 四元数相乘</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Quaternion-operator_multiply.html">Quaternion-operator * - Unity 脚本 API</a></p>
</blockquote>
<p>q3 &#x3D; q1 * q2</p>
<p>两个四元数相乘得到一个新的四元数，代表两个旋转量的叠加，相当于旋转。</p>
<p>注意：旋转相对的坐标系是物体&#x3D;&#x3D;自身坐标系&#x3D;&#x3D;</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Quaternion q = Quaternion.AngleAxis(<span class="number">60</span>, Vector3.up);</span><br><span class="line"><span class="keyword">this</span>.transform.rotation *= q;</span><br><span class="line"><span class="keyword">this</span>.transform.rotation *= q;</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-四元数乘向量"><a href="#知识点二-四元数乘向量" class="headerlink" title="知识点二 四元数乘向量"></a>知识点二 四元数乘向量</h2><p>v2 &#x3D; q1 * v1</p>
<p>四元数乘向量返回一个新向量，可以将指定向量旋转对应四元数的旋转量，相当于旋转向量。</p>
<p>注意：四元数乘向量，必须四元数在前，向量在后，因为 Quaternion 没有实现向量在前的方法</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Vector3 forward = Vector3.forward;</span><br><span class="line">print(forward); <span class="comment">//0, 0, 0</span></span><br><span class="line">forward = Quaternion.AngleAxis(<span class="number">45</span>, Vector3.up) * forward;</span><br><span class="line">print(forward); <span class="comment">//0.7, 0, 0.7</span></span><br><span class="line">forward = Quaternion.AngleAxis(<span class="number">45</span>, Vector3.up) * forward;</span><br><span class="line">print(forward); <span class="comment">//1, 0, 0</span></span><br></pre></td></tr></table></figure>

<p>使用场景：飞机发射子弹，已知飞机朝向，只需要一个四元数乘上朝向向量，就可以得到不同方向，就可以在不同方向发射子弹。</p>
<h2 id="练习题-8"><a href="#练习题-8" class="headerlink" title="练习题"></a>练习题</h2><h3 id="第一题-2"><a href="#第一题-2" class="headerlink" title="第一题"></a>第一题</h3><p>用目前所学知识，模拟飞机发射不同类型子弹的方法</p>
<p>单发，双发，扇形，环形</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> E_Bullet_Type</span><br><span class="line">&#123;</span><br><span class="line">    Single,</span><br><span class="line">    Double,</span><br><span class="line">    Fan,</span><br><span class="line">    Annular</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AirPlane</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> GameObject bulletPrefab;</span><br><span class="line">    E_Bullet_Type bulletType = E_Bullet_Type.Single;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha1))</span><br><span class="line">        &#123;</span><br><span class="line">            bulletType = E_Bullet_Type.Single;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha2))</span><br><span class="line">        &#123;</span><br><span class="line">            bulletType = E_Bullet_Type.Double;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha3))</span><br><span class="line">        &#123;</span><br><span class="line">            bulletType = E_Bullet_Type.Fan;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.Alpha4))</span><br><span class="line">        &#123;</span><br><span class="line">            bulletType = E_Bullet_Type.Annular;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Fire();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fire</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">switch</span> (bulletType)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> E_Bullet_Type.Single:</span><br><span class="line">                <span class="comment">//在前方生成</span></span><br><span class="line">                Vector3 pos1 = <span class="keyword">this</span>.transform.position + <span class="keyword">this</span>.transform.forward;</span><br><span class="line">                Instantiate(bulletPrefab, pos1, <span class="keyword">this</span>.transform.rotation);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> E_Bullet_Type.Double:</span><br><span class="line">                <span class="comment">//在左右前方生成</span></span><br><span class="line">                Vector3 leftPos = <span class="keyword">this</span>.transform.position + <span class="keyword">this</span>.transform.forward + Vector3.left;</span><br><span class="line">                Vector3 rightPos = <span class="keyword">this</span>.transform.position + <span class="keyword">this</span>.transform.forward + Vector3.right;</span><br><span class="line">                Instantiate(bulletPrefab, leftPos, <span class="keyword">this</span>.transform.rotation);</span><br><span class="line">                Instantiate(bulletPrefab, rightPos, <span class="keyword">this</span>.transform.rotation);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> E_Bullet_Type.Fan:</span><br><span class="line">                <span class="comment">//由于四元数的旋转量唯一，只能是-180~180，所以正半圆是-90~90</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="built_in">float</span> angle = <span class="number">-90</span>; angle &lt;= <span class="number">90</span>; angle += <span class="number">30</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    GameObject bullet = Instantiate(bulletPrefab);</span><br><span class="line">                    bullet.transform.position = <span class="keyword">this</span>.transform.position;</span><br><span class="line">                    bullet.transform.rotation = <span class="keyword">this</span>.transform.rotation;</span><br><span class="line">                    bullet.transform.forward = Quaternion.AngleAxis(angle, <span class="keyword">this</span>.transform.up) * <span class="keyword">this</span>.transform.forward;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> E_Bullet_Type.Annular:</span><br><span class="line">                <span class="comment">//由于四元数的旋转量唯一，只能是-180~180，所以环形是-180~180</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="built_in">float</span> angle = <span class="number">-180</span>; angle &lt;= <span class="number">180</span>; angle += <span class="number">30</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    GameObject bullet = Instantiate(bulletPrefab);</span><br><span class="line">                    bullet.transform.position = <span class="keyword">this</span>.transform.position;</span><br><span class="line">                    bullet.transform.rotation = <span class="keyword">this</span>.transform.rotation;</span><br><span class="line">                    bullet.transform.forward = Quaternion.AngleAxis(angle, <span class="keyword">this</span>.transform.up) * <span class="keyword">this</span>.transform.forward;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="literal">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Bullet</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Destroy(<span class="keyword">this</span>.gameObject, <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.transform.Translate(Vector3.forward * Time.deltaTime * moveSpeed);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="第二题-2"><a href="#第二题-2" class="headerlink" title="第二题"></a>第二题</h3><p>用所学 3D 数学知识实现摄像机跟随效果</p>
<ol>
<li>摄像机在人物斜后方，通过角度控制倾斜率</li>
<li>通过鼠标滚轮可以控制摄像机距离人物的距离（有最大最小限制)</li>
<li>摄像机看向人物头顶上方一个位置（可调节)</li>
<li>Vector3.Lerp 实现相机跟随人物</li>
<li>Quaternino.Slerp 实现摄像机朝向过渡效果</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CameraMove</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Transform target;    <span class="comment">//目标对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> maxDistance = <span class="number">10</span>;  <span class="comment">//摄像机最大距离</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> minDistance = <span class="number">3</span>;   <span class="comment">//摄像机最小距离</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> batter = <span class="number">45</span>;       <span class="comment">//摄像机倾斜度</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> headOffset = <span class="number">1</span>;    <span class="comment">//目标头顶偏移位置</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> distance = <span class="number">5</span>;      <span class="comment">//距离</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> rotateSpeed = <span class="number">1</span>;   <span class="comment">//旋转速度</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> lookAtSpeed = <span class="number">1</span>;   <span class="comment">//看向目标的速度</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> moveSpeed = <span class="number">1</span>;     <span class="comment">//移动速度</span></span><br><span class="line">    <span class="keyword">private</span> Vector3 nowPos;         <span class="comment">//当前应该在的位置</span></span><br><span class="line">    <span class="keyword">private</span> Vector3 nowDir;         <span class="comment">//当前方向</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LateUpdate</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//鼠标滚轮移动摄像机与目标的距离</span></span><br><span class="line">        distance += Input.GetAxis(<span class="string">&quot;Mouse ScrollWheel&quot;</span>) * rotateSpeed;</span><br><span class="line">        distance = Mathf.Clamp(distance, minDistance, maxDistance);</span><br><span class="line">        <span class="comment">//向头顶偏移</span></span><br><span class="line">        nowPos = target.position + target.up * headOffset;</span><br><span class="line">        <span class="comment">//向斜后方偏移</span></span><br><span class="line">        nowDir = Quaternion.AngleAxis(batter, target.right) * -target.forward;</span><br><span class="line">        nowPos = nowPos + nowDir * distance;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用Lerp移动到指定位置</span></span><br><span class="line">        <span class="keyword">this</span>.transform.position = Vector3.Lerp(<span class="keyword">this</span>.transform.position, nowPos, Time.deltaTime * moveSpeed);</span><br><span class="line">        <span class="comment">//辅助线</span></span><br><span class="line">        Debug.DrawLine(<span class="keyword">this</span>.transform.position, target.position + target.up * headOffset);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用Slerp看向对象</span></span><br><span class="line">        <span class="keyword">this</span>.transform.rotation = Quaternion.Slerp(<span class="keyword">this</span>.transform.rotation, Quaternion.LookRotation(-nowDir), Time.deltaTime * lookAtSpeed);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Mono-中的重要功能"><a href="#Mono-中的重要功能" class="headerlink" title="Mono 中的重要功能"></a>Mono 中的重要功能</h1><h1 id="任务-24：延迟函数-知识点"><a href="#任务-24：延迟函数-知识点" class="headerlink" title="任务 24：延迟函数 知识点"></a>任务 24：延迟函数 知识点</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/MonoBehaviour.html">UnityEngine.MonoBehaviour - Unity 脚本 API</a></p>
<p>为了更好的性能，请使用携程</p>
</blockquote>
<h2 id="知识点一-什么是延迟函数"><a href="#知识点一-什么是延迟函数" class="headerlink" title="知识点一 什么是延迟函数"></a>知识点一 什么是延迟函数</h2><p>延迟函数顾名思义，就是会延时执行的函数</p>
<p>我们可以自己设定延时要执行的函数和具体延时的时间</p>
<p>是 MonoBehaviour 基类中实现好的方法</p>
<h2 id="知识点二-延迟函数的使用"><a href="#知识点二-延迟函数的使用" class="headerlink" title="知识点二 延迟函数的使用"></a>知识点二 延迟函数的使用</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/MonoBehaviour.Invoke.html">MonoBehaviour-Invoke - Unity 脚本 API</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/MonoBehaviour.InvokeRepeating.html">MonoBehaviour-InvokeRepeating - Unity 脚本 API</a></p>
</blockquote>
<h3 id="1-延迟函数"><a href="#1-延迟函数" class="headerlink" title="1.延迟函数"></a>1.延迟函数</h3><p>使用<code>Invoke(funcNam, time)</code></p>
<p>传入一个函数名，函数将在 time 秒后执行。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Invoke(<span class="string">&quot;Func&quot;</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fun</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;Func call&quot;</span>);</span><br><span class="line">    Fun(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fun</span>(<span class="params"><span class="built_in">int</span> i</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    print(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>延时函数第一个参数传入的是函数名字符串</li>
<li>延时函数没办法传入参数，只有包裹一层<ol>
<li>就是在一个无参函数里面调用有参函数，然后 Invoke 调用这个无参函数。</li>
</ol>
</li>
<li>函数名必须是该脚本上声明的函数</li>
</ol>
<h3 id="2-延迟重复执行函数"><a href="#2-延迟重复执行函数" class="headerlink" title="2.延迟重复执行函数"></a>2.延迟重复执行函数</h3><p>在 <code>time</code> 秒后调用 <code>methodName</code> 方法，然后每 <code>repeatRate</code> 秒调用一次。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">InvokeRepeating(<span class="string">&quot;Func&quot;</span>, <span class="number">5</span>, <span class="number">2</span>);</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InvokeRepeating</span>(<span class="params"><span class="built_in">string</span> methodName, <span class="built_in">float</span> time, <span class="built_in">float</span> repeatRate</span>)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-取消延迟函数"><a href="#3-取消延迟函数" class="headerlink" title="3.取消延迟函数"></a>3.取消延迟函数</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/MonoBehaviour.CancelInvoke.html">MonoBehaviour-CancelInvoke - Unity 脚本 API</a></p>
</blockquote>
<p>不带参数，取消该脚本上的所有延时函数执行。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CancelInvoke();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CancelInvoke</span>()</span>;</span><br></pre></td></tr></table></figure>

<p>带参数，指定函数取消执行</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CancelInvoke(<span class="string">&quot;Fun&quot;</span>);</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CancelInvoke</span>(<span class="params"><span class="built_in">string</span> methodName</span>)</span></span><br></pre></td></tr></table></figure>

<h3 id="4-判断是否有延迟函数"><a href="#4-判断是否有延迟函数" class="headerlink" title="4.判断是否有延迟函数"></a>4.判断是否有延迟函数</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/MonoBehaviour.IsInvoking.html">MonoBehaviour-IsInvoking - Unity 脚本 API</a></p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (IsInvoking() &amp;&amp; IsInvoking(<span class="string">&quot;Fun&quot;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;no&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">IsInvoking</span>()</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">IsInvoking</span>(<span class="params"><span class="built_in">string</span> methodName</span>)</span>;</span><br></pre></td></tr></table></figure>

<h2 id="知识点三-延迟函数受对象失活销毁影响"><a href="#知识点三-延迟函数受对象失活销毁影响" class="headerlink" title="知识点三 延迟函数受对象失活销毁影响"></a>知识点三 延迟函数受对象失活销毁影响</h2><p>脚本依附对象失活或者脚本自己失活，延迟函数可以继续执行，不会受到影响。</p>
<p>脚本依附对象销毁或者脚本移除，延迟函数无法继续执行。</p>
<p>所以，通常在生命周期函数 OnEnable 当中开启延迟函数，在 OnDisable 当中关闭延迟函数。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//对象激活 的生命周期函数中 开启延迟（重复执行的延迟）</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDisable</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//对象失活 的生命周期函数中 停止延迟</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="练习题-9"><a href="#练习题-9" class="headerlink" title="练习题"></a>练习题</h2><h3 id="第一题-3"><a href="#第一题-3" class="headerlink" title="第一题"></a>第一题</h3><p>利用延时函数实现一个计秒器</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson13_P</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">float</span> time = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnEnable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        InvokeRepeating(<span class="string">&quot;TimeCounter&quot;</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDisable</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        time = <span class="number">0</span>;</span><br><span class="line">        CancelInvoke();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">TimeCounter</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">$&quot;Now is <span class="subst">&#123;time&#125;</span> seconds&quot;</span>);</span><br><span class="line">        ++time;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二题-3"><a href="#第二题-3" class="headerlink" title="第二题"></a>第二题</h3><p>请用两种方式延时销毁一个指定对象</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Destory(<span class="keyword">this</span>.gameObject, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Invoke(<span class="string">&quot;DestroyObj&quot;</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestroyObj</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    DestroyObj(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DestroyObj</span>(<span class="params"><span class="built_in">float</span> time</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    Destroy(<span class="keyword">this</span>.gameObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-26-27：协同程序-知识点"><a href="#任务-26-27：协同程序-知识点" class="headerlink" title="任务 26-27：协同程序 知识点"></a>任务 26-27：协同程序 知识点</h1><h2 id="知识点一-Unity-是否支持多线程？"><a href="#知识点一-Unity-是否支持多线程？" class="headerlink" title="知识点一 Unity 是否支持多线程？"></a>知识点一 Unity 是否支持多线程？</h2><p>首先要明确一点，Unity 是支持多线程的，只是新开线程无法访问 Unity 相关对象的内容。</p>
<p>下面的代码是可以在 Unity 运行的。</p>
<p>注意：</p>
<ol>
<li>Unity 中的多线程，要记住关闭。因为只要 Unity 编辑器没有关闭，线程就不会结束。</li>
<li>Unity 当中使用多线程有使用限制，大部分 Unity 内容不可在多线程当中访问</li>
<li>虽然不能使用 Unity 当中的大部分内容，但是可以使用多线程来进行复杂计算，将计算结果放到公共成员当中。</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Threading;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson14</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//公共成员，存放数据</span></span><br><span class="line">    <span class="keyword">private</span> Queue&lt;<span class="built_in">int</span>&gt; que = <span class="keyword">new</span> Queue&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line">    Thread t;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        t = <span class="keyword">new</span> Thread(Test);</span><br><span class="line">        t.Start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        print(que.Dequeue());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Test</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//线程当中不能使用Unity.Random</span></span><br><span class="line">            System.Random r = <span class="keyword">new</span> System.Random();</span><br><span class="line">            que.Enqueue(r.Next(<span class="number">-10</span>, <span class="number">10</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">OnDestroy</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//使用Abort方法关闭线程</span></span><br><span class="line">        t.Abort();</span><br><span class="line">        t = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-协同程序是什么？"><a href="#知识点二-协同程序是什么？" class="headerlink" title="知识点二 协同程序是什么？"></a>知识点二 协同程序是什么？</h2><p>协同程序简称协程，它是“假”的多线程，它&#x3D;&#x3D;不是&#x3D;&#x3D;多线程。</p>
<p>它的主要作用：将代码分时执行，不卡主线程。</p>
<p>简单理解，是把可能会让主线程卡顿的耗时的逻辑分时分步执行。</p>
<p>协程函数每一次返回，只是将协程挂起，等待下一次执行。</p>
<p>主要使用场景</p>
<ul>
<li>异步加载文件</li>
<li>异步下载文件</li>
<li>场景异步加载</li>
<li>批量创建时防止卡顿</li>
</ul>
<h2 id="知识点三-协同程序和线程的区别"><a href="#知识点三-协同程序和线程的区别" class="headerlink" title="知识点三 协同程序和线程的区别"></a>知识点三 协同程序和线程的区别</h2><p>新开一个线程是独立的一个管道，和主线程并行执行</p>
<p>新开一个协程是在原线程之上开启，进行逻辑分时分步执行</p>
<h2 id="知识点四-协程的使用"><a href="#知识点四-协程的使用" class="headerlink" title="知识点四 协程的使用"></a>知识点四 协程的使用</h2><blockquote>
<p>继承 MonoBehavior 的类都可以开启协程函数。</p>
</blockquote>
<h3 id="第一步：声明协程函数"><a href="#第一步：声明协程函数" class="headerlink" title="第一步：声明协程函数"></a>第一步：声明协程函数</h3><p>协程函数 2 个关键点</p>
<ol>
<li>返回值为 IEnumerator 类型及其子类</li>
<li>函数中通过<code>yield return 返回值;</code> 进行返回</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回值为IEnumerator</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">MyCoroutine</span>(<span class="params"><span class="built_in">int</span> i, <span class="built_in">string</span> str</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    print(i);</span><br><span class="line">    <span class="comment">//返回一个等待5秒的类</span></span><br><span class="line">    <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">5f</span></span>)</span>;	<span class="comment">//一个yield return就是一个分段</span></span><br><span class="line">    print(str);</span><br><span class="line">    <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">2f</span></span>)</span>;</span><br><span class="line">    print(<span class="number">233</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二步：开启协程函数"><a href="#第二步：开启协程函数" class="headerlink" title="第二步：开启协程函数"></a>第二步：开启协程函数</h3><p>协程函数是不能够直接这样去执行的！！！！！！！</p>
<p>这样执行没有任何效果</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyCoroutine(<span class="number">1</span>, <span class="string">&quot;123&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>常用开启方式</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Coroutine <span class="title">StartCoroutine</span>(<span class="params">IEnumerator routine</span>)</span>;</span><br><span class="line"><span class="comment">//第一种</span></span><br><span class="line">IEnumerator ie = MyCoroutine(<span class="number">2</span>, <span class="string">&quot;22&quot;</span>);</span><br><span class="line">StartCoroutine(ie);</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种一步到位</span></span><br><span class="line">StartCoroutine(MyCoroutine(<span class="number">10</span>, <span class="string">&quot;Panzi&quot;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="第三步：关闭协程"><a href="#第三步：关闭协程" class="headerlink" title="第三步：关闭协程"></a>第三步：关闭协程</h3><p><code>StartCoroutine</code>返回一个<code>Coroutine</code>，就是协程对象。</p>
<p>使用<code>StopCoroutine</code>指定协程对象进行关闭。</p>
<p>使用<code>StopAllCoroutine</code>关闭所有协程。</p>
<blockquote>
<p>不建议使用指定函数名进行关闭协程。</p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">IEnumerator ie = MyCoroutine(<span class="number">2</span>, <span class="string">&quot;22&quot;</span>);</span><br><span class="line"><span class="comment">//协程对象</span></span><br><span class="line">Coroutine c1 = StartCoroutine(ie);</span><br><span class="line"></span><br><span class="line">Coroutine c2 = StartCoroutine(MyCoroutine(<span class="number">10</span>, <span class="string">&quot;Panzi&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭所有协程</span></span><br><span class="line">StopAllCoroutines();</span><br><span class="line"><span class="comment">//关闭指定协程</span></span><br><span class="line">StopCoroutine(c1);</span><br><span class="line">StopCoroutine(c2);</span><br></pre></td></tr></table></figure>

<h2 id="知识点五-yield-return-不同内容的含义"><a href="#知识点五-yield-return-不同内容的含义" class="headerlink" title="知识点五 yield return 不同内容的含义"></a>知识点五 yield return 不同内容的含义</h2><h3 id="1-下一帧执行"><a href="#1-下一帧执行" class="headerlink" title="1.下一帧执行"></a>1.下一帧执行</h3><p>注意：&#x3D;&#x3D;yield return 数字会产生装箱拆箱&#x3D;&#x3D;。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span> <span class="keyword">return</span> 数字;</span><br><span class="line"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-等待指定秒后执行"><a href="#2-等待指定秒后执行" class="headerlink" title="2.等待指定秒后执行"></a>2.等待指定秒后执行</h3><p>在 Update 和 LateUpdate 之间执行</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params">秒</span>)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="3-等待下一个固定物理帧更新时执行"><a href="#3-等待下一个固定物理帧更新时执行" class="headerlink" title="3.等待下一个固定物理帧更新时执行"></a>3.等待下一个固定物理帧更新时执行</h3><p>在 FixedUpdate 和碰撞检测相关函数之后执行</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForFixedUpdate</span>()</span>;</span><br></pre></td></tr></table></figure>

<h3 id="4-等待摄像机和-GUI-渲染完成后执行"><a href="#4-等待摄像机和-GUI-渲染完成后执行" class="headerlink" title="4.等待摄像机和 GUI 渲染完成后执行"></a>4.等待摄像机和 GUI 渲染完成后执行</h3><p>在 LateUpdate 之后的渲染相关处理完毕后之后，主要会用来截图时会使用</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForEndOfFrame</span>()</span>;</span><br></pre></td></tr></table></figure>

<h3 id="5-一些特殊类型的对象-比如异步加载相关函数返回的对象"><a href="#5-一些特殊类型的对象-比如异步加载相关函数返回的对象" class="headerlink" title="5.一些特殊类型的对象 比如异步加载相关函数返回的对象"></a>5.一些特殊类型的对象 比如异步加载相关函数返回的对象</h3><p>之后讲解 异步加载资源 异步加载场景 网络加载（WWW）时再讲解</p>
<p>一般在 Update 和 LateUpdate 之间执行</p>
<h3 id="6-跳出协程"><a href="#6-跳出协程" class="headerlink" title="6.跳出协程"></a>6.跳出协程</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span> <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>

<h2 id="知识点六-协程受对象和组件失活销毁的影响"><a href="#知识点六-协程受对象和组件失活销毁的影响" class="headerlink" title="知识点六 协程受对象和组件失活销毁的影响"></a>知识点六 协程受对象和组件失活销毁的影响</h2><p>协程开启后，组件和物体销毁，协程不执行</p>
<p>物体失活协程不执行，组件失活协程仍然执行</p>
<h2 id="总结-8"><a href="#总结-8" class="headerlink" title="总结"></a>总结</h2><ol>
<li><p>Unity 支持多线程，只是新开线程无法访问主线程中 Unity 相关内容</p>
<p>一般主要用于进行复杂逻辑运算或者网络消息接收等等</p>
<p>注意：Unity 中的多线程一定记住关闭</p>
</li>
<li><p>协同程序不是多线程，它是将线程中逻辑进行分时执行，避免卡顿</p>
</li>
<li><p>继承 MonoBehavior 的类都可以使用协程</p>
</li>
<li><p>开启协程方法、关闭协程方法</p>
</li>
<li><p>yield return 返回的内容对于我们的意义</p>
</li>
<li><p>协程只有当组件单独失活时不受影响，其它情况协程会停止</p>
</li>
</ol>
<h2 id="练习题-10"><a href="#练习题-10" class="headerlink" title="练习题"></a>练习题</h2><h3 id="第一题-4"><a href="#第一题-4" class="headerlink" title="第一题"></a>第一题</h3><p>利用协程制作一个计秒器</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">YieldTimeCounter</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">float</span> time = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Coroutine timeCounter = StartCoroutine(TimeCounter());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">IEnumerator <span class="title">TimeCounter</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print(<span class="string">$&quot;Now is <span class="subst">&#123;time&#125;</span> seconds&quot;</span>);</span><br><span class="line">            ++time;</span><br><span class="line">            <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">1f</span></span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二题-4"><a href="#第二题-4" class="headerlink" title="第二题"></a>第二题</h3><p>请在场景中创建 100000 个随机位置的立方体，让其不会明显卡顿</p>
<p>本渣渣只能想到隔几秒创建 100 个，或者几帧创建 100 个，直到创建完 100000 个。</p>
<p>创建完成后的掉帧不可避免</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CubeCreator</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Coroutine cubeCreate = StartCoroutine(CreateCube());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">IEnumerator <span class="title">CreateCube</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i += <span class="number">100</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; <span class="number">100</span>; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                GameObject cube = GameObject.CreatePrimitive(PrimitiveType.Cube);</span><br><span class="line">                cube.transform.position = <span class="keyword">new</span> Vector3(Random.Range(<span class="number">-100</span>, <span class="number">100</span>), Random.Range(<span class="number">-100</span>, <span class="number">100</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">0.5f</span></span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-29：协同程序原理-知识点"><a href="#任务-29：协同程序原理-知识点" class="headerlink" title="任务 29：协同程序原理 知识点"></a>任务 29：协同程序原理 知识点</h1><h2 id="知识点一-协程的本质"><a href="#知识点一-协程的本质" class="headerlink" title="知识点一 协程的本质"></a>知识点一 协程的本质</h2><p>协程可以分成两部分：</p>
<ol>
<li>协程函数本体</li>
<li>协程调度器</li>
</ol>
<p>协程本体就是一个能够中间暂停返回的函数</p>
<p>协程调度器是 Unity 内部实现的，会在对应的时机帮助我们继续执行协程函数。</p>
<p>Unity 只实现了协程调度部分，协程的本体本质上就是一个 C#的迭代器方法。</p>
<h2 id="知识点二-协程本体是迭代器方法的体现"><a href="#知识点二-协程本体是迭代器方法的体现" class="headerlink" title="知识点二 协程本体是迭代器方法的体现"></a>知识点二 协程本体是迭代器方法的体现</h2><h3 id="1-协程函数本体"><a href="#1-协程函数本体" class="headerlink" title="1.协程函数本体"></a>1.协程函数本体</h3><p>如果我们不通过开启协程方法执行协程，Unity 的协程调度器是不会帮助我们管理协程函数的。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">Test</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;call 1&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    print(<span class="string">&quot;call 2&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    print(<span class="string">&quot;call 3&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    print(<span class="string">&quot;call 4&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">TestClass</span>(<span class="params"><span class="number">10</span></span>)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是，由于其是一个迭代器函数。</p>
<p>我们可以通过迭代器的 MoveNext 函数执行分段的函数，<code>MoveNext</code>的返回值就是是否还有下一个分段函数需要执行；</p>
<p>通过迭代器的<code>Current</code>属性，可以获取到每一次<code>yield return</code>返回的对象。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">IEnumerator ie = Test();</span><br><span class="line"><span class="keyword">while</span> (ie.MoveNext())</span><br><span class="line">&#123;</span><br><span class="line">    print(ie.Current);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//output</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">call <span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">call <span class="number">3</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">call <span class="number">4</span></span><br><span class="line">TestClass</span><br></pre></td></tr></table></figure>

<h3 id="2-协程调度器"><a href="#2-协程调度器" class="headerlink" title="2.协程调度器"></a>2.协程调度器</h3><p>继承 MonoBehavior 后开启协程，相当于是把一个协程函数（迭代器）放入 Unity 的协程调度器中帮助我们管理进行执行，具体的 yield return 后面的规则 也是 Unity 定义的一些规则。</p>
<h3 id="总结-9"><a href="#总结-9" class="headerlink" title="总结"></a>总结</h3><p>你可以简化理解迭代器函数，C#看到迭代器函数和 yield return 语法糖，就会把原本是一个的 函数 变成”几部分”。</p>
<p>我们可以通过迭代器，从上到下遍历这 “几部分”进行执行，就达到了将一个函数中的逻辑分时执行的目的。</p>
<p>而协程调度器就是利用迭代器函数返回的内容来进行之后的处理。</p>
<p>比如 Unity 中的协程调度器，根据 yield return 返回的内容决定了下一次在何时继续执行迭代器函数中的”下一部分”。</p>
<p>理论上来说 我们可以利用迭代器函数的特点自己实现协程调度器来取代 Unity 自带的调度器。</p>
<h2 id="总结-10"><a href="#总结-10" class="headerlink" title="总结"></a>总结</h2><p>协程的本质就是利用 C#的迭代器函数”分步执行”的特点；</p>
<p>加上，协程调度逻辑，实现的一套分时执行函数的规则。</p>
<h2 id="练习题-11"><a href="#练习题-11" class="headerlink" title="练习题"></a>练习题</h2><p>请不使用 Unity 自带的协程协调器开启协程</p>
<p>通过迭代器函数实现每隔一秒执行函数中的一部分逻辑</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Threading;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> System.Reflection;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.PlayerLoop;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">YieldReturnTime</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> IEnumerator ie;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">float</span> time;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CoroutineMgr</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> CoroutineMgr _instance = <span class="keyword">new</span> CoroutineMgr();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> CoroutineMgr Instance =&gt; _instance;</span><br><span class="line"></span><br><span class="line">    List&lt;YieldReturnTime&gt; timeList = <span class="keyword">new</span> List&lt;YieldReturnTime&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        _instance = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MyStartCoroutine</span>(<span class="params">IEnumerator ie</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (ie.MoveNext())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ie.Current <span class="keyword">is</span> <span class="built_in">int</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                YieldReturnTime yrt = <span class="keyword">new</span> YieldReturnTime();</span><br><span class="line">                yrt.time = Time.time + (<span class="built_in">int</span>)ie.Current;</span><br><span class="line">                yrt.ie = ie;</span><br><span class="line">                timeList.Add(yrt);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = timeList.Count - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (timeList[i].time &lt;= Time.time)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (timeList[i].ie.MoveNext())</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (timeList[i].ie.Current <span class="keyword">is</span> <span class="built_in">int</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        timeList[i].time = Time.time + (<span class="built_in">int</span>)timeList[i].ie.Current;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    timeList.RemoveAt(i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Resources-资源动态加载"><a href="#Resources-资源动态加载" class="headerlink" title="Resources 资源动态加载"></a>Resources 资源动态加载</h1><h1 id="任务-31：特殊文件夹-知识点"><a href="#任务-31：特殊文件夹-知识点" class="headerlink" title="任务 31：特殊文件夹 知识点"></a>任务 31：特殊文件夹 知识点</h1><h2 id="知识点一-工程路径获"><a href="#知识点一-工程路径获" class="headerlink" title="知识点一 工程路径获"></a>知识点一 工程路径获</h2><p>注意：</p>
<p>该方式获取到的路径，一般情况下只在编辑模式下使用。我们不会在实际发布游戏后，还使用该路径；可以认为，游戏发布过后，该路径就不存在了 。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.dataPath);</span><br></pre></td></tr></table></figure>

<h2 id="知识点二-Resources-资源文件夹"><a href="#知识点二-Resources-资源文件夹" class="headerlink" title="知识点二 Resources 资源文件夹"></a>知识点二 Resources 资源文件夹</h2><p>路径获取：一般不获取，而是直接使用 Resources 相关 API 进行加载</p>
<p>如果硬要获取，可以用工程路径拼接</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.dataPath + <span class="string">&quot;/Resources&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>注意：需要我们自己将创建</p>
<p>作用：资源文件夹</p>
<ol>
<li>需要通过 Resources 相关 API 动态加载的资源需要放在其中</li>
<li>该文件夹下所有文件都会被打包出去</li>
<li>打包时 Unity 会对其压缩加密</li>
<li>该文件夹打包后只读 只能通过 Resources 相关 API 加载</li>
</ol>
<h2 id="知识点三-StreamingAssets-流动资源文件夹"><a href="#知识点三-StreamingAssets-流动资源文件夹" class="headerlink" title="知识点三 StreamingAssets 流动资源文件夹"></a>知识点三 StreamingAssets 流动资源文件夹</h2><p>路径获取：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.streamingAssetsPath);</span><br></pre></td></tr></table></figure>

<p>注意：需要我们自己创建</p>
<p>作用：流文件夹</p>
<ol>
<li>打包出去不会被压缩加密，可以任由我们摆布</li>
<li>移动平台只读，PC 平台可读可写</li>
<li>可以放入一些需要自定义动态加载的初始资源</li>
</ol>
<h2 id="知识点四-persistentDataPath-持久数据文件夹"><a href="#知识点四-persistentDataPath-持久数据文件夹" class="headerlink" title="知识点四 persistentDataPath 持久数据文件夹"></a>知识点四 persistentDataPath 持久数据文件夹</h2><p>路径获取：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.persistentDataPath);</span><br></pre></td></tr></table></figure>

<p>注意：不需要我们自己将创建</p>
<p>作用：固定数据文件夹</p>
<ol>
<li>所有平台都可读可写</li>
<li>一般用于放置动态下载或者动态创建的文件，游戏中创建或者获取的文件都放在其中</li>
</ol>
<h2 id="知识点五-Plugins-插件文件夹"><a href="#知识点五-Plugins-插件文件夹" class="headerlink" title="知识点五 Plugins 插件文件夹"></a>知识点五 Plugins 插件文件夹</h2><p>路径获取：一般不获取</p>
<p>注意：需要我们自己将创建</p>
<p>作用：插件文件夹，不同平台的插件相关文件放在其中，比如 IOS 和 Android 平台。</p>
<h2 id="知识点六-Editor-编辑器文件夹"><a href="#知识点六-Editor-编辑器文件夹" class="headerlink" title="知识点六 Editor 编辑器文件夹"></a>知识点六 Editor 编辑器文件夹</h2><p>路径获取：一般不获取，如果硬要获取 可以用工程路径拼接。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.dataPath + <span class="string">&quot;/Editor&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>注意：需要我们自己将创建<br>作用：编辑器文件夹</p>
<ol>
<li>开发 Unity 编辑器时，编辑器相关脚本放在该文件夹中</li>
<li>该文件夹中内容不会被打包出去</li>
</ol>
<h2 id="知识点七-默认资源文件夹-Standard-Assets"><a href="#知识点七-默认资源文件夹-Standard-Assets" class="headerlink" title="知识点七 默认资源文件夹 Standard Assets"></a>知识点七 默认资源文件夹 Standard Assets</h2><p>路径获取：一般不获取</p>
<p>注意：需要我们自己将创建</p>
<p>作用：默认资源文件夹</p>
<p>一般 Unity 自带资源都放在这个文件夹下，代码和资源优先被编译</p>
<h1 id="任务-32：Resources-资源同步加载-知识点"><a href="#任务-32：Resources-资源同步加载-知识点" class="headerlink" title="任务 32：Resources 资源同步加载 知识点"></a>任务 32：Resources 资源同步加载 知识点</h1><h2 id="知识点一-Resources-资源动态加载的作用"><a href="#知识点一-Resources-资源动态加载的作用" class="headerlink" title="知识点一 Resources 资源动态加载的作用"></a>知识点一 Resources 资源动态加载的作用</h2><ol>
<li>通过代码动态加载 Resources 文件夹下指定路径资源</li>
<li>避免繁琐的拖曳操作</li>
</ol>
<h2 id="知识点二-常用资源类型"><a href="#知识点二-常用资源类型" class="headerlink" title="知识点二 常用资源类型"></a>知识点二 常用资源类型</h2><ol>
<li><p>预设体对象——GameObject</p>
</li>
<li><p>音效文件——AudioClip</p>
</li>
<li><p>文本文件——TextAsset</p>
</li>
<li><p>图片文件——Texture</p>
</li>
<li><p>其它类型——需要什么用什么类型</p>
</li>
</ol>
<p>注意：预设体对象加载需要实例化，其它资源加载一般直接用。</p>
<h2 id="知识点三-资源同步加载-普通方法"><a href="#知识点三-资源同步加载-普通方法" class="headerlink" title="知识点三 资源同步加载 普通方法"></a>知识点三 资源同步加载 普通方法</h2><p>在一个工程当中 Resources 文件夹，可以在多个目录下有多个，通过 API 加载时，它会自己去这些同名的 Resources 文件夹中去找资源，打包时 Resources 文件夹里的内容都会打包在一起。</p>
<h3 id="1-预设体对象"><a href="#1-预设体对象" class="headerlink" title="1.预设体对象"></a>1.预设体对象</h3><p>想要创建在场景上，记住实例化</p>
<p>第一步：要去加载预设体的资源文件(本质上，就是加载配置数据在内存中)。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object obj = Resources.Load(<span class="string">&quot;Cube&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>第二步：如果想要在场景上创建预设体，一定是加载配置文件过后，然后实例化。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Instantiate(obj);</span><br></pre></td></tr></table></figure>

<h3 id="2-音效资源"><a href="#2-音效资源" class="headerlink" title="2.音效资源"></a>2.音效资源</h3><p>第一步：就是加载数据；</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object obj3 = Resources.Load(<span class="string">&quot;Music/BKMusic&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>第二步：使用数据，我们不需要实例化；音效切片，我们只需要把数据，赋值到正确的脚本上即可。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">audioS.clip = obj3 <span class="keyword">as</span> AudioClip;</span><br><span class="line">audioS.Play();</span><br></pre></td></tr></table></figure>

<h3 id="3-文本资源"><a href="#3-文本资源" class="headerlink" title="3.文本资源"></a>3.文本资源</h3><p>文本资源支持的格式</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.txt	<span class="comment">//文本文件</span></span><br><span class="line">.xml	<span class="comment">//xml配置文件</span></span><br><span class="line">.bytes	<span class="comment">//二进制文件</span></span><br><span class="line">.json	<span class="comment">//json配置文件</span></span><br><span class="line">.html	<span class="comment">//网页文件</span></span><br><span class="line">.csv.....</span><br></pre></td></tr></table></figure>

<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TextAsset ta = Resources.Load(<span class="string">&quot;Txt/Test&quot;</span>) <span class="keyword">as</span> TextAsset;</span><br></pre></td></tr></table></figure>

<p>文本内容</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(ta.text);</span><br></pre></td></tr></table></figure>

<p>字节数据组</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(ta.bytes);</span><br></pre></td></tr></table></figure>

<h3 id="4-图片"><a href="#4-图片" class="headerlink" title="4.图片"></a>4.图片</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tex = Resources.Load(<span class="string">&quot;Tex/TestJPG&quot;</span>) <span class="keyword">as</span> Texture;</span><br></pre></td></tr></table></figure>

<h3 id="5-其它类型，需要什么类型，就用什么类型就行"><a href="#5-其它类型，需要什么类型，就用什么类型就行" class="headerlink" title="5.其它类型，需要什么类型，就用什么类型就行"></a>5.其它类型，需要什么类型，就用什么类型就行</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Resources.Load(<span class="string">&quot;fileName&quot;</span>) <span class="keyword">as</span> xxx;</span><br></pre></td></tr></table></figure>

<h3 id="6-问题：资源同名怎么办"><a href="#6-问题：资源同名怎么办" class="headerlink" title="6.问题：资源同名怎么办"></a>6.问题：资源同名怎么办</h3><p><code>Resources.Load</code>加载同名资源时，无法准确加载出你想要的内容。</p>
<p>可以使用另外的 API</p>
<h4 id="6-1-加载指定类型的资源"><a href="#6-1-加载指定类型的资源" class="headerlink" title="6-1 加载指定类型的资源"></a>6-1 加载指定类型的资源</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tex = Resources.Load(<span class="string">&quot;Tex/TestJPG&quot;</span>, <span class="keyword">typeof</span>(Texture)) <span class="keyword">as</span> Texture;</span><br><span class="line">ta = Resources.Load(<span class="string">&quot;Tex/TestJPG&quot;</span>, <span class="keyword">typeof</span>(TextAsset)) <span class="keyword">as</span> TextAsset;</span><br><span class="line">print(ta.text);</span><br></pre></td></tr></table></figure>

<h4 id="6-2-加载指定名字的所有资源"><a href="#6-2-加载指定名字的所有资源" class="headerlink" title="6 - 2 加载指定名字的所有资源"></a>6 - 2 加载指定名字的所有资源</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Object[] objs = Resources.LoadAll(<span class="string">&quot;Tex/TestJPG&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (Object item <span class="keyword">in</span> objs)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (item <span class="keyword">is</span> Texture)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (item <span class="keyword">is</span> TextAsset)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="知识点四-资源同步加载-泛型方法"><a href="#知识点四-资源同步加载-泛型方法" class="headerlink" title="知识点四 资源同步加载 泛型方法"></a>知识点四 资源同步加载 泛型方法</h2><p>使用泛型指定类型，省略了 as 步骤，一般应该都是使用泛型方法。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TextAsset ta2 = Resources.Load&lt;TextAsset&gt;(<span class="string">&quot;Tex/TestJPG&quot;</span>);</span><br><span class="line">print(ta2.text);</span><br><span class="line"></span><br><span class="line">tex = Resources.Load&lt;Texture&gt;(<span class="string">&quot;Tex/TestJPG&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="总结-11"><a href="#总结-11" class="headerlink" title="总结"></a>总结</h2><p>Resources 动态加载资源的方法，让拓展性更强，相对拖曳来说，它更加一劳永逸 ，更加方便。</p>
<p>重要知识点：</p>
<ul>
<li>记住 API：<code>Resources.Load</code></li>
<li>记住一些特定的格式<ul>
<li>TextAssets：文本文件</li>
<li>AudioClip：音频切片</li>
<li>Texture：材质（图片）</li>
<li>Gameobject：预设体</li>
</ul>
</li>
<li>预设体加载出来一定要实例化</li>
</ul>
<h2 id="练习题-12"><a href="#练习题-12" class="headerlink" title="练习题"></a>练习题</h2><p>请把之前四元数练习题中，发射散弹等相关逻辑改为动态加载资源并创建。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    bulletPrefab = Resources.Load&lt;GameObject&gt;(<span class="string">&quot;Prefab/Bullet&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="关于重复加载同一个资源"><a href="#关于重复加载同一个资源" class="headerlink" title="关于重复加载同一个资源"></a>关于重复加载同一个资源</h3><p>多次加载同一个资源，Unity 会将这个资源保存到缓存池当中，不会多耗费内存。</p>
<p>但是，加载同一个资源，Unity 会去缓存池当中查找这个资源，会多耗费性能。</p>
<h1 id="任务-34：Resources-资源异步加载-知识点"><a href="#任务-34：Resources-资源异步加载-知识点" class="headerlink" title="任务 34：Resources 资源异步加载 知识点"></a>任务 34：Resources 资源异步加载 知识点</h1><h2 id="知识点一-Resources-异步加载是什么？"><a href="#知识点一-Resources-异步加载是什么？" class="headerlink" title="知识点一 Resources 异步加载是什么？"></a>知识点一 Resources 异步加载是什么？</h2><p>上节课学习的同步加载中，如果我们加载过大的资源可能会造成程序卡顿；</p>
<p>卡顿的原因就是，从硬盘上把数据读取到内存中，是需要进行计算的。</p>
<p>越大的资源耗时越长，就会造成掉帧卡顿；</p>
<p>Resources 异步加载，就是内部新开一个线程进行资源加载，不会造成主线程卡顿。</p>
<blockquote>
<p>注意：异步加载不是立刻就能获取到资源的，同步加载是可以立刻加载立刻使用的。</p>
</blockquote>
<h2 id="知识点二-Resources-异步加载方法"><a href="#知识点二-Resources-异步加载方法" class="headerlink" title="知识点二 Resources 异步加载方法"></a>知识点二 Resources 异步加载方法</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Resources.html">UnityEngine.Resources - Unity 脚本 API</a></p>
</blockquote>
<p>注意：异步加载，不能马上得到加载的资源，至少要等一帧。</p>
<p>YieldInstruction 是 AsyncOperation 的父类，AsyncOperation 是 ResourceRequest 的父类。</p>
<p>继承链：ResourceRequest -&gt; AsyncOperation -&gt; YieldInstruction</p>
<h3 id="1-通过异步加载中的完成事件监听，使用加载的资源"><a href="#1-通过异步加载中的完成事件监听，使用加载的资源" class="headerlink" title="1.通过异步加载中的完成事件监听，使用加载的资源"></a>1.通过异步加载中的完成事件监听，使用加载的资源</h3><p>这句代码，可以理解为，Unity 在内部就会去开一个线程进行资源加载。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ResourceRequest rq = Resources.LoadAsync&lt;Texture&gt;(<span class="string">&quot;Tex/TestJPG&quot;</span>);</span><br><span class="line"><span class="comment">//这个，刚刚执行了异步加载的执行代码，资源还没有加载完毕，这样用是不对的。</span></span><br><span class="line"><span class="comment">//一定要等加载结束过后，才能使用。</span></span><br><span class="line"><span class="comment">//rq.asset ××××××××××××</span></span><br></pre></td></tr></table></figure>

<p><code>ResourceRequest</code>当中有一个事件<code>completed</code>，在资源加载完成之后，会立刻执行此事件。</p>
<p>我们可以向这个事件当中添加函数，用来执行其他代码。</p>
<p>注意：事件的委托模板需要带一个<code>AsyncOperation</code>类型的参数，是加载完成后的资源。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rq.completed += LoadOver;</span><br><span class="line">print(Time.frameCount);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LoadOver</span>(<span class="params"> AsyncOperation rq</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;加载结束&quot;</span>);</span><br><span class="line">    <span class="comment">//asset 是资源对象 加载完毕过后 就能够得到它</span></span><br><span class="line">    tex = (rq <span class="keyword">as</span> ResourceRequest).asset <span class="keyword">as</span> Texture;</span><br><span class="line">    print(Time.frameCount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-通过协程-使用加载的资源"><a href="#2-通过协程-使用加载的资源" class="headerlink" title="2.通过协程 使用加载的资源"></a>2.通过协程 使用加载的资源</h3><p>通过协程，我们可以在加载资源的时候做一些其他事情，比如资源进度条的显示等等。</p>
<p>如果我们直接返回<code>ResourceRequest</code>，由于其是一个<code>YieldInstruction</code>的子类，所以，Unity 会进行特殊处理，只有当资源加载完成之后，才会继续执行协程后方的代码。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">StartCoroutine(Load());</span><br><span class="line"></span><br><span class="line"><span class="function">IEnumerator <span class="title">LoadOver</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    ResourceRequest rq = Resources.LoadAsync&lt;TextAsset&gt;(<span class="string">&quot;TextAsset/words&quot;</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> rq;</span><br><span class="line">    ta = rq.asset <span class="keyword">as</span> TextAsset;</span><br><span class="line">    print(ta.text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果不返回获取<code>ResourceRequest</code>；</p>
<p>那么我们可以通过<code>ResourceRequest.isDonw</code>判断资源是否加载完成；</p>
<p>通过<code>ResourceRequest.progress</code>获取资源加载进度，这个进度不是特别准确。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/AsyncOperation.html">UnityEngine.AsyncOperation - Unity 脚本 API</a></p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">LoadOver</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    ResourceRequest rq = Resources.LoadAsync&lt;TextAsset&gt;(<span class="string">&quot;TextAsset/words&quot;</span>);</span><br><span class="line">    <span class="comment">//yield return rq;</span></span><br><span class="line">    <span class="keyword">while</span> (!rq.isDone)</span><br><span class="line">    &#123;</span><br><span class="line">        print(rq.progress);</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ta = rq.asset <span class="keyword">as</span> TextAsset;</span><br><span class="line">    print(ta.text);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结-12"><a href="#总结-12" class="headerlink" title="总结"></a>总结</h2><h3 id="1-完成事件监听异步加载"><a href="#1-完成事件监听异步加载" class="headerlink" title="1.完成事件监听异步加载"></a>1.完成事件监听异步加载</h3><p>好处：写法简单</p>
<p>坏处：只能在资源加载结束后，进行处理</p>
<p>类似“线性加载”</p>
<h3 id="2-协程异步加载"><a href="#2-协程异步加载" class="headerlink" title="2.协程异步加载"></a>2.协程异步加载</h3><p>好处：可以在协程中处理复杂逻辑，比如同时加载多个资源，比如进度条更新</p>
<p>坏处：写法稍麻烦</p>
<p>类似“并行加载”</p>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><p>理解为什么异步加载不能马上加载结束，为什么至少要等 1 帧</p>
<ul>
<li>因为异步加载是类似于开了一个新线程，线程同步需要时间。</li>
</ul>
<p>理解协程异步加载的原理</p>
<ul>
<li>异步加载<code>LoadAsync</code>返回值是<code>YieldInstruction</code>的一个子类；</li>
<li>协程异步加载是通过 yield return 返回值，使得 Unity 知道这个协程是在加载资源，就会等待资源的加载。</li>
<li>资源加载过后，才会执行之后的代码。</li>
</ul>
<h2 id="练习题-13"><a href="#练习题-13" class="headerlink" title="练习题"></a>练习题</h2><p>请写一个简单的资源管理器，提供统一的方法给外部用于资源异步加载。外部可以传入委托用于当资源加载结束时使用资源。</p>
<blockquote>
<p>使用两种方式实现，并添加了已加载的资源部重复加载。</p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices.WindowsRuntime;</span><br><span class="line"><span class="keyword">using</span> System.Xml.Schema;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.Events;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ResourceLoadMgr</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ResourceLoadMgr _instance = <span class="keyword">new</span> ResourceLoadMgr();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ResourceLoadMgr Instance =&gt; _instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用一个哈希表，记录是否已经加载过了</span></span><br><span class="line">    <span class="keyword">public</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt; loadDic = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AsyncLoadUseCompleted</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="built_in">string</span> path, UnityAction&lt;T&gt; action</span>) <span class="keyword">where</span> T : <span class="keyword">class</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (loadDic.ContainsKey(path))</span><br><span class="line">        &#123;</span><br><span class="line">            action(loadDic[path] <span class="keyword">as</span> T);</span><br><span class="line">            <span class="comment">//Debug.Log(&quot;Already load&quot;);</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ResourceRequest rq = Resources.LoadAsync(path);</span><br><span class="line">        rq.completed += (<span class="keyword">value</span>) =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            T t = (<span class="keyword">value</span> <span class="keyword">as</span> ResourceRequest).asset <span class="keyword">as</span> T;</span><br><span class="line">            action(t);</span><br><span class="line">            <span class="keyword">if</span> (!loadDic.ContainsKey(path))</span><br><span class="line">            &#123;</span><br><span class="line">                loadDic.Add(path, t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AsyncLoadUseIEnumerator</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="built_in">string</span> path, UnityAction&lt;T&gt; action</span>) <span class="keyword">where</span> T : <span class="keyword">class</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (loadDic.ContainsKey(path))</span><br><span class="line">        &#123;</span><br><span class="line">            action(loadDic[path] <span class="keyword">as</span> T);</span><br><span class="line">            Debug.Log(<span class="string">&quot;Already load&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Load(path, action);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">IEnumerator <span class="title">Load</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="built_in">string</span> path, UnityAction&lt;T&gt; action</span>) <span class="keyword">where</span> T : <span class="keyword">class</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        ResourceRequest rq = Resources.LoadAsync(path);</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> rq;</span><br><span class="line">        action((rq.asset) <span class="keyword">as</span> T);</span><br><span class="line">        <span class="keyword">if</span> (!loadDic.ContainsKey(path))</span><br><span class="line">        &#123;</span><br><span class="line">            loadDic.Add(path, (rq.asset) <span class="keyword">as</span> T);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-36：Resources-资源卸载-知识点"><a href="#任务-36：Resources-资源卸载-知识点" class="headerlink" title="任务 36：Resources 资源卸载 知识点"></a>任务 36：Resources 资源卸载 知识点</h1><h2 id="知识点一-Resources-重复加载资源会浪费内存吗？"><a href="#知识点一-Resources-重复加载资源会浪费内存吗？" class="headerlink" title="知识点一 Resources 重复加载资源会浪费内存吗？"></a>知识点一 Resources 重复加载资源会浪费内存吗？</h2><p>其实 Resources 加载一次资源过后，该资源就一直存放在内存中作为缓存。</p>
<p>第二次加载时发现缓存中存在该资源，会直接取出来进行使用。</p>
<p>所以，多次重复加载不会浪费内存。</p>
<p>但是会浪费性能（每次加载都会去查找取出，始终伴随一些性能消耗）。</p>
<h2 id="知识点二-如何手动释放掉缓存中的资源"><a href="#知识点二-如何手动释放掉缓存中的资源" class="headerlink" title="知识点二 如何手动释放掉缓存中的资源"></a>知识点二 如何手动释放掉缓存中的资源</h2><h3 id="1-卸载指定资源"><a href="#1-卸载指定资源" class="headerlink" title="1.卸载指定资源"></a>1.卸载指定资源</h3><p><code>Resources.UnloadAsset</code> 方法</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Resources.UnloadAsset(asset);</span><br><span class="line"></span><br><span class="line">TextAsset tex = Resources.Load&lt;TextAsset&gt;(<span class="string">&quot;TextAsset/words&quot;</span>);</span><br><span class="line">print(tex.text);</span><br><span class="line">Resources.UnloadAsset(tex);</span><br><span class="line">tex = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (tex == <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;unload&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：该方法，不能释放 GameObject 对象，因为 GameObject 是用于实例化对象的。</p>
<p>它只能用于一些 不需要实例化的内容 比如 图片 和 音效 文本等等</p>
<p>一般情况下 我们很少单独使用它。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GameObject obj = Resources.Load&lt;GameObject&gt;(<span class="string">&quot;Cube&quot;</span>);</span><br><span class="line">Resources.UnloadAsset(obj);	<span class="comment">//报错</span></span><br></pre></td></tr></table></figure>

<p>即使是没有实例化的，GameObject 对象也不能进行卸载。</p>
<h3 id="2-卸载未使用的资源"><a href="#2-卸载未使用的资源" class="headerlink" title="2.卸载未使用的资源"></a>2.卸载未使用的资源</h3><p>注意：一般在过场景时和 GC 一起使用</p>
<p>使用<code>Resources.UnloadUnusedAssets();</code></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Resources.UnloadUnusedAssets();</span><br><span class="line">GC.Collect();</span><br></pre></td></tr></table></figure>

<h2 id="Unity-性能监听面板"><a href="#Unity-性能监听面板" class="headerlink" title="Unity 性能监听面板"></a>Unity 性能监听面板</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/Manual/profiler-module-editor.html">Profiler Module Editor（性能分析器模块编辑器） - Unity 手册</a></p>
</blockquote>
<p>可以使用<code>ctrl + 7</code>或者<code>windows-&gt;panels-&gt;7 profiler</code>打开 Unity 性能监听面板，查看游戏运行时的各种情况。</p>
<p>在 memory 即内存当中，可以查看到加载的资源数和锁占内存。</p>
<h1 id="任务-37：场景异步加载-知识点"><a href="#任务-37：场景异步加载-知识点" class="headerlink" title="任务 37：场景异步加载 知识点"></a>任务 37：场景异步加载 知识点</h1><h2 id="知识点一-回顾场景同步切换"><a href="#知识点一-回顾场景同步切换" class="headerlink" title="知识点一 回顾场景同步切换"></a>知识点一 回顾场景同步切换</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SceneManager.LoadScene(<span class="string">&quot;Lesson19&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="场景同步切换的缺点"><a href="#场景同步切换的缺点" class="headerlink" title="场景同步切换的缺点"></a>场景同步切换的缺点</h3><p>在切换场景时，Unity 会删除当前场景上所有对象，并且去加载下一个场景的相关信息。</p>
<p>如果当前场景，对象过多或者下一个场景对象过多。</p>
<p>这个过程会非常的耗时，会让玩家感受到卡顿，所以异步切换就是来解决该问题的。</p>
<h2 id="知识点二-场景异步切换"><a href="#知识点二-场景异步切换" class="headerlink" title="知识点二 场景异步切换"></a>知识点二 场景异步切换</h2><p>场景异步加载和资源异步加载几乎一致，有两种方式。</p>
<h3 id="1-通过事件回调函数-异步加载"><a href="#1-通过事件回调函数-异步加载" class="headerlink" title="1.通过事件回调函数 异步加载"></a>1.通过事件回调函数 异步加载</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AsyncOperation ao = SceneManager.LoadSceneAsync(<span class="string">&quot;Lesson20Test&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>当场景异步加载结束后，就会自动调用该事件函数。</p>
<p>我们如果希望在加载结束后，做一些事情，那么就可以在该函数中写处理逻辑。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ao.completed += (a) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">	print(<span class="string">&quot;加载结束&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ao.completed += LoadOver;</span><br></pre></td></tr></table></figure>

<h3 id="2-通过协程异步加载"><a href="#2-通过协程异步加载" class="headerlink" title="2.通过协程异步加载"></a>2.通过协程异步加载</h3><p>需要注意的是，加载场景会把当前场景上，没有特别处理的对象都删除了。</p>
<p>所以，协程中的部分逻辑，可能是执行不了的。</p>
<p>解决思路：让处理场景加载的脚本依附的对象，过场景时不被移除。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该脚本依附的对象,过场景时不会被移除</span></span><br><span class="line">DontDestroyOnLoad(<span class="keyword">this</span>.gameObject);</span><br><span class="line">StartCoroutine(LoadScene(<span class="string">&quot;Lesson20Test&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>协程的好处，是异步加载场景时，我可以在加载的同时，做一些别的逻辑。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">LoadScene</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//第一步</span></span><br><span class="line">    <span class="comment">//异步加载场景</span></span><br><span class="line">    AsyncOperation ao = SceneManager.LoadSceneAsync(name);</span><br><span class="line">    <span class="comment">//Unity内部的 协程协调器 发现是异步加载类型的返回对象 那么就会等待</span></span><br><span class="line">    <span class="comment">//等待异步加载结束后 才会继续执行 迭代器函数中后面的步骤</span></span><br><span class="line">    print(<span class="string">&quot;异步加载过程中 打印的信息&quot;</span>);</span><br><span class="line">    <span class="comment">//协程的好处 是异步加载场景时 我可以在加载的同时 做一些别的逻辑</span></span><br><span class="line">    <span class="comment">//yield return ao;</span></span><br><span class="line">    <span class="comment">//第二步</span></span><br><span class="line">    print(<span class="string">&quot;异步加载结束后 打印的信息&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//比如 我们可以在异步加载过程中 去更新进度条</span></span><br><span class="line">    <span class="comment">//第一种 就是利用 场景异步加载 的进度 去更新 但是 不是特别准确 一般也不会直接用</span></span><br><span class="line">    <span class="comment">//while(!ao.isDone)</span></span><br><span class="line">    <span class="comment">//&#123;</span></span><br><span class="line">    <span class="comment">//    print(ao.progress);</span></span><br><span class="line">    <span class="comment">//    yield return null;</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//离开循环后 就会认为场景加载结束</span></span><br><span class="line">    <span class="comment">//可以把进度条顶满 然后 隐藏进度条</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//第二种 就是根据你游戏的规则 自己定义 进度条变化的条件</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> ao;</span><br><span class="line">    <span class="comment">//场景加载结束 更新20%进度</span></span><br><span class="line">    <span class="comment">//接着去加载场景中 的其它信息</span></span><br><span class="line">    <span class="comment">//比如</span></span><br><span class="line">    <span class="comment">//动态加载怪物</span></span><br><span class="line">    <span class="comment">//这时 进度条 再更新20%</span></span><br><span class="line">    <span class="comment">//动态加载 场景模型</span></span><br><span class="line">    <span class="comment">//这时 就认为 加载结束了 进度条顶满</span></span><br><span class="line">    <span class="comment">//隐藏进度条</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结-13"><a href="#总结-13" class="headerlink" title="总结"></a>总结</h2><p>场景异步加载和资源异步加载 一样，有两种方式</p>
<ol>
<li>通过事件回调函数</li>
<li>协程异步加载</li>
</ol>
<p>他们的优缺点表现和资源异步加载 也是一样的</p>
<ol>
<li><p>事件回调函数</p>
<p>优点：写法简单，逻辑清晰</p>
<p>缺点：只能加载完场景做一些事情 不能再加载过程中处理逻辑</p>
</li>
<li><p>协程异步加载</p>
<p>优点：可以在加载过程中处理逻辑，比如进度条更新等</p>
<p>缺点：写法较为麻烦，要通过协程</p>
</li>
</ol>
<h2 id="练习题-14"><a href="#练习题-14" class="headerlink" title="练习题"></a>练习题</h2><p>请写一个简单的场景管理器，提供统一的方法给外部用于场景异步切换。外部可以传入委托用于当异步切换结束时执行某些逻辑</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.Events;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.SceneManagement;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SceneLoadMgr</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SceneLoadMgr _instance = <span class="keyword">new</span> SceneLoadMgr();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SceneLoadMgr Instance =&gt; _instance;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SceneLoadMgr</span>()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LoadSceneUseCompleted</span>(<span class="params"><span class="built_in">string</span> scene, UnityAction action = <span class="literal">null</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        AsyncOperation ao = SceneManager.LoadSceneAsync(scene);</span><br><span class="line">        ao.completed += (a) =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            action();</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">LoadSceneUseIEnumerator</span>(<span class="params"><span class="built_in">string</span> scene, UnityAction action = <span class="literal">null</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Load(scene, action);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">IEnumerator <span class="title">Load</span>(<span class="params"><span class="built_in">string</span> scene, UnityAction action = <span class="literal">null</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        AsyncOperation ao = SceneManager.LoadSceneAsync(scene);</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> ao;</span><br><span class="line">        action();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-39：LineRenderer-知识点"><a href="#任务-39：LineRenderer-知识点" class="headerlink" title="任务 39：LineRenderer 知识点"></a>任务 39：LineRenderer 知识点</h1><h2 id="知识点一-LineRenderer-是什么"><a href="#知识点一-LineRenderer-是什么" class="headerlink" title="知识点一 LineRenderer 是什么"></a>知识点一 LineRenderer 是什么</h2><p>LineRenderer 是 Unity 提供的一个用于画线的组件，使用它我们可以在场景中绘制线段。</p>
<p>一般可以用于：</p>
<ol>
<li>绘制攻击范围</li>
<li>武器红外线</li>
<li>辅助功能</li>
<li>其它画线功能</li>
</ol>
<h2 id="知识点二-LineRender-参数相关"><a href="#知识点二-LineRender-参数相关" class="headerlink" title="知识点二 LineRender 参数相关"></a>知识点二 LineRender 参数相关</h2><h3 id="重要参数"><a href="#重要参数" class="headerlink" title="重要参数"></a>重要参数</h3><ul>
<li>Loop：是否终点起始自动相连</li>
<li>Positions：线段的点</li>
<li>线段宽度曲线调整</li>
<li>Color：颜色变化</li>
<li>Corner Vertices（角顶点，圆角）：此属性指示在一条线中绘制角时使用了多少额外的顶点。<br>增加此值，使线角看起来更圆。</li>
<li>End Cap Vertices（终端顶点，圆角）：终点圆角</li>
<li>Generate Lighting Data：生成光源数据，使得生成的线收光的影响</li>
<li>Use World Space：是否使用世界坐标系，如果勾选，则点的位置就是世界坐标，否则是相对于父物体的坐标。</li>
<li>Materials：线使用的材质球</li>
</ul>
<h2 id="知识点三-LineRender-代码相关"><a href="#知识点三-LineRender-代码相关" class="headerlink" title="知识点三 LineRender 代码相关"></a>知识点三 LineRender 代码相关</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/LineRenderer.html">UnityEngine.LineRenderer - Unity 脚本 API</a></p>
</blockquote>
<p>动态添加一个线段</p>
<p>注意：只要添加了一个 LineRenderer 组件，他们就有两个点，所以在使用的时候，要先将<code>positionCount</code>置 0</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GameObject line = <span class="keyword">new</span> GameObject();</span><br><span class="line">line.name = <span class="string">&quot;Line&quot;</span>;</span><br><span class="line">LineRenderer lineRenderer = line.AddComponent&lt;LineRenderer&gt;();</span><br></pre></td></tr></table></figure>

<p>首尾相连</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineRenderer.loop = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<p>开始结束宽</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lineRenderer.startWidth = <span class="number">0.02f</span>;</span><br><span class="line">lineRenderer.endWidth = <span class="number">0.02f</span>;</span><br></pre></td></tr></table></figure>

<p>开始结束颜色</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lineRenderer.startColor = Color.white;</span><br><span class="line">lineRenderer.endColor = Color.red;</span><br></pre></td></tr></table></figure>

<p>设置材质</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m = Resources.Load&lt;Material&gt;(<span class="string">&quot;M&quot;</span>);</span><br><span class="line">lineRenderer.material = m;</span><br></pre></td></tr></table></figure>

<p>设置点<br>注意：设置点要先设置点的个数！！</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineRenderer.positionCount = <span class="number">4</span>;</span><br></pre></td></tr></table></figure>

<p>接着设置对应每个点的位置。</p>
<p>如果设置了个数，但是未设置具体点位置，那么这些点的位置将是（0，0，0）。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lineRenderer.SetPositions(<span class="keyword">new</span> Vector3[] &#123; <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),</span><br><span class="line">                                         <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">5</span>),</span><br><span class="line">                                         <span class="keyword">new</span> Vector3(<span class="number">5</span>,<span class="number">0</span>,<span class="number">5</span>)&#125;);</span><br><span class="line">lineRenderer.SetPosition(<span class="number">3</span>, <span class="keyword">new</span> Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br></pre></td></tr></table></figure>

<p>是否使用世界坐标系，决定了，是否随对象移动而移动。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineRenderer.useWorldSpace = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>让线段受光影响，会接受光数据，进行着色器计算。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineRenderer.generateLightingData = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<h2 id="练习题-15"><a href="#练习题-15" class="headerlink" title="练习题"></a>练习题</h2><h3 id="第一题-5"><a href="#第一题-5" class="headerlink" title="第一题"></a>第一题</h3><p>请写一个方法，传入一个中心点，传入一个半径，用 LineRender 画一个圆出来</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DrawRing</span>(<span class="params">Vector3 center, <span class="built_in">int</span> radius, <span class="built_in">int</span> pointNum</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    GameObject obj = <span class="keyword">new</span> GameObject(<span class="string">&quot;ring&quot;</span>);</span><br><span class="line">    obj.transform.position = center;</span><br><span class="line">    LineRenderer line = obj.AddComponent&lt;LineRenderer&gt;();</span><br><span class="line">    line.useWorldSpace = <span class="literal">false</span>;</span><br><span class="line">    line.loop = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">float</span> angle = <span class="number">360</span> / pointNum;</span><br><span class="line">    line.positionCount = pointNum;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; pointNum; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        line.SetPosition(i, center + Quaternion.AngleAxis(angle * i, Vector3.up) * Vector3.forward * radius);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="第二题-5"><a href="#第二题-5" class="headerlink" title="第二题"></a>第二题</h3><p>请实现，在 Game 窗口长按鼠标用 LineRender 画出鼠标移动的轨迹</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        GameObject obj = <span class="keyword">new</span> GameObject(<span class="string">&quot;line&quot;</span>);</span><br><span class="line">        obj.transform.SetParent(lineParent.transform);</span><br><span class="line">        <span class="comment">//初始化这条线</span></span><br><span class="line">        line = obj.AddComponent&lt;LineRenderer&gt;();</span><br><span class="line">        line.startWidth = <span class="number">0.5f</span>;</span><br><span class="line">        line.endWidth = <span class="number">0.5f</span>;</span><br><span class="line">        line.loop = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//将默认的两个点清除</span></span><br><span class="line">        line.positionCount = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Input.GetMouseButton(<span class="number">0</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取鼠标所在位置（这是一个屏幕位置）</span></span><br><span class="line">        pointPos = Input.mousePosition;</span><br><span class="line">        <span class="comment">//将z改为10，这个是距离</span></span><br><span class="line">        pointPos.z = <span class="number">10</span>;</span><br><span class="line">        <span class="comment">//添加一个点</span></span><br><span class="line">        line.positionCount++;</span><br><span class="line">        <span class="comment">//设置这个点的位置，将屏幕坐标转换为世界坐标</span></span><br><span class="line">        line.SetPosition(line.positionCount - <span class="number">1</span>, Camera.main.ScreenToWorldPoint(pointPos));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将上一个绘制的线删除的功能</span></span><br><span class="line">    <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">1</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        Transform trans = lineParent.transform;</span><br><span class="line">        Destroy(trans.GetChild(trans.childCount - <span class="number">1</span>).gameObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Unity-核心系统-物理系统-检测相关"><a href="#Unity-核心系统-物理系统-检测相关" class="headerlink" title="Unity 核心系统-物理系统-检测相关"></a>Unity 核心系统-物理系统-检测相关</h1><h1 id="任务-41：范围检测-知识点"><a href="#任务-41：范围检测-知识点" class="headerlink" title="任务 41：范围检测 知识点"></a>任务 41：范围检测 知识点</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Physics.html">UnityEngine.Physics - Unity 脚本 API</a></p>
</blockquote>
<h2 id="知识回顾-物理系统之碰撞检测"><a href="#知识回顾-物理系统之碰撞检测" class="headerlink" title="知识回顾 物理系统之碰撞检测"></a>知识回顾 物理系统之碰撞检测</h2><p>碰撞产生的必要条件</p>
<ol>
<li>至少一个物体有刚体</li>
<li>两个物体都必须有碰撞器</li>
</ol>
<p>碰撞和触发</p>
<ul>
<li>碰撞会产生实际的物理效果</li>
<li>触发看起来不会产生碰撞，但是可以通过函数监听触发</li>
<li>碰撞检测主要用于实体物体之间产生物理效果时使用</li>
</ul>
<h2 id="知识点一-什么是范围检测"><a href="#知识点一-什么是范围检测" class="headerlink" title="知识点一 什么是范围检测"></a>知识点一 什么是范围检测</h2><p>游戏中瞬时的攻击范围判断一般会使用范围检测</p>
<p>举例：</p>
<ol>
<li>玩家在前方 5m 处释放一个地刺魔法，在此处范围内的对象将受到地刺伤害；</li>
<li>玩家攻击，在前方 1 米圆形范围内对象都受到伤害。</li>
</ol>
<p>等等</p>
<p>类似这种并没有实体物体，只想要检测在指定某一范围，是否让敌方受到伤害时，便可以使用范围判断。</p>
<p>简而言之：在指定位置，进行范围判断，我们可以得到处于指定范围内的对象。</p>
<p>目的是对对象进行处理，比如受伤、减血等等。</p>
<h2 id="知识点二-如何进行范围检测"><a href="#知识点二-如何进行范围检测" class="headerlink" title="知识点二 如何进行范围检测"></a>知识点二 如何进行范围检测</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Physics.OverlapBox.html">Physics-OverlapBox - Unity 脚本 API</a></p>
</blockquote>
<p>必备条件：想要被范围检测到的对象，必须具备碰撞器（Collider）</p>
<p>注意点：</p>
<ol>
<li>范围检测相关 API，只有当执行该句代码时，进行一次范围检测，它是瞬时的。</li>
<li>范围检测相关 API，并不会真正产生一个碰撞器，只是碰撞判断计算而已。</li>
</ol>
<p>范围检测 API</p>
<h3 id="1-盒状范围检测"><a href="#1-盒状范围检测" class="headerlink" title="1.盒状范围检测"></a>1.盒状范围检测</h3><table>
<thead>
<tr>
<th>参数</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>center</td>
<td>盒体的中心。</td>
</tr>
<tr>
<td>halfExtents</td>
<td>盒体各个维度大小的一半。</td>
</tr>
<tr>
<td>orientation</td>
<td>盒体的旋转。</td>
</tr>
<tr>
<td>layerMask</td>
<td><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/Manual/Layers.html">层遮罩</a>，用于在投射射线时有选择地忽略碰撞体。</td>
</tr>
<tr>
<td>queryTriggerInteraction</td>
<td>指定该查询是否应该命中触发器。</td>
</tr>
</tbody></table>
<ul>
<li><p>参数一：立方体中心点</p>
</li>
<li><p>参数二：立方体三边大小的一半</p>
</li>
<li><p>参数三：立方体角度</p>
</li>
<li><p>参数四：检测指定层级（不填检测所有层）</p>
</li>
<li><p>参数五：</p>
<ul>
<li><p>是否忽略触发器 UseGlobal-使用全局设置</p>
</li>
<li><p>Collide - 检测触发器</p>
</li>
<li><p>Ignore - 忽略触发器</p>
</li>
<li><p>不填使用 UseGlobal</p>
</li>
</ul>
</li>
</ul>
<p>返回值：在该范围内的触发器（得到了对象触发器就可以得到对象的所有信息）</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">print(LayerMask.NameToLayer(<span class="string">&quot;UI&quot;</span>));</span><br><span class="line">Collider[] colliders = Physics.OverlapBox( Vector3.zero, Vector3.one, Quaternion.AngleAxis(<span class="number">45</span>, Vector3.up),</span><br><span class="line">                                          <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;UI&quot;</span>) |</span><br><span class="line">                                          <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>), QueryTriggerInteraction.UseGlobal);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; colliders.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">    print(colliders[i].gameObject.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="重要知识点："><a href="#重要知识点：" class="headerlink" title="重要知识点："></a>重要知识点：</h3><p>关于层级<br>通过名字得到层级编号 <code>LayerMask.NameToLayer</code>，我们需要通过编号左移构建二进制数。</p>
<p>这样每一个编号的层级，都是对应位为 1 的 2 进制数；</p>
<p>我们通过，位运算，可以选择想要检测层级。</p>
<p>好处：一个 int 就可以表示所有想要检测的层级信息</p>
<p>层级编号是 0~31 刚好 32 位</p>
<p>是一个 int 数</p>
<p>每一个编号，代表的都是二进制的一位。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>—— <span class="number">1</span> &lt;&lt; <span class="number">0</span>——<span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0001</span> = <span class="number">1</span></span><br><span class="line"><span class="number">1</span>—— <span class="number">1</span> &lt;&lt; <span class="number">1</span>——<span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0010</span> = <span class="number">2</span></span><br><span class="line"><span class="number">2</span>—— <span class="number">1</span> &lt;&lt; <span class="number">2</span>——<span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0100</span> = <span class="number">4</span></span><br><span class="line"><span class="number">3</span>—— <span class="number">1</span> &lt;&lt; <span class="number">3</span>——<span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1000</span> = <span class="number">8</span></span><br><span class="line"><span class="number">4</span>—— <span class="number">1</span> &lt;&lt; <span class="number">4</span>——<span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0001</span> <span class="number">0000</span> = <span class="number">16</span></span><br><span class="line"><span class="number">5</span>—— <span class="number">1</span> &lt;&lt; <span class="number">5</span>——<span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0010</span> <span class="number">0000</span> = <span class="number">32</span></span><br></pre></td></tr></table></figure>

<h4 id="另一个-API"><a href="#另一个-API" class="headerlink" title="另一个 API"></a>另一个 API</h4><p>返回值：碰撞到的碰撞器数量<br>参数：传入一个数组进行存储<br><code>Physics.OverlapBoxNonAlloc()</code></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Physics.OverlapBoxNonAlloc(Vector3.zero, Vector3.one, colliders) != <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-球形范围检测"><a href="#2-球形范围检测" class="headerlink" title="2.球形范围检测"></a>2.球形范围检测</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Physics.OverlapSphere.html">Physics-OverlapSphere - Unity 脚本 API</a></p>
</blockquote>
<ul>
<li>参数一：中心点</li>
<li>参数二：球半径</li>
<li>参数三：检测指定层级（不填检测所有层）</li>
<li>参数四：是否忽略触发器 UseGlobal-使用全局设置 Collide - 检测触发器 Ignore - 忽略触发器 不填使用 UseGlobal</li>
<li>返回值：在该范围内的触发器（得到了对象触发器就可以得到对象的所有信息）</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">colliders = Physics.OverlapSphere(Vector3.zero, <span class="number">5</span>,</span><br><span class="line">                                  <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>另一个 API</p>
<ul>
<li><p>返回值：碰撞到的碰撞器数量</p>
</li>
<li><p>参数：传入一个数组进行存储</p>
</li>
<li><p><code>Physics.OverlapSphereNonAlloc</code></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>( Physics.OverlapSphereNonAlloc(Vector3.zero, <span class="number">5</span>, colliders) != <span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-胶囊范围检测"><a href="#3-胶囊范围检测" class="headerlink" title="3.胶囊范围检测"></a>3.胶囊范围检测</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.unity.cn/cn/2020.3/ScriptReference/Physics.OverlapCapsule.html">Physics-OverlapCapsule - Unity 脚本 API</a></p>
</blockquote>
<ul>
<li>参数一：半圆一中心点</li>
<li>参数二：半圆二中心点</li>
<li>参数三：半圆半径</li>
<li>参数四：检测指定层级（不填检测所有层）</li>
<li>参数五：是否忽略触发器 UseGlobal-使用全局设置 Collide - 检测触发器 Ignore - 忽略触发器 不填使用 UseGlobal</li>
<li>返回值：在该范围内的触发器（得到了对象触发器就可以得到对象的所有信息）</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colliders = Physics.OverlapCapsule(Vector3.zero, Vector3.up, <span class="number">1</span>, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;UI&quot;</span>), QueryTriggerInteraction.UseGlobal);</span><br></pre></td></tr></table></figure>

<p>另一个 API</p>
<ul>
<li>返回值：碰撞到的碰撞器数量</li>
<li>参数：传入一个数组进行存储</li>
<li><code>Physics.OverlapCapsuleNonAlloc</code></li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( Physics.OverlapCapsuleNonAlloc(Vector3.zero, Vector3.up, <span class="number">1</span>, colliders ) != <span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Layer（图层相关）"><a href="#Layer（图层相关）" class="headerlink" title="Layer（图层相关）"></a>Layer（图层相关）</h3><p>所有关于图层的使用，都是使用一个 Int32 的整数表示的，Layer 最多有 32 个。</p>
<h2 id="总结-14"><a href="#总结-14" class="headerlink" title="总结"></a>总结</h2><p>范围检测主要用于&#x3D;&#x3D;瞬时&#x3D;&#x3D;的碰撞范围检测。</p>
<p>主要掌握</p>
<ul>
<li>Physics 类中的静态方法</li>
<li>球形、盒状、胶囊三种 API 的使用即可</li>
</ul>
<h2 id="练习题-16"><a href="#练习题-16" class="headerlink" title="练习题"></a>练习题</h2><p>世界坐标原点有一个立方体，键盘 WASD 键可以控制其前后移动和旋转。</p>
<p>请结合所学知识实现</p>
<ol>
<li>按 J 键在立方体面朝向前方 1 米处进行立方体范围检测</li>
<li>按 K 键在立方体前面 5 米范围内进行胶囊范围检测</li>
<li>按 L 键以立方体脚下为原点，半径 10 米内进行球形范围检测</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.transform.Translate(Input.GetAxis(<span class="string">&quot;Vertical&quot;</span>) * Vector3.forward * moveSpeed * Time.deltaTime);</span><br><span class="line">        <span class="keyword">this</span>.transform.Rotate(Input.GetAxis(<span class="string">&quot;Horizontal&quot;</span>) * Vector3.up * rotateSpeed * Time.deltaTime);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//画线</span></span><br><span class="line">        Debug.DrawLine(<span class="keyword">this</span>.transform.position, <span class="keyword">this</span>.transform.position + <span class="keyword">this</span>.transform.forward * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//按J键在立方体面朝向前方1米处进行立方体范围检测</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.J))</span><br><span class="line">        &#123;</span><br><span class="line">            Collider[] colliders = Physics.OverlapBox(<span class="keyword">this</span>.transform.position + <span class="keyword">this</span>.transform.forward * <span class="number">0.5f</span>,</span><br><span class="line">                Vector3.one * <span class="number">0.5f</span>,</span><br><span class="line">                <span class="keyword">this</span>.transform.rotation,</span><br><span class="line">                <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>)</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; colliders.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                print(colliders[i].gameObject.name);</span><br><span class="line">                print(<span class="string">&quot;距离&quot;</span> + colliders[i].gameObject.name</span><br><span class="line">                    + Vector3.Distance(<span class="keyword">this</span>.transform.position, colliders[i].transform.position).ToString()</span><br><span class="line">                    + <span class="string">&quot;米&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//按K键在立方体前面5米范围内进行胶囊范围检测</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.K))</span><br><span class="line">        &#123;</span><br><span class="line">            Collider[] colliders = Physics.OverlapCapsule(</span><br><span class="line">                <span class="keyword">this</span>.transform.position,</span><br><span class="line">                <span class="keyword">this</span>.transform.position + <span class="keyword">this</span>.transform.forward * <span class="number">5</span>,</span><br><span class="line">                <span class="number">0.5f</span>,</span><br><span class="line">                <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>)</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; colliders.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                print(colliders[i].gameObject.name);</span><br><span class="line">                print(<span class="string">&quot;距离&quot;</span> + colliders[i].gameObject.name</span><br><span class="line">                    + Vector3.Distance(<span class="keyword">this</span>.transform.position, colliders[i].transform.position).ToString()</span><br><span class="line">                    + <span class="string">&quot;米&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//按L键以立方体脚下为原点，半径10米内进行球形范围检测</span></span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.L))</span><br><span class="line">        &#123;</span><br><span class="line">            Collider[] colliders = Physics.OverlapSphere(</span><br><span class="line">                <span class="keyword">this</span>.transform.position,</span><br><span class="line">                <span class="number">10f</span>,</span><br><span class="line">                <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>)</span><br><span class="line">                );</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; colliders.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                print(colliders[i].gameObject.name);</span><br><span class="line">                print(<span class="string">&quot;距离&quot;</span> + colliders[i].gameObject.name</span><br><span class="line">                    + Vector3.Distance(<span class="keyword">this</span>.transform.position, colliders[i].transform.position).ToString()</span><br><span class="line">                    + <span class="string">&quot;米&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-43：射线检测-知识点"><a href="#任务-43：射线检测-知识点" class="headerlink" title="任务 43：射线检测 知识点"></a>任务 43：射线检测 知识点</h1><h2 id="知识点一-什么是射线检测"><a href="#知识点一-什么是射线检测" class="headerlink" title="知识点一 什么是射线检测"></a>知识点一 什么是射线检测</h2><p>Unity 物理系统中，目前我们学习的物体相交判断：</p>
<ol>
<li>碰撞检测——必备条件 1 刚体 2 碰撞器</li>
<li>范围检测——必备条件 碰撞器</li>
</ol>
<p>如果想要做这样的碰撞检测呢？</p>
<ol>
<li>鼠标选择场景上一物体</li>
<li>一些 FPS 射击游戏当中的射击（无弹道 - 不产生实际的子弹对象进行移动，而是射线检测）</li>
</ol>
<p>等等需要判断一条线和物体的碰撞情况，射线检测就是来解决这些问题的。它可以在指定点发射一个指定方向的射线，判断该射线与哪些碰撞器相交，得到对应对象。</p>
<h2 id="知识点二-射线对象"><a href="#知识点二-射线对象" class="headerlink" title="知识点二 射线对象"></a>知识点二 射线对象</h2><h3 id="1-3D-世界中的射线"><a href="#1-3D-世界中的射线" class="headerlink" title="1.3D 世界中的射线"></a>1.3D 世界中的射线</h3><p>假设有一条，起点为坐标(1, 0, 0)，方向为世界坐标 Z 轴正方向的射线</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ray r = <span class="keyword">new</span> Ray(Vector3.right, Vector3.forward);</span><br></pre></td></tr></table></figure>

<p>注意理解参数含义：</p>
<ul>
<li>参数一：起点</li>
<li>参数二：方向（一定<strong>记住</strong>，不是两点决定射线方向，第二个参数<strong>直接</strong>就代表方向向量）</li>
</ul>
<p>目前只是声明了一个射线对象，对于我们来说，没有任何的用处。</p>
<p>Ray 中的成员</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(r.origin);	<span class="comment">//起点</span></span><br><span class="line">print(r.direction);	<span class="comment">//方向</span></span><br></pre></td></tr></table></figure>

<h3 id="2-摄像机发射出的射线"><a href="#2-摄像机发射出的射线" class="headerlink" title="2.摄像机发射出的射线"></a>2.摄像机发射出的射线</h3><p>得到一条从屏幕位置作为起点，摄像机视口方向为方向的射线。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ray r2 = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br></pre></td></tr></table></figure>

<h3 id="注意：-1"><a href="#注意：-1" class="headerlink" title="注意："></a>注意：</h3><p>单独的射线对于我们来说没有实际的意义，我们需要用它结合物理系统进行射线碰撞判断。</p>
<h2 id="知识点三-碰撞检测函数"><a href="#知识点三-碰撞检测函数" class="headerlink" title="知识点三 碰撞检测函数"></a>知识点三 碰撞检测函数</h2><p>Physics 类中提供了很多进行射线检测的静态函数，他们有很多种重载类型，我们只需要掌握核心的几个函数，其它函数自然就明白什么意思了。</p>
<p>注意：射线检测也是瞬时的，执行代码时进行一次射线检测。</p>
<h3 id="1-最原始的射线检测"><a href="#1-最原始的射线检测" class="headerlink" title="1.最原始的射线检测"></a>1.最原始的射线检测</h3><p>准备一条射线</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ray r3 = <span class="keyword">new</span> Ray(Vector3.zero, Vector3.forward);</span><br></pre></td></tr></table></figure>

<p>进行射线检测，如果碰撞到对象，返回 true。</p>
<ul>
<li>参数一：射线对象</li>
<li>参数二：检测的最大距离，超出这个距离不检测</li>
<li>参数三：检测指定层级（不填检测所有层）</li>
<li>参数四：是否忽略触发器 UseGlobal-使用全局设置 Collide - 检测触发器 Ignore - 忽略触发器 不填使用 UseGlobal</li>
<li>返回值：bool 当碰撞到对象时 返回 true 没有 返回 false</li>
<li>注意：这个 API 只能检测是否有碰撞到对象，不返回碰到的对象</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Physics.Raycast(r3,</span><br><span class="line">                    <span class="number">1000</span>,</span><br><span class="line">                    <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Monster&quot;</span>),</span><br><span class="line">                    QueryTriggerInteraction.UseGlobal))</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;碰撞到了对象&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有一种重载，不用传入射线，直接传入起点和方向，也可以用于判断是否碰到了对象。</p>
<p>就是把，第一个参数射线变成了射线的两个点，一个起点一个方向。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//就是上一个API，不过射线换成了临时创建的。</span></span><br><span class="line"><span class="keyword">if</span> (Physics.Raycast(Vector3.zero,</span><br><span class="line">                    Vector3.forward,</span><br><span class="line">                    <span class="number">1000</span>,</span><br><span class="line">                    <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Monster&quot;</span>),</span><br><span class="line">                    QueryTriggerInteraction.UseGlobal))</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;碰撞到了对象2&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-获取相交的单个物体信息"><a href="#2-获取相交的单个物体信息" class="headerlink" title="2.获取相交的单个物体信息"></a>2.获取相交的单个物体信息</h3><p>物体信息类<code>RaycastHit</code></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RaycastHit hitInfo;</span><br></pre></td></tr></table></figure>

<ul>
<li>参数一：射线</li>
<li>参数二：RaycastHit 是结构体，是值类型；Unity 会通过 out 关键字，在函数内部处理后 得到碰撞数据后返回到该参数中（就是传引用，并且 out 修饰，必须在函数内修改）。</li>
<li>参数三：距离</li>
<li>参数四：检测指定层级（不填检测所有层）</li>
<li>参数五：是否忽略触发器 UseGlobal-使用全局设置 Collide - 检测触发器 Ignore - 忽略触发器 不填使用 UseGlobal</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( Physics.Raycast(r3, <span class="keyword">out</span> hitInfo, <span class="number">1000</span>, <span class="number">1</span>&lt;&lt;LayerMask.NameToLayer(<span class="string">&quot;Monster&quot;</span>), QueryTriggerInteraction.UseGlobal) )</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;碰撞到了物体 得到了信息&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//碰撞器信息</span></span><br><span class="line">    print(<span class="string">&quot;碰撞到物体的名字&quot;</span> + hitInfo.collider.gameObject.name);</span><br><span class="line">    <span class="comment">//碰撞到的点</span></span><br><span class="line">    print(hitInfo.point);</span><br><span class="line">    <span class="comment">//法线信息</span></span><br><span class="line">    print(hitInfo.normal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//得到碰撞到对象的位置</span></span><br><span class="line">    print(hitInfo.transform.position);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//得到碰撞到对象 离自己的距离</span></span><br><span class="line">    print(hitInfo.distance);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>RaycastHit</code>该类对于我们的意义：</p>
<ul>
<li>它不仅可以得到我们碰撞到的对象信息，还可以得到一些碰撞的点、距离、法线等等的信息。</li>
<li>碰撞器信息：<code>hitInfo.collider.gameObject.name</code></li>
<li>碰撞到的点：<code>hitInfo.point</code></li>
<li>得到碰撞到对象的位置：<code>hitInfo.transform.position</code></li>
<li>得到碰撞到对象，离自己的距离：<code>hitInfo.distance</code></li>
<li>注意：它是一个&#x3D;&#x3D;结构体&#x3D;&#x3D;</li>
</ul>
<p>还有一种重载，不用传入射线直接传入起点和方向，也可以用于判断。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (</span><br><span class="line">    Physics.Raycast(</span><br><span class="line">    	Vector3.zero,</span><br><span class="line">    	Vector3.forward,</span><br><span class="line">    	<span class="keyword">out</span> hitInfo,</span><br><span class="line">    	<span class="number">1000</span>,</span><br><span class="line">    	<span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Monster&quot;</span>),</span><br><span class="line">    	QueryTriggerInteraction.UseGlobal))</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-获取相交的多个物体"><a href="#3-获取相交的多个物体" class="headerlink" title="3.获取相交的多个物体"></a>3.获取相交的多个物体</h3><p>可以得到碰撞到的多个对象，如果没有就是容量为 0 的数组。</p>
<ul>
<li>参数一：射线</li>
<li>参数二：距离</li>
<li>参数三：检测指定层级（不填检测所有层）</li>
<li>参数四：是否忽略触发器 UseGlobal-使用全局设置 Collide - 检测触发器 Ignore - 忽略触发器 不填使用 UseGlobal</li>
<li>返回 RaycastHit 数组</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">RaycastHit[] hits = Physics.RaycastAll(</span><br><span class="line">    r3,</span><br><span class="line">    <span class="number">1000</span>,</span><br><span class="line">    <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Monster&quot;</span>),</span><br><span class="line">    QueryTriggerInteraction.UseGlobal</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; hits.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;碰到的所有物体 名字分别是&quot;</span> + hits[i].collider.gameObject.name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有一种重载，不用传入射线，直接传入起点和方向，也可以用于判断；</p>
<p>之前的参数一射线，通过两个点传入。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">RaycastHit[] hitInfos = Physics.RaycastAll(r3, <span class="number">1000</span>, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>), QueryTriggerInteraction.UseGlobal);</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; hitInfos.Length; i++)</span><br><span class="line">&#123;</span><br><span class="line">    print(hitInfos[i].collider.gameObject.name);</span><br><span class="line">    print(hitInfos[i].point);</span><br><span class="line">    print(hitInfos[i].transform.position);</span><br><span class="line">    print(hitInfos[i].normal);</span><br><span class="line">    print(hitInfos[i].distance);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有一种函数，返回的碰撞的数量，通过传入数组得到数据。</p>
<p>注意：如果这个数组不赋值，将无法访问元素，因为这个函数是<code>NonAlloc</code>的，即不分配内存。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">RaycastHit[] hitInfos = <span class="keyword">new</span> RaycastHit[<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Physics.RaycastNonAlloc(r3, hitInfos, <span class="number">1000f</span>, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>), QueryTriggerInteraction.UseGlobal) &gt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; hitInfos.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        print(hitInfos[i].collider.gameObject.name);</span><br><span class="line">        print(hitInfos[i].point);</span><br><span class="line">        print(hitInfos[i].transform.position);</span><br><span class="line">        print(hitInfos[i].normal);</span><br><span class="line">        print(hitInfos[i].distance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="知识点四-使用时注意的问题"><a href="#知识点四-使用时注意的问题" class="headerlink" title="知识点四 使用时注意的问题"></a>知识点四 使用时注意的问题</h2><h3 id="注意：-2"><a href="#注意：-2" class="headerlink" title="注意："></a>注意：</h3><p>距离、层级两个参数，都是数值类型。当我们传入参数时，一定要明确传入的参数代表的是距离还是层级。<br>举例<br>这样写是错误的，因为第二个参数，代表的是距离，不是层级。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误，使用了只传入射线距离的重载函数！</span></span><br><span class="line"><span class="keyword">if</span> (Physics.Raycast(r3, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Monster&quot;</span>)))</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">Raycast</span>(<span class="params">Ray ray, <span class="built_in">float</span> maxDistance</span>)</span>;</span><br></pre></td></tr></table></figure>

<p>应该这么写</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Physics.Raycast(r3, <span class="number">1000</span>, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Monster&quot;</span>)))</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">Raycast</span>(<span class="params">Ray ray, <span class="built_in">float</span> maxDistance, <span class="built_in">int</span> layerMask</span>)</span>;</span><br></pre></td></tr></table></figure>

<h2 id="练习题-17"><a href="#练习题-17" class="headerlink" title="练习题"></a>练习题</h2><h3 id="第一题-6"><a href="#第一题-6" class="headerlink" title="第一题"></a>第一题</h3><p>请用资料区给的资源，实现鼠标点击场景上一面墙，在点击的位置创建子弹特效和弹孔。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson23_P</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> GameObject bulletEff;</span><br><span class="line">    <span class="keyword">public</span> GameObject bulletHole;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        bulletEff = Resources.Load&lt;GameObject&gt;(<span class="string">&quot;ArtRes/BulletEff/MagicArsenal/Effects/Prefabs/Projectiles/Fire/FireImpactSmall&quot;</span>);</span><br><span class="line">        bulletHole = Resources.Load&lt;GameObject&gt;(<span class="string">&quot;ArtRes/BulletEff/MagicArsenal/Effects/Prefabs/Projectiles/Fire/FireProjectileSmall&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">            RaycastHit hitInfo;</span><br><span class="line">            <span class="keyword">if</span> (Physics.Raycast(ray, <span class="keyword">out</span> hitInfo, <span class="number">1000</span>, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Walls&quot;</span>), QueryTriggerInteraction.UseGlobal)) &#123;</span><br><span class="line">                GameObject obj = Instantiate(bulletEff);</span><br><span class="line">                obj.transform.position = hitInfo.point;</span><br><span class="line">                Destroy(obj, <span class="number">2f</span>);</span><br><span class="line"></span><br><span class="line">                GameObject hole = Instantiate(bulletHole);</span><br><span class="line">                hole.transform.position = hitInfo.point + Vector3.back * <span class="number">0.1f</span>;</span><br><span class="line">                Destroy(hole, <span class="number">5f</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="第二题-6"><a href="#第二题-6" class="headerlink" title="第二题"></a>第二题</h3><p>场景上有一个平面，有一个立方体，当鼠标点击选中立方体时，长按鼠标左键可以拖动立方体在平面上移动，点击鼠标右键取消选中。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEditor.PackageManager;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="comment">//创建人：</span></span><br><span class="line"><span class="comment">//功能说明：</span></span><br><span class="line"><span class="comment">//**********************************</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Lesson23_P2</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> GameObject selectedObj;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">0</span>) || Input.GetMouseButton(<span class="number">0</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition);</span><br><span class="line">            RaycastHit hitInfo;</span><br><span class="line">            <span class="keyword">if</span> (selectedObj == <span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (Physics.Raycast(ray, <span class="keyword">out</span> hitInfo, <span class="number">1000</span>, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Default&quot;</span>), QueryTriggerInteraction.UseGlobal))</span><br><span class="line">                &#123;</span><br><span class="line">                    selectedObj = hitInfo.collider.gameObject;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (Physics.Raycast(ray, <span class="keyword">out</span> hitInfo, <span class="number">1000</span>, <span class="number">1</span> &lt;&lt; LayerMask.NameToLayer(<span class="string">&quot;Walls&quot;</span>), QueryTriggerInteraction.UseGlobal))</span><br><span class="line">                &#123;</span><br><span class="line">                    selectedObj.transform.position = hitInfo.point;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetMouseButtonDown(<span class="number">1</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            selectedObj = <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//下面这个是左键抬起就不选</span></span><br><span class="line">        <span class="comment">//if (Input.GetMouseButtonUp(0) || Input.GetMouseButtonDown(1))</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">        <span class="comment">//    selectedObj = null;</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="任务-45：总结"><a href="#任务-45：总结" class="headerlink" title="任务 45：总结"></a>任务 45：总结</h1><h2 id="学习的主要内容"><a href="#学习的主要内容" class="headerlink" title="学习的主要内容"></a>学习的主要内容</h2><ol>
<li>3D 数学<ol>
<li>Mathf</li>
<li>三角函数</li>
<li>Unity 当中的坐标系</li>
<li>Vector3 向量</li>
<li>Quaternion 四元数</li>
</ol>
</li>
<li>Mono 当中的重要内容<ol>
<li>延迟函数</li>
<li>协同程序</li>
<li>协同程序原理</li>
</ol>
</li>
<li>Resources 资源加载<ol>
<li>Unity 中的特殊文件夹</li>
<li>Resources 同步加载</li>
<li>Resources 异步加载</li>
<li>Resources 卸载资源</li>
</ol>
</li>
<li>场景异步加载</li>
<li>画线功能：LineRenderer</li>
<li>核心系统<ol>
<li>物理系统之范围检测</li>
<li>物理系统之射线检测</li>
</ol>
</li>
</ol>
<h2 id="Unity-基础中知识点的重要性"><a href="#Unity-基础中知识点的重要性" class="headerlink" title="Unity 基础中知识点的重要性"></a>Unity 基础中知识点的重要性</h2><ul>
<li>向量和四元数——游戏中移动旋转都和它有关</li>
<li>协程——可以分时分步处理逻辑，避免卡顿</li>
<li>范围检测——动作游戏必备</li>
<li>射线检测——交互功能必备</li>
<li>资源场景的同步异步加载——所有功能必备</li>
</ul>
<h2 id="如何学好-Unity"><a href="#如何学好-Unity" class="headerlink" title="如何学好 Unity?"></a>如何学好 Unity?</h2><p>用所学知识点，独立的去模拟，你喜欢的游戏中的一些基础功能，从简单功能开始入手去练习。</p>
<p>随着你实现的功能越多知识点自然可以融会贯通。</p>
<h2 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h2><p>不要基础知识点都没有弄明白，就急于求成的去照着实践教学视频学习，实践视频是不会给讲知识点原理的。<br>要积少成多，慢慢积累，理论结合实践的提升自己的编程和逻辑能力。</p>
<!-- flag of hidden posts --></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://clearacg.com">Aki_CCLing</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://clearacg.com/posts/b0a904aa/">https://clearacg.com/posts/b0a904aa/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://clearacg.com" target="_blank">Secret Garden</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Technology/">Technology</a><a class="post-meta__tags" href="/tags/Code/">Code</a></div><div class="post_share"><div class="social-share" data-image="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/UNITY.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.staticfile.org/butterfly-extsrc/1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.staticfile.org/butterfly-extsrc/1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/b8d84677/" title="Git常用操作"><img class="cover" src="https://pic.imgdb.cn/item/65b2a2ed871b83018a2d55de.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-16</div><div class="title">Git常用操作</div></div></a></div><div><a href="/posts/978bdfbc/" title="Unity 学习路线"><img class="cover" src="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/UNITY.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-05</div><div class="title">Unity 学习路线</div></div></a></div><div><a href="/posts/ac98fa8d/" title="Unity 面试题 &amp; 日常问题"><img class="cover" src="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/UNITY.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-18</div><div class="title">Unity 面试题 &amp; 日常问题</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://pic.imgdb.cn/item/65b2a3e9871b83018a2fa6bd.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Aki_CCLing</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/AkiCCLing" target="_blank" title="GitHub"><i class="fa-brands fa-github" style="color: #1E3050;"></i></a><a class="social-icon" href="https://space.bilibili.com/5840406" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili" style="color: #FF6699;"></i></a><a class="social-icon" href="https://steamcommunity.com/id/AKIYC/" target="_blank" title="Steam"><i class="fa-brands fa-steam" style="color: #1E3050;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">一个ACGN爱好者的Blog，有问题与我交流可在Bilibili 留言 / 私信，谢谢你的关注。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Unity-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">Unity 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%89%8D%E7%8A%B6%E6%80%81"><span class="toc-number">1.1.</span> <span class="toc-text">目前状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%AD%A6%E4%B9%A0%E5%86%85%E5%AE%B9"><span class="toc-number">1.2.</span> <span class="toc-text">主要学习内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%AD%A6%E4%B9%A0%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.</span> <span class="toc-text">主要学习方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.4.</span> <span class="toc-text">学习建议</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3D-%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80"><span class="toc-number">2.</span> <span class="toc-text">3D 数学基础</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-2%EF%BC%9AMathf-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">3.</span> <span class="toc-text">任务 2：Mathf 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-Mathf-%E5%92%8C-Math"><span class="toc-number">3.1.</span> <span class="toc-text">知识点一 Mathf 和 Math</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E4%BB%96%E4%BB%AC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.2.</span> <span class="toc-text">知识点二 他们的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-Mathf-%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E2%80%94%E2%80%94%E4%B8%80%E8%88%AC%E8%AE%A1%E7%AE%97%E4%B8%80%E6%AC%A1"><span class="toc-number">3.3.</span> <span class="toc-text">知识点三 Mathf 中的常用方法——一般计算一次</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%CF%80-PI"><span class="toc-number">3.3.1.</span> <span class="toc-text">1.π - PI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8F%96%E7%BB%9D%E5%AF%B9%E5%80%BC-Abs"><span class="toc-number">3.3.2.</span> <span class="toc-text">2.取绝对值 - Abs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%91%E4%B8%8A%E5%8F%96%E6%95%B4-Ceil%EF%BC%8CCeilToInt"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.向上取整 - Ceil，CeilToInt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%90%91%E4%B8%8B%E5%8F%96%E6%95%B4-Floor%EF%BC%8CFloorToInt"><span class="toc-number">3.3.4.</span> <span class="toc-text">4.向下取整 - Floor，FloorToInt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%92%B3%E5%88%B6%E5%87%BD%E6%95%B0-Clamp%EF%BC%8CClamp01"><span class="toc-number">3.3.5.</span> <span class="toc-text">5.钳制函数 - Clamp，Clamp01</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%8E%B7%E5%8F%96%E6%9C%80%E5%A4%A7%E5%80%BC-Max"><span class="toc-number">3.3.6.</span> <span class="toc-text">6.获取最大值 - Max</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E8%8E%B7%E5%8F%96%E6%9C%80%E5%B0%8F%E5%80%BC-Min"><span class="toc-number">3.3.7.</span> <span class="toc-text">7.获取最小值 - Min</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%B8%80%E4%B8%AA%E6%95%B0%E7%9A%84-n-%E6%AC%A1%E5%B9%82-Pow"><span class="toc-number">3.3.8.</span> <span class="toc-text">8.一个数的 n 次幂 - Pow</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5-Round%EF%BC%8CRoundToInt"><span class="toc-number">3.3.9.</span> <span class="toc-text">9.四舍五入 - Round，RoundToInt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%95%B0%E7%9A%84%E5%B9%B3%E6%96%B9%E6%A0%B9-Sqrt"><span class="toc-number">3.3.10.</span> <span class="toc-text">10.返回一个数的平方根 - Sqrt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E6%95%B0%E6%98%AF%E5%90%A6%E6%98%AF-2-%E7%9A%84-n-%E6%AC%A1%E6%96%B9-IsPowerOfTwo"><span class="toc-number">3.3.11.</span> <span class="toc-text">11.判断一个数是否是 2 的 n 次方 - IsPowerOfTwo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%88%A4%E6%96%AD%E6%AD%A3%E8%B4%9F%E6%95%B0%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%AE%83%E7%9A%84%E7%AC%A6%E5%8F%B7-Sign"><span class="toc-number">3.3.12.</span> <span class="toc-text">12.判断正负数，返回它的符号 - Sign</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B-Mathf-%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-Lerp%EF%BC%8C%E4%B8%80%E8%88%AC%E4%BD%BF%E7%94%A8%E5%85%B6%E4%B8%8D%E5%81%9C%E8%AE%A1%E7%AE%97"><span class="toc-number">3.4.</span> <span class="toc-text">知识点四 Mathf 中的常用方法 Lerp，一般使用其不停计算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%80%BC%E8%BF%90%E7%AE%97-Lerp"><span class="toc-number">3.4.1.</span> <span class="toc-text">插值运算 - Lerp</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%80%BC%E8%BF%90%E7%AE%97%E7%94%A8%E6%B3%95%E4%B8%80"><span class="toc-number">3.4.1.1.</span> <span class="toc-text">插值运算用法一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%80%BC%E8%BF%90%E7%AE%97%E7%94%A8%E6%B3%95%E4%BA%8C"><span class="toc-number">3.4.1.2.</span> <span class="toc-text">插值运算用法二</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-number">3.5.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-4%EF%BC%9A%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">4.</span> <span class="toc-text">任务 4：三角函数 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%BC%A7%E5%BA%A6%E3%80%81%E8%A7%92%E5%BA%A6%E7%9B%B8%E4%BA%92%E8%BD%AC%E5%8C%96"><span class="toc-number">4.1.</span> <span class="toc-text">知识点一 弧度、角度相互转化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E5%BA%A6%E5%92%8C%E5%BC%A7%E5%BA%A6%E9%83%BD%E6%98%AF%E5%BA%A6%E9%87%8F%E8%A7%92%E7%9A%84%E5%8D%95%E4%BD%8D"><span class="toc-number">4.1.1.</span> <span class="toc-text">角度和弧度都是度量角的单位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E5%BA%A6%E5%92%8C%E5%BC%A7%E5%BA%A6%E7%9A%84%E8%BD%AC%E6%8D%A2%E5%85%B3%E7%B3%BB"><span class="toc-number">4.1.2.</span> <span class="toc-text">角度和弧度的转换关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E7%9A%84%E8%A7%92%E5%BA%A6%E5%BC%A7%E5%BA%A6%E8%BD%AC%E6%8D%A2"><span class="toc-number">4.1.3.</span> <span class="toc-text">Unity 当中的角度弧度转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">4.2.</span> <span class="toc-text">知识点二 三角函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E7%9A%84%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">4.2.1.</span> <span class="toc-text">Unity 当中的三角函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E5%8F%8D%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">4.3.</span> <span class="toc-text">知识点三 反三角函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">4.3.1.</span> <span class="toc-text">反三角函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E7%9A%84%E5%8F%8D%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">4.3.2.</span> <span class="toc-text">Unity 当中的反三角函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.4.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-1"><span class="toc-number">4.5.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-6%EF%BC%9A%E5%9D%90%E6%A0%87%E7%B3%BB-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">5.</span> <span class="toc-text">任务 6：坐标系 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E4%B8%96%E7%95%8C%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">5.1.</span> <span class="toc-text">知识点一 世界坐标系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E8%8E%B7%E5%8F%96%E4%B8%96%E7%95%8C%E5%9D%90%E6%A0%87%E7%9B%B8%E5%85%B3"><span class="toc-number">5.1.1.</span> <span class="toc-text">Unity 当中获取世界坐标相关</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E7%89%A9%E4%BD%93%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">5.2.</span> <span class="toc-text">知识点二 物体坐标系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%9C%B0%E5%9D%90%E6%A0%87"><span class="toc-number">5.2.1.</span> <span class="toc-text">Unity 当中获取本地坐标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E5%B1%8F%E5%B9%95%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">5.3.</span> <span class="toc-text">知识点三 屏幕坐标系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%B1%8F%E5%B9%95%E5%9D%90%E6%A0%87"><span class="toc-number">5.3.1.</span> <span class="toc-text">Unity 当中获取屏幕坐标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B-%E8%A7%86%E5%8F%A3%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="toc-number">5.4.</span> <span class="toc-text">知识点四 视口坐标系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E7%9A%84%E8%A7%86%E5%8F%A3%E5%9D%90%E6%A0%87"><span class="toc-number">5.4.1.</span> <span class="toc-text">Unity 当中的视口坐标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2%E7%9B%B8%E5%85%B3"><span class="toc-number">5.5.</span> <span class="toc-text">坐标转换相关</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-7%EF%BC%9A%E5%90%91%E9%87%8F%E6%A8%A1%E9%95%BF%E5%92%8C%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">6.</span> <span class="toc-text">任务 7：向量模长和单位向量 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%90%91%E9%87%8F"><span class="toc-number">6.1.</span> <span class="toc-text">知识点一 向量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E7%9A%84%E5%90%91%E9%87%8F"><span class="toc-number">6.1.1.</span> <span class="toc-text">Unity 当中的向量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E4%B8%A4%E7%82%B9%E5%86%B3%E5%AE%9A%E4%B8%80%E5%90%91%E9%87%8F"><span class="toc-number">6.2.</span> <span class="toc-text">知识点二 两点决定一向量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E9%9B%B6%E5%90%91%E9%87%8F%E5%92%8C%E8%B4%9F%E5%90%91%E9%87%8F"><span class="toc-number">6.3.</span> <span class="toc-text">知识点三 零向量和负向量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B-%E5%90%91%E9%87%8F%E7%9A%84%E6%A8%A1%E9%95%BF"><span class="toc-number">6.4.</span> <span class="toc-text">知识点四 向量的模长</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%94-%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F"><span class="toc-number">6.5.</span> <span class="toc-text">知识点五 单位向量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">6.6.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-2"><span class="toc-number">6.7.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-9%EF%BC%9A%E5%90%91%E9%87%8F%E5%8A%A0%E5%87%8F%E4%B9%98%E9%99%A4-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">7.</span> <span class="toc-text">任务 9：向量加减乘除 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%90%91%E9%87%8F%E5%8A%A0%E6%B3%95"><span class="toc-number">7.1.</span> <span class="toc-text">知识点一 向量加法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%90%91%E9%87%8F%E5%87%8F%E6%B3%95"><span class="toc-number">7.2.</span> <span class="toc-text">知识点二 向量减法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E5%90%91%E9%87%8F%E4%B9%98%E9%99%A4%E6%A0%87%E9%87%8F"><span class="toc-number">7.3.</span> <span class="toc-text">知识点三 向量乘除标量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">7.4.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-3"><span class="toc-number">7.5.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-11%EF%BC%9A%E5%90%91%E9%87%8F%E7%82%B9%E4%B9%98-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">8.</span> <span class="toc-text">任务 11：向量点乘 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E4%B9%98%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F"><span class="toc-number">8.1.</span> <span class="toc-text">点乘计算公式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E4%B9%98%E5%87%A0%E4%BD%95%E6%84%8F%E4%B9%89"><span class="toc-number">8.2.</span> <span class="toc-text">点乘几何意义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86-%E8%B0%83%E8%AF%95%E7%94%BB%E7%BA%BF"><span class="toc-number">8.3.</span> <span class="toc-text">补充知识 调试画线</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E9%80%9A%E8%BF%87%E7%82%B9%E4%B9%98%E5%88%A4%E6%96%AD%E5%AF%B9%E8%B1%A1%E6%96%B9%E4%BD%8D"><span class="toc-number">8.4.</span> <span class="toc-text">知识点一 通过点乘判断对象方位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E9%80%9A%E8%BF%87%E7%82%B9%E4%B9%98%E6%8E%A8%E5%AF%BC%E5%85%AC%E5%BC%8F%E7%AE%97%E5%87%BA%E5%A4%B9%E8%A7%92"><span class="toc-number">8.5.</span> <span class="toc-text">知识点二 通过点乘推导公式算出夹角</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AC%E5%BC%8F%E6%8E%A8%E5%AF%BC"><span class="toc-number">8.5.1.</span> <span class="toc-text">公式推导</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%AC%E5%BC%8F%E7%AE%97%E5%87%BA%E5%A4%B9%E8%A7%92"><span class="toc-number">8.5.2.</span> <span class="toc-text">Unity 当中使用公式算出夹角</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-3"><span class="toc-number">8.6.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-4"><span class="toc-number">8.7.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-13%EF%BC%9A%E5%90%91%E9%87%8F%E5%8F%89%E4%B9%98-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">9.</span> <span class="toc-text">任务 13：向量叉乘 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%8F%89%E4%B9%98%E8%AE%A1%E7%AE%97"><span class="toc-number">9.1.</span> <span class="toc-text">知识点一 叉乘计算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E5%90%91%E9%87%8F%E5%8F%89%E4%B9%98%E8%AE%A1%E7%AE%97"><span class="toc-number">9.1.1.</span> <span class="toc-text">Unity 当中向量叉乘计算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%89%E4%B9%98%E7%9A%84%E5%87%A0%E4%BD%95%E6%84%8F%E4%B9%89"><span class="toc-number">9.2.</span> <span class="toc-text">叉乘的几何意义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-4"><span class="toc-number">9.3.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-5"><span class="toc-number">9.4.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%90%E8%80%81%E7%8B%AE%E7%AD%94%E6%A1%88"><span class="toc-number">9.4.1.</span> <span class="toc-text">唐老狮答案</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-15%EF%BC%9A%E5%90%91%E9%87%8F%E6%8F%92%E5%80%BC%E8%BF%90%E7%AE%97-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">10.</span> <span class="toc-text">任务 15：向量插值运算 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC"><span class="toc-number">10.1.</span> <span class="toc-text">知识点一 线性插值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%88%E5%BF%AB%E5%90%8E%E6%85%A2-%E6%AF%8F%E5%B8%A7%E6%94%B9%E5%8F%98-start-%E4%BD%8D%E7%BD%AE-%E4%BD%8D%E7%BD%AE%E6%97%A0%E9%99%90%E6%8E%A5%E8%BF%91-%E4%BD%86%E4%B8%8D%E4%BC%9A%E5%BE%97%E5%88%B0-end-%E4%BD%8D%E7%BD%AE"><span class="toc-number">10.1.1.</span> <span class="toc-text">1.先快后慢 每帧改变 start 位置 位置无限接近 但不会得到 end 位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8C%80%E9%80%9F-%E6%AF%8F%E5%B8%A7%E6%94%B9%E5%8F%98%E6%97%B6%E9%97%B4-%E5%BD%93-t-1-%E6%97%B6-%E5%BE%97%E5%88%B0%E7%BB%93%E6%9E%9C"><span class="toc-number">10.1.2.</span> <span class="toc-text">2.匀速 每帧改变时间 当 t&gt;&#x3D;1 时 得到结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E7%90%83%E6%80%A7%E6%8F%92%E5%80%BC"><span class="toc-number">10.2.</span> <span class="toc-text">知识点二 球性插值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7%E5%92%8C%E7%90%83%E5%BD%A2%E6%8F%92%E5%80%BC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">10.2.1.</span> <span class="toc-text">线性和球形插值的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-5"><span class="toc-number">10.3.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-6"><span class="toc-number">10.4.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98"><span class="toc-number">10.4.1.</span> <span class="toc-text">第一题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98"><span class="toc-number">10.4.2.</span> <span class="toc-text">第二题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-17%EF%BC%9A%E4%B8%BA%E4%BD%95%E4%BD%BF%E7%94%A8%E5%9B%9B%E5%85%83%E6%95%B0-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">11.</span> <span class="toc-text">任务 17：为何使用四元数 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AC%A7%E6%8B%89%E8%A7%92"><span class="toc-number">11.1.</span> <span class="toc-text">欧拉角</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AC%A7%E6%8B%89%E8%A7%92%E6%97%8B%E8%BD%AC%E7%BA%A6%E5%AE%9A"><span class="toc-number">11.1.1.</span> <span class="toc-text">欧拉角旋转约定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E4%B8%AD%E7%9A%84%E6%AC%A7%E6%8B%89%E8%A7%92"><span class="toc-number">11.1.2.</span> <span class="toc-text">Unity 中的欧拉角</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AC%A7%E6%8B%89%E8%A7%92%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">11.1.3.</span> <span class="toc-text">欧拉角的优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%87%E5%90%91%E8%8A%82%E6%AD%BB%E9%94%81"><span class="toc-number">11.1.4.</span> <span class="toc-text">万向节死锁</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-6"><span class="toc-number">11.2.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-18%EF%BC%9A%E5%9B%9B%E5%85%83%E6%95%B0%E6%98%AF%E4%BB%80%E4%B9%88-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">12.</span> <span class="toc-text">任务 18：四元数是什么 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">12.1.</span> <span class="toc-text">四元数的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E5%85%83%E6%95%B0%E6%9E%84%E6%88%90"><span class="toc-number">12.2.</span> <span class="toc-text">四元数构成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%B4-%E8%A7%92%E5%AF%B9"><span class="toc-number">12.2.1.</span> <span class="toc-text">轴-角对</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unity-%E5%BD%93%E4%B8%AD%E7%9A%84%E5%9B%9B%E5%85%83%E6%95%B0"><span class="toc-number">12.3.</span> <span class="toc-text">Unity 当中的四元数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Unity-%E4%B8%AD%E7%9A%84%E5%9B%9B%E5%85%83%E6%95%B0%E5%88%9D%E5%A7%8B%E5%8C%96%E6%96%B9%E6%B3%95"><span class="toc-number">12.3.1.</span> <span class="toc-text">Unity 中的四元数初始化方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%9B%9B%E5%85%83%E6%95%B0-Quaternion"><span class="toc-number">12.4.</span> <span class="toc-text">知识点一 四元数 Quaternion</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%9B%9B%E5%85%83%E6%95%B0%E5%92%8C%E6%AC%A7%E6%8B%89%E8%A7%92%E8%BD%AC%E6%8D%A2"><span class="toc-number">12.5.</span> <span class="toc-text">知识点二 四元数和欧拉角转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E5%9B%9B%E5%85%83%E6%95%B0%E5%BC%A5%E8%A1%A5%E7%9A%84%E6%AC%A7%E6%8B%89%E8%A7%92%E7%BC%BA%E7%82%B9"><span class="toc-number">12.6.</span> <span class="toc-text">知识点三 四元数弥补的欧拉角缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E4%B8%80%E6%97%8B%E8%BD%AC%E7%9A%84%E8%A1%A8%E7%A4%BA%E4%B8%8D%E5%94%AF%E4%B8%80"><span class="toc-number">12.6.1.</span> <span class="toc-text">同一旋转的表示不唯一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%87%E5%90%91%E8%8A%82%E6%AD%BB%E9%94%81-1"><span class="toc-number">12.6.2.</span> <span class="toc-text">万向节死锁</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-7"><span class="toc-number">12.7.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-19%EF%BC%9A%E5%9B%9B%E5%85%83%E6%95%B0%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">13.</span> <span class="toc-text">任务 19：四元数常用方法 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%8D%95%E4%BD%8D%E5%9B%9B%E5%85%83%E6%95%B0"><span class="toc-number">13.1.</span> <span class="toc-text">知识点一 单位四元数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E6%8F%92%E5%80%BC%E8%BF%90%E7%AE%97"><span class="toc-number">13.2.</span> <span class="toc-text">知识点二 插值运算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-LookRotation%EF%BC%8C%E5%90%91%E9%87%8F%E6%8C%87%E5%90%91%E8%BD%AC%E5%9B%9B%E5%85%83%E6%95%B0"><span class="toc-number">13.3.</span> <span class="toc-text">知识点三 LookRotation，向量指向转四元数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-7"><span class="toc-number">13.4.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98-1"><span class="toc-number">13.4.1.</span> <span class="toc-text">第一题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-1"><span class="toc-number">13.4.2.</span> <span class="toc-text">第二题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-21%EF%BC%9A%E5%9B%9B%E5%85%83%E6%95%B0%E8%AE%A1%E7%AE%97-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">14.</span> <span class="toc-text">任务 21：四元数计算 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%9B%9B%E5%85%83%E6%95%B0%E7%9B%B8%E4%B9%98"><span class="toc-number">14.1.</span> <span class="toc-text">知识点一 四元数相乘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%9B%9B%E5%85%83%E6%95%B0%E4%B9%98%E5%90%91%E9%87%8F"><span class="toc-number">14.2.</span> <span class="toc-text">知识点二 四元数乘向量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-8"><span class="toc-number">14.3.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98-2"><span class="toc-number">14.3.1.</span> <span class="toc-text">第一题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-2"><span class="toc-number">14.3.2.</span> <span class="toc-text">第二题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mono-%E4%B8%AD%E7%9A%84%E9%87%8D%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">15.</span> <span class="toc-text">Mono 中的重要功能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-24%EF%BC%9A%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">16.</span> <span class="toc-text">任务 24：延迟函数 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E4%BB%80%E4%B9%88%E6%98%AF%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0"><span class="toc-number">16.1.</span> <span class="toc-text">知识点一 什么是延迟函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">16.2.</span> <span class="toc-text">知识点二 延迟函数的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0"><span class="toc-number">16.2.1.</span> <span class="toc-text">1.延迟函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BB%B6%E8%BF%9F%E9%87%8D%E5%A4%8D%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">16.2.2.</span> <span class="toc-text">2.延迟重复执行函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%96%E6%B6%88%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0"><span class="toc-number">16.2.3.</span> <span class="toc-text">3.取消延迟函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E6%9C%89%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0"><span class="toc-number">16.2.4.</span> <span class="toc-text">4.判断是否有延迟函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0%E5%8F%97%E5%AF%B9%E8%B1%A1%E5%A4%B1%E6%B4%BB%E9%94%80%E6%AF%81%E5%BD%B1%E5%93%8D"><span class="toc-number">16.3.</span> <span class="toc-text">知识点三 延迟函数受对象失活销毁影响</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-9"><span class="toc-number">16.4.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98-3"><span class="toc-number">16.4.1.</span> <span class="toc-text">第一题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-3"><span class="toc-number">16.4.2.</span> <span class="toc-text">第二题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-26-27%EF%BC%9A%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">17.</span> <span class="toc-text">任务 26-27：协同程序 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-Unity-%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%9F"><span class="toc-number">17.1.</span> <span class="toc-text">知识点一 Unity 是否支持多线程？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">17.2.</span> <span class="toc-text">知识点二 协同程序是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">17.3.</span> <span class="toc-text">知识点三 协同程序和线程的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B-%E5%8D%8F%E7%A8%8B%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">17.4.</span> <span class="toc-text">知识点四 协程的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%A3%B0%E6%98%8E%E5%8D%8F%E7%A8%8B%E5%87%BD%E6%95%B0"><span class="toc-number">17.4.1.</span> <span class="toc-text">第一步：声明协程函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%BC%80%E5%90%AF%E5%8D%8F%E7%A8%8B%E5%87%BD%E6%95%B0"><span class="toc-number">17.4.2.</span> <span class="toc-text">第二步：开启协程函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%85%B3%E9%97%AD%E5%8D%8F%E7%A8%8B"><span class="toc-number">17.4.3.</span> <span class="toc-text">第三步：关闭协程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%94-yield-return-%E4%B8%8D%E5%90%8C%E5%86%85%E5%AE%B9%E7%9A%84%E5%90%AB%E4%B9%89"><span class="toc-number">17.5.</span> <span class="toc-text">知识点五 yield return 不同内容的含义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%8B%E4%B8%80%E5%B8%A7%E6%89%A7%E8%A1%8C"><span class="toc-number">17.5.1.</span> <span class="toc-text">1.下一帧执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AD%89%E5%BE%85%E6%8C%87%E5%AE%9A%E7%A7%92%E5%90%8E%E6%89%A7%E8%A1%8C"><span class="toc-number">17.5.2.</span> <span class="toc-text">2.等待指定秒后执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%AD%89%E5%BE%85%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%9B%BA%E5%AE%9A%E7%89%A9%E7%90%86%E5%B8%A7%E6%9B%B4%E6%96%B0%E6%97%B6%E6%89%A7%E8%A1%8C"><span class="toc-number">17.5.3.</span> <span class="toc-text">3.等待下一个固定物理帧更新时执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%AD%89%E5%BE%85%E6%91%84%E5%83%8F%E6%9C%BA%E5%92%8C-GUI-%E6%B8%B2%E6%9F%93%E5%AE%8C%E6%88%90%E5%90%8E%E6%89%A7%E8%A1%8C"><span class="toc-number">17.5.4.</span> <span class="toc-text">4.等待摄像机和 GUI 渲染完成后执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%B8%80%E4%BA%9B%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E8%B1%A1-%E6%AF%94%E5%A6%82%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">17.5.5.</span> <span class="toc-text">5.一些特殊类型的对象 比如异步加载相关函数返回的对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%B7%B3%E5%87%BA%E5%8D%8F%E7%A8%8B"><span class="toc-number">17.5.6.</span> <span class="toc-text">6.跳出协程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%85%AD-%E5%8D%8F%E7%A8%8B%E5%8F%97%E5%AF%B9%E8%B1%A1%E5%92%8C%E7%BB%84%E4%BB%B6%E5%A4%B1%E6%B4%BB%E9%94%80%E6%AF%81%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">17.6.</span> <span class="toc-text">知识点六 协程受对象和组件失活销毁的影响</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-8"><span class="toc-number">17.7.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-10"><span class="toc-number">17.8.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98-4"><span class="toc-number">17.8.1.</span> <span class="toc-text">第一题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-4"><span class="toc-number">17.8.2.</span> <span class="toc-text">第二题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-29%EF%BC%9A%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%90%86-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">18.</span> <span class="toc-text">任务 29：协同程序原理 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%8D%8F%E7%A8%8B%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">18.1.</span> <span class="toc-text">知识点一 协程的本质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%8D%8F%E7%A8%8B%E6%9C%AC%E4%BD%93%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%93%E7%8E%B0"><span class="toc-number">18.2.</span> <span class="toc-text">知识点二 协程本体是迭代器方法的体现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8D%8F%E7%A8%8B%E5%87%BD%E6%95%B0%E6%9C%AC%E4%BD%93"><span class="toc-number">18.2.1.</span> <span class="toc-text">1.协程函数本体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E5%99%A8"><span class="toc-number">18.2.2.</span> <span class="toc-text">2.协程调度器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-9"><span class="toc-number">18.2.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-10"><span class="toc-number">18.3.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-11"><span class="toc-number">18.4.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Resources-%E8%B5%84%E6%BA%90%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD"><span class="toc-number">19.</span> <span class="toc-text">Resources 资源动态加载</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-31%EF%BC%9A%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6%E5%A4%B9-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">20.</span> <span class="toc-text">任务 31：特殊文件夹 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%B7%A5%E7%A8%8B%E8%B7%AF%E5%BE%84%E8%8E%B7"><span class="toc-number">20.1.</span> <span class="toc-text">知识点一 工程路径获</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-Resources-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">20.2.</span> <span class="toc-text">知识点二 Resources 资源文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-StreamingAssets-%E6%B5%81%E5%8A%A8%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">20.3.</span> <span class="toc-text">知识点三 StreamingAssets 流动资源文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B-persistentDataPath-%E6%8C%81%E4%B9%85%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">20.4.</span> <span class="toc-text">知识点四 persistentDataPath 持久数据文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%94-Plugins-%E6%8F%92%E4%BB%B6%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">20.5.</span> <span class="toc-text">知识点五 Plugins 插件文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%85%AD-Editor-%E7%BC%96%E8%BE%91%E5%99%A8%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">20.6.</span> <span class="toc-text">知识点六 Editor 编辑器文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%83-%E9%BB%98%E8%AE%A4%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%A4%B9-Standard-Assets"><span class="toc-number">20.7.</span> <span class="toc-text">知识点七 默认资源文件夹 Standard Assets</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-32%EF%BC%9AResources-%E8%B5%84%E6%BA%90%E5%90%8C%E6%AD%A5%E5%8A%A0%E8%BD%BD-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">21.</span> <span class="toc-text">任务 32：Resources 资源同步加载 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-Resources-%E8%B5%84%E6%BA%90%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">21.1.</span> <span class="toc-text">知识点一 Resources 资源动态加载的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%B8%B8%E7%94%A8%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B"><span class="toc-number">21.2.</span> <span class="toc-text">知识点二 常用资源类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E8%B5%84%E6%BA%90%E5%90%8C%E6%AD%A5%E5%8A%A0%E8%BD%BD-%E6%99%AE%E9%80%9A%E6%96%B9%E6%B3%95"><span class="toc-number">21.3.</span> <span class="toc-text">知识点三 资源同步加载 普通方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%A2%84%E8%AE%BE%E4%BD%93%E5%AF%B9%E8%B1%A1"><span class="toc-number">21.3.1.</span> <span class="toc-text">1.预设体对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%9F%B3%E6%95%88%E8%B5%84%E6%BA%90"><span class="toc-number">21.3.2.</span> <span class="toc-text">2.音效资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%96%87%E6%9C%AC%E8%B5%84%E6%BA%90"><span class="toc-number">21.3.3.</span> <span class="toc-text">3.文本资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%9B%BE%E7%89%87"><span class="toc-number">21.3.4.</span> <span class="toc-text">4.图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%85%B6%E5%AE%83%E7%B1%BB%E5%9E%8B%EF%BC%8C%E9%9C%80%E8%A6%81%E4%BB%80%E4%B9%88%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%B0%B1%E7%94%A8%E4%BB%80%E4%B9%88%E7%B1%BB%E5%9E%8B%E5%B0%B1%E8%A1%8C"><span class="toc-number">21.3.5.</span> <span class="toc-text">5.其它类型，需要什么类型，就用什么类型就行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E9%97%AE%E9%A2%98%EF%BC%9A%E8%B5%84%E6%BA%90%E5%90%8C%E5%90%8D%E6%80%8E%E4%B9%88%E5%8A%9E"><span class="toc-number">21.3.6.</span> <span class="toc-text">6.问题：资源同名怎么办</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E5%8A%A0%E8%BD%BD%E6%8C%87%E5%AE%9A%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">21.3.6.1.</span> <span class="toc-text">6-1 加载指定类型的资源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E5%8A%A0%E8%BD%BD%E6%8C%87%E5%AE%9A%E5%90%8D%E5%AD%97%E7%9A%84%E6%89%80%E6%9C%89%E8%B5%84%E6%BA%90"><span class="toc-number">21.3.6.2.</span> <span class="toc-text">6 - 2 加载指定名字的所有资源</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B-%E8%B5%84%E6%BA%90%E5%90%8C%E6%AD%A5%E5%8A%A0%E8%BD%BD-%E6%B3%9B%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-number">21.4.</span> <span class="toc-text">知识点四 资源同步加载 泛型方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-11"><span class="toc-number">21.5.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-12"><span class="toc-number">21.6.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E9%87%8D%E5%A4%8D%E5%8A%A0%E8%BD%BD%E5%90%8C%E4%B8%80%E4%B8%AA%E8%B5%84%E6%BA%90"><span class="toc-number">21.6.1.</span> <span class="toc-text">关于重复加载同一个资源</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-34%EF%BC%9AResources-%E8%B5%84%E6%BA%90%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">22.</span> <span class="toc-text">任务 34：Resources 资源异步加载 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-Resources-%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">22.1.</span> <span class="toc-text">知识点一 Resources 异步加载是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-Resources-%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E6%96%B9%E6%B3%95"><span class="toc-number">22.2.</span> <span class="toc-text">知识点二 Resources 异步加载方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%9A%E8%BF%87%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD%E4%B8%AD%E7%9A%84%E5%AE%8C%E6%88%90%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%EF%BC%8C%E4%BD%BF%E7%94%A8%E5%8A%A0%E8%BD%BD%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">22.2.1.</span> <span class="toc-text">1.通过异步加载中的完成事件监听，使用加载的资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%9A%E8%BF%87%E5%8D%8F%E7%A8%8B-%E4%BD%BF%E7%94%A8%E5%8A%A0%E8%BD%BD%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">22.2.2.</span> <span class="toc-text">2.通过协程 使用加载的资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-12"><span class="toc-number">22.3.</span> <span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%8C%E6%88%90%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD"><span class="toc-number">22.3.1.</span> <span class="toc-text">1.完成事件监听异步加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8D%8F%E7%A8%8B%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD"><span class="toc-number">22.3.2.</span> <span class="toc-text">2.协程异步加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="toc-number">22.3.3.</span> <span class="toc-text">注意：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-13"><span class="toc-number">22.4.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-36%EF%BC%9AResources-%E8%B5%84%E6%BA%90%E5%8D%B8%E8%BD%BD-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">23.</span> <span class="toc-text">任务 36：Resources 资源卸载 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-Resources-%E9%87%8D%E5%A4%8D%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90%E4%BC%9A%E6%B5%AA%E8%B4%B9%E5%86%85%E5%AD%98%E5%90%97%EF%BC%9F"><span class="toc-number">23.1.</span> <span class="toc-text">知识点一 Resources 重复加载资源会浪费内存吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%A6%82%E4%BD%95%E6%89%8B%E5%8A%A8%E9%87%8A%E6%94%BE%E6%8E%89%E7%BC%93%E5%AD%98%E4%B8%AD%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">23.2.</span> <span class="toc-text">知识点二 如何手动释放掉缓存中的资源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8D%B8%E8%BD%BD%E6%8C%87%E5%AE%9A%E8%B5%84%E6%BA%90"><span class="toc-number">23.2.1.</span> <span class="toc-text">1.卸载指定资源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%8D%B8%E8%BD%BD%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">23.2.2.</span> <span class="toc-text">2.卸载未使用的资源</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unity-%E6%80%A7%E8%83%BD%E7%9B%91%E5%90%AC%E9%9D%A2%E6%9D%BF"><span class="toc-number">23.3.</span> <span class="toc-text">Unity 性能监听面板</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-37%EF%BC%9A%E5%9C%BA%E6%99%AF%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">24.</span> <span class="toc-text">任务 37：场景异步加载 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E5%9B%9E%E9%A1%BE%E5%9C%BA%E6%99%AF%E5%90%8C%E6%AD%A5%E5%88%87%E6%8D%A2"><span class="toc-number">24.1.</span> <span class="toc-text">知识点一 回顾场景同步切换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E5%90%8C%E6%AD%A5%E5%88%87%E6%8D%A2%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-number">24.1.1.</span> <span class="toc-text">场景同步切换的缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%9C%BA%E6%99%AF%E5%BC%82%E6%AD%A5%E5%88%87%E6%8D%A2"><span class="toc-number">24.2.</span> <span class="toc-text">知识点二 场景异步切换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%80%9A%E8%BF%87%E4%BA%8B%E4%BB%B6%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0-%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD"><span class="toc-number">24.2.1.</span> <span class="toc-text">1.通过事件回调函数 异步加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%80%9A%E8%BF%87%E5%8D%8F%E7%A8%8B%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD"><span class="toc-number">24.2.2.</span> <span class="toc-text">2.通过协程异步加载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-13"><span class="toc-number">24.3.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-14"><span class="toc-number">24.4.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-39%EF%BC%9ALineRenderer-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">25.</span> <span class="toc-text">任务 39：LineRenderer 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-LineRenderer-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">25.1.</span> <span class="toc-text">知识点一 LineRenderer 是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-LineRender-%E5%8F%82%E6%95%B0%E7%9B%B8%E5%85%B3"><span class="toc-number">25.2.</span> <span class="toc-text">知识点二 LineRender 参数相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E5%8F%82%E6%95%B0"><span class="toc-number">25.2.1.</span> <span class="toc-text">重要参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-LineRender-%E4%BB%A3%E7%A0%81%E7%9B%B8%E5%85%B3"><span class="toc-number">25.3.</span> <span class="toc-text">知识点三 LineRender 代码相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-15"><span class="toc-number">25.4.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98-5"><span class="toc-number">25.4.1.</span> <span class="toc-text">第一题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-5"><span class="toc-number">25.4.2.</span> <span class="toc-text">第二题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Unity-%E6%A0%B8%E5%BF%83%E7%B3%BB%E7%BB%9F-%E7%89%A9%E7%90%86%E7%B3%BB%E7%BB%9F-%E6%A3%80%E6%B5%8B%E7%9B%B8%E5%85%B3"><span class="toc-number">26.</span> <span class="toc-text">Unity 核心系统-物理系统-检测相关</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-41%EF%BC%9A%E8%8C%83%E5%9B%B4%E6%A3%80%E6%B5%8B-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">27.</span> <span class="toc-text">任务 41：范围检测 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-%E7%89%A9%E7%90%86%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B"><span class="toc-number">27.1.</span> <span class="toc-text">知识回顾 物理系统之碰撞检测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E4%BB%80%E4%B9%88%E6%98%AF%E8%8C%83%E5%9B%B4%E6%A3%80%E6%B5%8B"><span class="toc-number">27.2.</span> <span class="toc-text">知识点一 什么是范围检测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E8%8C%83%E5%9B%B4%E6%A3%80%E6%B5%8B"><span class="toc-number">27.3.</span> <span class="toc-text">知识点二 如何进行范围检测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%9B%92%E7%8A%B6%E8%8C%83%E5%9B%B4%E6%A3%80%E6%B5%8B"><span class="toc-number">27.3.1.</span> <span class="toc-text">1.盒状范围检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A"><span class="toc-number">27.3.2.</span> <span class="toc-text">重要知识点：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%A6%E4%B8%80%E4%B8%AA-API"><span class="toc-number">27.3.2.1.</span> <span class="toc-text">另一个 API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%90%83%E5%BD%A2%E8%8C%83%E5%9B%B4%E6%A3%80%E6%B5%8B"><span class="toc-number">27.3.3.</span> <span class="toc-text">2.球形范围检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%83%B6%E5%9B%8A%E8%8C%83%E5%9B%B4%E6%A3%80%E6%B5%8B"><span class="toc-number">27.3.4.</span> <span class="toc-text">3.胶囊范围检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Layer%EF%BC%88%E5%9B%BE%E5%B1%82%E7%9B%B8%E5%85%B3%EF%BC%89"><span class="toc-number">27.3.5.</span> <span class="toc-text">Layer（图层相关）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-14"><span class="toc-number">27.4.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-16"><span class="toc-number">27.5.</span> <span class="toc-text">练习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-43%EF%BC%9A%E5%B0%84%E7%BA%BF%E6%A3%80%E6%B5%8B-%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">28.</span> <span class="toc-text">任务 43：射线检测 知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80-%E4%BB%80%E4%B9%88%E6%98%AF%E5%B0%84%E7%BA%BF%E6%A3%80%E6%B5%8B"><span class="toc-number">28.1.</span> <span class="toc-text">知识点一 什么是射线检测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C-%E5%B0%84%E7%BA%BF%E5%AF%B9%E8%B1%A1"><span class="toc-number">28.2.</span> <span class="toc-text">知识点二 射线对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3D-%E4%B8%96%E7%95%8C%E4%B8%AD%E7%9A%84%E5%B0%84%E7%BA%BF"><span class="toc-number">28.2.1.</span> <span class="toc-text">1.3D 世界中的射线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%91%84%E5%83%8F%E6%9C%BA%E5%8F%91%E5%B0%84%E5%87%BA%E7%9A%84%E5%B0%84%E7%BA%BF"><span class="toc-number">28.2.2.</span> <span class="toc-text">2.摄像机发射出的射线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A-1"><span class="toc-number">28.2.3.</span> <span class="toc-text">注意：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89-%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E5%87%BD%E6%95%B0"><span class="toc-number">28.3.</span> <span class="toc-text">知识点三 碰撞检测函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%9C%80%E5%8E%9F%E5%A7%8B%E7%9A%84%E5%B0%84%E7%BA%BF%E6%A3%80%E6%B5%8B"><span class="toc-number">28.3.1.</span> <span class="toc-text">1.最原始的射线检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%8E%B7%E5%8F%96%E7%9B%B8%E4%BA%A4%E7%9A%84%E5%8D%95%E4%B8%AA%E7%89%A9%E4%BD%93%E4%BF%A1%E6%81%AF"><span class="toc-number">28.3.2.</span> <span class="toc-text">2.获取相交的单个物体信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%8E%B7%E5%8F%96%E7%9B%B8%E4%BA%A4%E7%9A%84%E5%A4%9A%E4%B8%AA%E7%89%A9%E4%BD%93"><span class="toc-number">28.3.3.</span> <span class="toc-text">3.获取相交的多个物体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B-%E4%BD%BF%E7%94%A8%E6%97%B6%E6%B3%A8%E6%84%8F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">28.4.</span> <span class="toc-text">知识点四 使用时注意的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A-2"><span class="toc-number">28.4.1.</span> <span class="toc-text">注意：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%E9%A2%98-17"><span class="toc-number">28.5.</span> <span class="toc-text">练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98-6"><span class="toc-number">28.5.1.</span> <span class="toc-text">第一题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-6"><span class="toc-number">28.5.2.</span> <span class="toc-text">第二题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1-45%EF%BC%9A%E6%80%BB%E7%BB%93"><span class="toc-number">29.</span> <span class="toc-text">任务 45：总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9A%84%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="toc-number">29.1.</span> <span class="toc-text">学习的主要内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Unity-%E5%9F%BA%E7%A1%80%E4%B8%AD%E7%9F%A5%E8%AF%86%E7%82%B9%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-number">29.2.</span> <span class="toc-text">Unity 基础中知识点的重要性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AD%A6%E5%A5%BD-Unity"><span class="toc-number">29.3.</span> <span class="toc-text">如何学好 Unity?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%BA%E8%B0%83"><span class="toc-number">29.4.</span> <span class="toc-text">强调</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/56e313ff/" title="国内二次元相关展会概览 &amp; 逛展推荐"><img src="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/69553946_p0.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="国内二次元相关展会概览 &amp; 逛展推荐"/></a><div class="content"><a class="title" href="/posts/56e313ff/" title="国内二次元相关展会概览 &amp; 逛展推荐">国内二次元相关展会概览 &amp; 逛展推荐</a><time datetime="2024-07-19T21:09:03.000Z" title="发表于 2024-07-19 21:09:03">2024-07-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f402069a/" title="国内二次元周边市场 &amp; 购买周边指南"><img src="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/noet8h3s.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="国内二次元周边市场 &amp; 购买周边指南"/></a><div class="content"><a class="title" href="/posts/f402069a/" title="国内二次元周边市场 &amp; 购买周边指南">国内二次元周边市场 &amp; 购买周边指南</a><time datetime="2024-07-19T21:08:42.000Z" title="发表于 2024-07-19 21:08:42">2024-07-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/54cf6201/" title="近期上海线下活动一览"><img src="https://pic.imgdb.cn/item/65b2a2b1871b83018a2cc638.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="近期上海线下活动一览"/></a><div class="content"><a class="title" href="/posts/54cf6201/" title="近期上海线下活动一览">近期上海线下活动一览</a><time datetime="2024-06-23T13:40:54.000Z" title="发表于 2024-06-23 13:40:54">2024-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ac98fa8d/" title="Unity 面试题 &amp; 日常问题"><img src="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/UNITY.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 面试题 &amp; 日常问题"/></a><div class="content"><a class="title" href="/posts/ac98fa8d/" title="Unity 面试题 &amp; 日常问题">Unity 面试题 &amp; 日常问题</a><time datetime="2024-06-18T21:34:41.000Z" title="发表于 2024-06-18 21:34:41">2024-06-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b6a2633a/" title="关于我在 2023 年收获了哪些 ACGN 周边"><img src="https://blogimage-1258650140.cos.ap-nanjing.myqcloud.com/blog/qungz.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于我在 2023 年收获了哪些 ACGN 周边"/></a><div class="content"><a class="title" href="/posts/b6a2633a/" title="关于我在 2023 年收获了哪些 ACGN 周边">关于我在 2023 年收获了哪些 ACGN 周边</a><time datetime="2024-02-15T00:21:32.000Z" title="发表于 2024-02-15 00:21:32">2024-02-15</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Aki_CCLing</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a href="https://icp.gov.moe/?keyword=20238180" target="_blank">萌ICP备20238180号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.staticfile.org/fancyapps-ui/5.0.33/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://venerable-smakager-94ad33.netlify.app/.netlify/functions/twikoo',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://venerable-smakager-94ad33.netlify.app/.netlify/functions/twikoo',
      region: 'ap-shanghai',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.staticfile.org/twikoo/1.6.31/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>